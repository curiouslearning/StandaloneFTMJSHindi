/*! For license information please see feedTheMonster.js.LICENSE.txt */
(()=>{var e={438:e=>{var t;self,t=()=>(()=>{"use strict";var e={"./node_modules/@statsig/client-core/src/$_StatsigGlobal.js":(e,t,i)=>{var n,s,r;Object.defineProperty(t,"__esModule",{value:!0}),t._getInstance=t._getStatsigGlobalFlag=t._getStatsigGlobal=void 0;const o=i("./node_modules/@statsig/client-core/src/Log.js");t._getStatsigGlobal=()=>__STATSIG__||d,t._getStatsigGlobalFlag=e=>(0,t._getStatsigGlobal)()[e],t._getInstance=e=>{const i=(0,t._getStatsigGlobal)();return e?i.instances&&i.instances[e]:(i.instances&&Object.keys(i.instances).length>1&&o.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),i.firstInstance)};const a="__STATSIG__",l="undefined"!=typeof window?window:{},c=void 0!==i.g?i.g:{},u="undefined"!=typeof globalThis?globalThis:{},d=null!==(r=null!==(s=null!==(n=l[a])&&void 0!==n?n:c[a])&&void 0!==s?s:u[a])&&void 0!==r?r:{instance:t._getInstance};l[a]=d,c[a]=d,u[a]=d},"./node_modules/@statsig/client-core/src/CacheKey.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getStorageKey=t._getUserStorageKey=void 0;const n=i("./node_modules/@statsig/client-core/src/Hashing.js");function s(e,t,i){var s;if(i)return i(e,t);const r=t&&t.customIDs?t.customIDs:{},o=[`uid:${null!==(s=null==t?void 0:t.userID)&&void 0!==s?s:""}`,`cids:${Object.keys(r).sort(((e,t)=>e.localeCompare(t))).map((e=>`${e}-${r[e]}`)).join(",")}`,`k:${e}`];return(0,n._DJB2)(o.join("|"))}t._getUserStorageKey=s,t._getStorageKey=function(e,t,i){return t?s(e,t,i):(0,n._DJB2)(`k:${e}`)}},"./node_modules/@statsig/client-core/src/ClientInterfaces.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/DataAdapterCore.js":function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t._makeDataAdapterResult=t.DataAdapterCore=void 0;const s=i("./node_modules/@statsig/client-core/src/Log.js"),r=i("./node_modules/@statsig/client-core/src/StableID.js"),o=i("./node_modules/@statsig/client-core/src/StatsigUser.js"),a=i("./node_modules/@statsig/client-core/src/StorageProvider.js"),l=i("./node_modules/@statsig/client-core/src/TypedJsonParse.js");function c(e,t,i,n){return{source:e,data:t,receivedAt:Date.now(),stableID:i,fullUserHash:(0,o._getFullUserHash)(n)}}t.DataAdapterCore=class{constructor(e,t){this._adapterName=e,this._cacheSuffix=t,this._options=null,this._sdkKey=null,this._lastModifiedStoreKey=`statsig.last_modified_time.${t}`,this._inMemoryCache=new u}attach(e,t){this._sdkKey=e,this._options=t}getDataSync(e){const t=e&&(0,o._normalizeUser)(e,this._options),i=this._getCacheKey(t),n=this._inMemoryCache.get(i,t);if(n)return n;const s=this._loadFromCache(i);return s?(this._inMemoryCache.add(i,s),this._inMemoryCache.get(i,t)):null}setData(e,t){const i=t&&(0,o._normalizeUser)(t,this._options),n=this._getCacheKey(i);this._inMemoryCache.add(n,c("Bootstrap",e,null,i))}_getDataAsyncImpl(e,t,i){return n(this,void 0,void 0,(function*(){a.Storage.isReady()||(yield a.Storage.isReadyResolver());const n=null!=e?e:this.getDataSync(t),r=[this._fetchAndPrepFromNetwork(n,t,i)];return(null==i?void 0:i.timeoutMs)&&r.push(new Promise((e=>setTimeout(e,i.timeoutMs))).then((()=>(s.Log.debug("Fetching latest value timed out"),null)))),yield Promise.race(r)}))}_prefetchDataImpl(e,t){return n(this,void 0,void 0,(function*(){const i=e&&(0,o._normalizeUser)(e,this._options),n=this._getCacheKey(i),s=yield this._getDataAsyncImpl(null,i,t);s&&this._inMemoryCache.add(n,Object.assign(Object.assign({},s),{source:"Prefetch"}))}))}_fetchAndPrepFromNetwork(e,t,i){return n(this,void 0,void 0,(function*(){let n=null;e&&this._isCachedResultValidFor204(e,t)&&(n=e.data);const o=yield this._fetchFromNetwork(n,t,i);if(!o)return s.Log.debug("No response returned for latest value"),null;const a=(0,l._typedJsonParse)(o,"has_updates","Response"),u=this._getSdkKey(),d=r.StableID.get(u);let h=null;if(!0===(null==a?void 0:a.has_updates))h=c("Network",o,d,t);else{if(!n||!1!==(null==a?void 0:a.has_updates))return null;h=c("NetworkNotModified",n,d,t)}const p=this._getCacheKey(t);return this._inMemoryCache.add(p,h),this._writeToCache(p,h),h}))}_getSdkKey(){return null!=this._sdkKey?this._sdkKey:(s.Log.error(`${this._adapterName} is not attached to a Client`),"")}_loadFromCache(e){var t;const i=null===(t=a.Storage.getItem)||void 0===t?void 0:t.call(a.Storage,e);if(null==i)return null;const n=(0,l._typedJsonParse)(i,"source","Cached Result");return n?Object.assign(Object.assign({},n),{source:"Cache"}):null}_writeToCache(e,t){a.Storage.setItem(e,JSON.stringify(t)),this._runLocalStorageCacheEviction(e)}_runLocalStorageCacheEviction(e){var t;const i=null!==(t=(0,a._getObjectFromStorage)(this._lastModifiedStoreKey))&&void 0!==t?t:{};i[e]=Date.now();const n=d(i,10);n&&(delete i[n],a.Storage.removeItem(n)),(0,a._setObjectInStorage)(this._lastModifiedStoreKey,i)}},t._makeDataAdapterResult=c;class u{constructor(){this._data={}}get(e,t){var i;const n=this._data[e],r=null==n?void 0:n.stableID,o=null===(i=null==t?void 0:t.customIDs)||void 0===i?void 0:i.stableID;return o&&r&&o!==r?(s.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):n}add(e,t){const i=d(this._data,9);i&&delete this._data[i],this._data[e]=t}merge(e){this._data=Object.assign(Object.assign({},this._data),e)}}function d(e,t){const i=Object.keys(e);return i.length<=t?null:i.reduce(((t,i)=>{const n=e[t],s=e[i];return"object"==typeof n&&"object"==typeof s?s.receivedAt<n.receivedAt?i:t:s<n?i:t}))}},"./node_modules/@statsig/client-core/src/Diagnostics.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=void 0;const i=new Map,n="start",s="end",r="statsig::diagnostics";function o(e,t,i,n){return Object.assign({key:i,action:t,step:n,timestamp:Date.now()},e)}function a(e,t){var n;const s=null!==(n=i.get(e))&&void 0!==n?n:[];s.push(t),i.set(e,s)}function l(e,t){if(t in e)return e[t]}t.Diagnostics={_getMarkers:e=>i.get(e),_markInitOverallStart:e=>{a(e,o({},n,"overall"))},_markInitOverallEnd:(e,t,i)=>{a(e,o({success:t,error:t?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:i},s,"overall"))},_markInitNetworkReqStart:(e,t)=>{a(e,o(t,n,"initialize","network_request"))},_markInitNetworkReqEnd:(e,t)=>{a(e,o(t,s,"initialize","network_request"))},_markInitProcessStart:e=>{a(e,o({},n,"initialize","process"))},_markInitProcessEnd:(e,t)=>{a(e,o(t,s,"initialize","process"))},_clearMarkers:e=>{i.delete(e)},_formatError(e){if(e&&"object"==typeof e)return{code:l(e,"code"),name:l(e,"name"),message:l(e,"message")}},_getDiagnosticsData(e,i,n,s){var r;return{success:!0===(null==e?void 0:e.ok),statusCode:null==e?void 0:e.status,sdkRegion:null===(r=null==e?void 0:e.headers)||void 0===r?void 0:r.get("x-statsig-region"),isDelta:!0===n.includes('"is_delta":true')||void 0,attempt:i,error:t.Diagnostics._formatError(s)}},_enqueueDiagnosticsEvent(e,i,n,s){const o=t.Diagnostics._getMarkers(n);if(null==o||o.length<=0)return-1;const a=o[o.length-1].timestamp-o[0].timestamp;t.Diagnostics._clearMarkers(n);const l=function(e,t){const i={eventName:r,user:e,value:null,metadata:t,time:Date.now()};return i}(e,{context:"initialize",markers:o.slice(),statsigOptions:s});return i.enqueue(l),a}}},"./node_modules/@statsig/client-core/src/DnsTxtQuery.js":function(e,t){var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t._fetchTxtRecords=void 0;const n=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),s=["i","e","d"],r=200;t._fetchTxtRecords=function(e){return i(this,void 0,void 0,(function*(){const t=yield e("https://cloudflare-dns.com/dns-query",{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:n});if(!t.ok){const e=new Error("Failed to fetch TXT records from DNS");throw e.name="DnsTxtFetchError",e}const i=yield t.arrayBuffer();return function(e){const t=e.findIndex(((t,i)=>i<r&&"="===String.fromCharCode(t)&&s.includes(String.fromCharCode(e[i-1]))));if(-1===t){const e=new Error("Failed to parse TXT records from DNS");throw e.name="DnsTxtParseError",e}let i="";for(let n=t-1;n<e.length;n++)i+=String.fromCharCode(e[n]);return i.split(",")}(new Uint8Array(i))}))}},"./node_modules/@statsig/client-core/src/DownloadConfigSpecsResponse.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/ErrorBoundary.js":function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=t.EXCEPTION_ENDPOINT=void 0;const s=i("./node_modules/@statsig/client-core/src/Log.js"),r=i("./node_modules/@statsig/client-core/src/SDKType.js"),o=i("./node_modules/@statsig/client-core/src/StatsigMetadata.js");t.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";const a="[Statsig] UnknownError";function l(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error("An unknown error occurred.")}t.ErrorBoundary=class{constructor(e,t,i,n){this._sdkKey=e,this._options=t,this._emitter=i,this._lastSeenError=n,this._seen=new Set}wrap(e){try{const t=e;(function(e){const t=new Set;let i=Object.getPrototypeOf(e);for(;i&&i!==Object.prototype;)Object.getOwnPropertyNames(i).filter((e=>"function"==typeof(null==i?void 0:i[e]))).forEach((e=>t.add(e))),i=Object.getPrototypeOf(i);return Array.from(t)})(t).forEach((i=>{const n=t[i];"$EB"in n||(t[i]=(...t)=>this._capture(i,(()=>n.apply(e,t))),t[i].$EB=!0)}))}catch(e){this._onError("eb:wrap",e)}}logError(e,t){this._onError(e,t)}getLastSeenErrorAndReset(){const e=this._lastSeenError;return this._lastSeenError=void 0,null!=e?e:null}attachErrorIfNoneExists(e){this._lastSeenError||(this._lastSeenError=l(e))}_capture(e,t){try{const i=t();return i&&i instanceof Promise?i.catch((t=>this._onError(e,t))):i}catch(t){return this._onError(e,t),null}}_onError(e,i){try{s.Log.warn(`Caught error in ${e}`,{error:i}),(()=>n(this,void 0,void 0,(function*(){var n,s,c,u,d,h,p;const m=i||Error(a),g=m instanceof Error,f=g?m.name:"No Name",v=l(m);if(this._lastSeenError=v,this._seen.has(f))return;if(this._seen.add(f),null===(s=null===(n=this._options)||void 0===n?void 0:n.networkConfig)||void 0===s?void 0:s.preventAllNetworkTraffic)return void(null===(c=this._emitter)||void 0===c||c.call(this,{name:"error",error:i,tag:e}));const b=r.SDKType._get(this._sdkKey),y=o.StatsigMetadataProvider.get(),_=g?m.stack:function(e){try{return JSON.stringify(e)}catch(e){return a}}(m),w=JSON.stringify(Object.assign({tag:e,exception:f,info:_},Object.assign(Object.assign({},y),{sdkType:b}))),S=null!==(h=null===(d=null===(u=this._options)||void 0===u?void 0:u.networkConfig)||void 0===d?void 0:d.networkOverrideFunc)&&void 0!==h?h:fetch;yield S(t.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(b),"STATSIG-SDK-VERSION":String(y.sdkVersion),"Content-Type":"application/json"},body:w}),null===(p=this._emitter)||void 0===p||p.call(this,{name:"error",error:i,tag:e})})))().then((()=>{})).catch((()=>{}))}catch(e){}}}},"./node_modules/@statsig/client-core/src/EvaluationOptions.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/EvaluationTypes.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/EventLogger.js":function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventLogger=void 0;const s=i("./node_modules/@statsig/client-core/src/CacheKey.js"),r=i("./node_modules/@statsig/client-core/src/Hashing.js"),o=i("./node_modules/@statsig/client-core/src/Log.js"),a=i("./node_modules/@statsig/client-core/src/NetworkConfig.js"),l=i("./node_modules/@statsig/client-core/src/SafeJs.js"),c=i("./node_modules/@statsig/client-core/src/StatsigEvent.js"),u=i("./node_modules/@statsig/client-core/src/StorageProvider.js"),d=i("./node_modules/@statsig/client-core/src/UrlConfiguration.js"),h=i("./node_modules/@statsig/client-core/src/VisibilityObserving.js"),p={},m="startup",g="gained_focus";class f{static _safeFlushAndForget(e){var t;null===(t=p[e])||void 0===t||t.flush().catch((()=>{}))}static _safeRetryFailedLogs(e){var t;null===(t=p[e])||void 0===t||t._retryFailedLogs(g)}constructor(e,t,i,n){var s;this._sdkKey=e,this._emitter=t,this._network=i,this._options=n,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._isLoggingDisabled=!0===(null==n?void 0:n.disableLogging),this._maxQueueSize=null!==(s=null==n?void 0:n.loggingBufferMaxSize)&&void 0!==s?s:100;const r=null==n?void 0:n.networkConfig;this._logEventUrlConfig=new d.UrlConfiguration(a.Endpoint._rgstr,null==r?void 0:r.logEventUrl,null==r?void 0:r.api,null==r?void 0:r.logEventFallbackUrls)}setLoggingDisabled(e){this._isLoggingDisabled=e}enqueue(e){this._shouldLogEvent(e)&&(this._normalizeAndAppendEvent(e),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&f._safeFlushAndForget(this._sdkKey))}incrementNonExposureCount(e){var t;const i=null!==(t=this._nonExposedChecks[e])&&void 0!==t?t:0;this._nonExposedChecks[e]=i+1}reset(){this._lastExposureTimeMap={}}start(){(0,l._isServerEnv)()||(p[this._sdkKey]=this,(0,h._subscribeToVisiblityChanged)((e=>{"background"===e?f._safeFlushAndForget(this._sdkKey):"foreground"===e&&f._safeRetryFailedLogs(this._sdkKey)})),this._retryFailedLogs(m),this._startBackgroundFlushInterval())}stop(){return n(this,void 0,void 0,(function*(){this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete p[this._sdkKey],yield this.flush()}))}flush(){return n(this,void 0,void 0,(function*(){if(this._appendAndResetNonExposedChecks(),0===this._queue.length)return;const e=this._queue;this._queue=[],yield this._sendEvents(e)}))}_quickFlushIfNeeded(){this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,Date.now()-this._creationTime>200||setTimeout((()=>f._safeFlushAndForget(this._sdkKey)),200))}_shouldLogEvent(e){if((0,l._isServerEnv)())return!1;if(!(0,c._isExposureEvent)(e))return!0;const t=e.user?e.user:{statsigEnvironment:void 0},i=(0,s._getUserStorageKey)(this._sdkKey,t),n=e.metadata?e.metadata:{},r=[e.eventName,i,n.gate,n.config,n.ruleID,n.allocatedExperiment,n.parameterName,String(n.isExplicitParameter),n.reason].join("|"),o=this._lastExposureTimeMap[r],a=Date.now();return!(o&&a-o<6e5||(Object.keys(this._lastExposureTimeMap).length>1e3&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[r]=a,0))}_sendEvents(e){var t,i;return n(this,void 0,void 0,(function*(){if(this._isLoggingDisabled)return this._saveFailedLogsToStorage(e),!1;try{const n=(0,h._isUnloading)()&&this._network.isBeaconSupported()&&null==(null===(i=null===(t=this._options)||void 0===t?void 0:t.networkConfig)||void 0===i?void 0:i.networkOverrideFunc);return this._emitter({name:"pre_logs_flushed",events:e}),(n?yield this._sendEventsViaBeacon(e):yield this._sendEventsViaPost(e)).success?(this._emitter({name:"logs_flushed",events:e}),!0):(o.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(e),!1)}catch(e){return o.Log.warn("Failed to flush events."),!1}}))}_sendEventsViaPost(e){var t;return n(this,void 0,void 0,(function*(){const i=yield this._network.post(this._getRequestData(e)),n=null!==(t=null==i?void 0:i.code)&&void 0!==t?t:-1;return{success:n>=200&&n<300}}))}_sendEventsViaBeacon(e){return n(this,void 0,void 0,(function*(){return{success:yield this._network.beacon(this._getRequestData(e))}}))}_getRequestData(e){return{sdkKey:this._sdkKey,data:{events:e},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:{[a.NetworkParam.EventCount]:String(e.length)}}}_saveFailedLogsToStorage(e){for(;e.length>500;)e.shift();const t=this._getStorageKey();try{(0,u._setObjectInStorage)(t,e)}catch(e){o.Log.warn("Unable to save failed logs to storage")}}_retryFailedLogs(e){const t=this._getStorageKey();(()=>n(this,void 0,void 0,(function*(){u.Storage.isReady()||(yield u.Storage.isReadyResolver());const i=(0,u._getObjectFromStorage)(t);i&&(e===m&&u.Storage.removeItem(t),(yield this._sendEvents(i))&&e===g&&u.Storage.removeItem(t))})))().catch((()=>{o.Log.warn("Failed to flush stored logs")}))}_getStorageKey(){return`statsig.failed_logs.${(0,r._DJB2)(this._sdkKey)}`}_normalizeAndAppendEvent(e){e.user&&(e.user=Object.assign({},e.user),delete e.user.privateAttributes);const t={},i=this._getCurrentPageUrl();i&&(t.statsigMetadata={currentPage:i});const n=Object.assign(Object.assign({},e),t);o.Log.debug("Enqueued Event:",n),this._queue.push(n)}_appendAndResetNonExposedChecks(){0!==Object.keys(this._nonExposedChecks).length&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}_getCurrentPageUrl(){var e;if(!1!==(null===(e=this._options)||void 0===e?void 0:e.includeCurrentPageUrlWithEvents))return(0,l._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var e,t;const i=null!==(t=null===(e=this._options)||void 0===e?void 0:e.loggingIntervalMs)&&void 0!==t?t:1e4,n=setInterval((()=>{const e=p[this._sdkKey];e&&e._flushIntervalId===n?f._safeFlushAndForget(this._sdkKey):clearInterval(n)}),i);this._flushIntervalId=n}}t.EventLogger=f},"./node_modules/@statsig/client-core/src/Hashing.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getSortedObject=t._DJB2Object=t._DJB2=void 0;const n=i("./node_modules/@statsig/client-core/src/TypingUtils.js");t._DJB2=e=>{let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return String(t>>>0)},t._DJB2Object=(e,i)=>(0,t._DJB2)(JSON.stringify((0,t._getSortedObject)(e,i))),t._getSortedObject=(e,i)=>{if(null==e)return null;const s=Object.keys(e).sort(),r={};return s.forEach((s=>{const o=e[s];0!==i&&"object"===(0,n._typeOf)(o)?r[s]=(0,t._getSortedObject)(o,null!=i?i-1:i):r[s]=o})),r}},"./node_modules/@statsig/client-core/src/InitializeResponse.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/Log.js":(e,t)=>{function i(e){return e.unshift("[Statsig]"),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Log=t.LogLevel=void 0,t.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};class n{static info(...e){n.level>=t.LogLevel.Info&&console.info("  INFO ",...i(e))}static debug(...e){n.level>=t.LogLevel.Debug&&console.debug(" DEBUG ",...i(e))}static warn(...e){n.level>=t.LogLevel.Warn&&console.warn("  WARN ",...i(e))}static error(...e){n.level>=t.LogLevel.Error&&console.error(" ERROR ",...i(e))}}t.Log=n,n.level=t.LogLevel.Warn},"./node_modules/@statsig/client-core/src/MemoKey.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createMemoKey=t.MemoPrefix=void 0,t.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_layer:"l",_paramStore:"p"};const i=new Set([]),n=new Set(["userPersistedValues"]);t.createMemoKey=function(e,t,s){let r=`${e}|${t}`;if(!s)return r;for(const e of Object.keys(s)){if(n.has(e))return;i.has(e)?r+=`|${e}=true`:r+=`|${e}=${s[e]}`}return r}},"./node_modules/@statsig/client-core/src/NetworkConfig.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkParam=t.NetworkDefault=t.Endpoint=void 0,t.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},t.NetworkDefault={[t.Endpoint._rgstr]:"https://prodregistryv2.org/v1",[t.Endpoint._initialize]:"https://featureassets.org/v1",[t.Endpoint._download_config_specs]:"https://api.statsigcdn.com/v1"},t.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}},"./node_modules/@statsig/client-core/src/NetworkCore.js":function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkCore=void 0,i("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js");const s=i("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),r=i("./node_modules/@statsig/client-core/src/Diagnostics.js"),o=i("./node_modules/@statsig/client-core/src/Log.js"),a=i("./node_modules/@statsig/client-core/src/NetworkConfig.js"),l=i("./node_modules/@statsig/client-core/src/NetworkFallbackResolver.js"),c=i("./node_modules/@statsig/client-core/src/SDKType.js"),u=i("./node_modules/@statsig/client-core/src/SafeJs.js"),d=i("./node_modules/@statsig/client-core/src/SessionID.js"),h=i("./node_modules/@statsig/client-core/src/StableID.js"),p=i("./node_modules/@statsig/client-core/src/StatsigClientEventEmitter.js"),m=i("./node_modules/@statsig/client-core/src/StatsigMetadata.js"),g=i("./node_modules/@statsig/client-core/src/VisibilityObserving.js"),f=new Set([408,500,502,503,504,522,524,599]);t.NetworkCore=class{constructor(e,t){this._emitter=t,this._errorBoundary=null,this._timeout=1e4,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,e&&(this._options=e),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new l.NetworkFallbackResolver(this._options)}setErrorBoundary(e){this._errorBoundary=e,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(e)}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}getLastUsedInitUrlAndReset(){const e=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,e}beacon(e){return n(this,void 0,void 0,(function*(){if(!v(e))return!1;const t=this._getInternalRequestArgs("POST",e),i=yield this._getPopulatedBody(t,e.data),n=yield this._getPopulatedURL(t),s=navigator;return s.sendBeacon.bind(s)(n,i)}))}post(e){return n(this,void 0,void 0,(function*(){const t=this._getInternalRequestArgs("POST",e);return t.body=yield this._getPopulatedBody(t,e.data),e.isStatsigEncodable&&(t.body=this._attemptToEncodeString(t,t.body)),this._sendRequest(t)}))}get(e){const t=this._getInternalRequestArgs("GET",e);return this._sendRequest(t)}_sendRequest(e){var t,i,s,l;return n(this,void 0,void 0,(function*(){if(!v(e))return null;if(this._netConfig.preventAllNetworkTraffic)return null;const{method:c,body:u,retries:d,attempt:h}=e,m=e.urlConfig.endpoint;if(this._isRateLimited(m))return o.Log.warn(`Request to ${m} was blocked because you are making requests too frequently.`),null;const y=null!=h?h:1,_="undefined"!=typeof AbortController?new AbortController:null,w=setTimeout((()=>{null==_||_.abort(`Timeout of ${this._timeout}ms expired.`)}),this._timeout),S=yield this._getPopulatedURL(e);let E=null;const T=(0,g._isUnloading)();try{const i={method:c,body:u,headers:Object.assign({},e.headers),signal:null==_?void 0:_.signal,priority:e.priority,keepalive:T};!function(e,t){e.urlConfig.endpoint===a.Endpoint._initialize&&r.Diagnostics._markInitNetworkReqStart(e.sdkKey,{attempt:t})}(e,y);const n=this._leakyBucket[m];n&&(n.lastRequestTime=Date.now(),this._leakyBucket[m]=n);const s=null!==(t=this._netConfig.networkOverrideFunc)&&void 0!==t?t:fetch;if(E=yield s(S,i),clearTimeout(w),!E.ok){const e=yield E.text().catch((()=>"No Text")),t=new Error(`NetworkError: ${S} ${e}`);throw t.name="NetworkError",t}const o=yield E.text();return b(e,E,y,o),this._fallbackResolver.tryBumpExpiryTime(e.sdkKey,e.urlConfig),{body:o,code:E.status}}catch(t){const r=function(e,t){return(null==e?void 0:e.signal.aborted)&&"string"==typeof e.signal.reason?e.signal.reason:"string"==typeof t?t:t instanceof Error?`${t.name}: ${t.message}`:"Unknown Error"}(_,t),a=(null==(x=_)?void 0:x.signal.aborted)&&"string"==typeof x.signal.reason&&x.signal.reason.includes("Timeout")||!1;if(b(e,E,y,"",t),(yield this._fallbackResolver.tryFetchUpdatedFallbackInfo(e.sdkKey,e.urlConfig,r,a))&&(e.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(e.sdkKey,e.urlConfig)),!d||y>d||!f.has(null!==(i=null==E?void 0:E.status)&&void 0!==i?i:500)){null===(s=this._emitter)||void 0===s||s.call(this,{name:"error",error:t,tag:p.ErrorTag.NetworkError,requestArgs:e});const i=`A networking error occurred during ${c} request to ${S}.`;return o.Log.error(i,r,t),null===(l=this._errorBoundary)||void 0===l||l.attachErrorIfNoneExists(i),null}return yield function(e){return n(this,void 0,void 0,(function*(){yield new Promise((t=>setTimeout(t,Math.min(e*e*500,3e4))))}))}(y),this._sendRequest(Object.assign(Object.assign({},e),{retries:d,attempt:y+1}))}var x}))}_isRateLimited(e){var t;const i=Date.now(),n=null!==(t=this._leakyBucket[e])&&void 0!==t?t:{count:0,lastRequestTime:i},s=i-n.lastRequestTime,r=Math.floor(.05*s);return n.count=Math.max(0,n.count-r),n.count>=50||(n.count+=1,n.lastRequestTime=i,this._leakyBucket[e]=n,!1)}_getPopulatedURL(e){var t;return n(this,void 0,void 0,(function*(){const i=null!==(t=e.fallbackUrl)&&void 0!==t?t:e.urlConfig.getUrl();e.urlConfig.endpoint!==a.Endpoint._initialize&&e.urlConfig.endpoint!==a.Endpoint._download_config_specs||(this._lastUsedInitUrl=i);const n=Object.assign({[a.NetworkParam.SdkKey]:e.sdkKey,[a.NetworkParam.SdkType]:c.SDKType._get(e.sdkKey),[a.NetworkParam.SdkVersion]:m.SDK_VERSION,[a.NetworkParam.Time]:String(Date.now()),[a.NetworkParam.SessionID]:d.SessionID.get(e.sdkKey)},e.params),s=Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");return`${i}${s?`?${s}`:""}`}))}_getPopulatedBody(e,t){return n(this,void 0,void 0,(function*(){const{sdkKey:i,fallbackUrl:n}=e,s=h.StableID.get(i),r=d.SessionID.get(i),o=c.SDKType._get(i);return JSON.stringify(Object.assign(Object.assign({},t),{statsigMetadata:Object.assign(Object.assign({},m.StatsigMetadataProvider.get()),{stableID:s,sessionID:r,sdkType:o,fallbackUrl:n})}))}))}_attemptToEncodeString(e,t){var i,n;const r=(0,u._getWindowSafe)();if(this._options.disableStatsigEncoding||null!=(0,s._getStatsigGlobalFlag)("no-encode")||!(null==r?void 0:r.btoa))return t;try{const s=null!==(i=r.btoa(t).split("").reverse().join(""))&&void 0!==i?i:t;return e.params=Object.assign(Object.assign({},null!==(n=e.params)&&void 0!==n?n:{}),{[a.NetworkParam.StatsigEncoded]:"1"}),s}catch(i){return o.Log.warn(`Request encoding failed for ${e.urlConfig.getUrl()}`),t}}_getInternalRequestArgs(e,t){const i=this._fallbackResolver.getActiveFallbackUrl(t.sdkKey,t.urlConfig);return Object.assign(Object.assign({},t),{method:e,fallbackUrl:i})}};const v=e=>!!e.sdkKey||(o.Log.warn("Unable to make request without an SDK key"),!1);function b(e,t,i,n,s){e.urlConfig.endpoint===a.Endpoint._initialize&&r.Diagnostics._markInitNetworkReqEnd(e.sdkKey,r.Diagnostics._getDiagnosticsData(t,i,n,s))}},"./node_modules/@statsig/client-core/src/NetworkFallbackResolver.js":function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t._isDomainFailure=t.NetworkFallbackResolver=void 0;const s=i("./node_modules/@statsig/client-core/src/DnsTxtQuery.js"),r=i("./node_modules/@statsig/client-core/src/Hashing.js"),o=i("./node_modules/@statsig/client-core/src/Log.js"),a=i("./node_modules/@statsig/client-core/src/StorageProvider.js"),l=6048e5;function c(e,t){var i;const n=null!==(i=null==e?void 0:e.toLowerCase())&&void 0!==i?i:"";return t||n.includes("uncaught exception")||n.includes("failed to fetch")||n.includes("networkerror when attempting to fetch resource")}function u(e){return`statsig.network_fallback.${(0,r._DJB2)(e)}`}function d(e,t){const i=u(e);t&&0!==Object.keys(t).length?a.Storage.setItem(i,JSON.stringify(t)):a.Storage.removeItem(i)}function h(e){try{return new URL(e).pathname}catch(e){return null}}t.NetworkFallbackResolver=class{constructor(e){var t;this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=null===(t=e.networkConfig)||void 0===t?void 0:t.networkOverrideFunc}setErrorBoundary(e){this._errorBoundary=e}tryBumpExpiryTime(e,t){var i;const n=null===(i=this._fallbackInfo)||void 0===i?void 0:i[t.endpoint];n&&(n.expiryTime=Date.now()+l,d(e,Object.assign(Object.assign({},this._fallbackInfo),{[t.endpoint]:n})))}getActiveFallbackUrl(e,t){var i,n;let s=this._fallbackInfo;null==s&&(s=null!==(i=function(e){const t=u(e),i=a.Storage.getItem(t);if(!i)return null;try{return JSON.parse(i)}catch(e){return o.Log.error("Failed to parse FallbackInfo"),null}}(e))&&void 0!==i?i:{},this._fallbackInfo=s);const r=s[t.endpoint];return!r||Date.now()>(null!==(n=r.expiryTime)&&void 0!==n?n:0)?(delete s[t.endpoint],this._fallbackInfo=s,d(e,this._fallbackInfo),null):r.url?r.url:null}getFallbackFromProvided(e){const t=h(e);return t?e.replace(t,""):null}tryFetchUpdatedFallbackInfo(e,t,i,s){var r,o;return n(this,void 0,void 0,(function*(){try{if(!c(i,s))return!1;const n=null==t.customUrl&&null==t.fallbackUrls?yield this._tryFetchFallbackUrlsFromNetwork(t):t.fallbackUrls,o=this._pickNewFallbackUrl(null===(r=this._fallbackInfo)||void 0===r?void 0:r[t.endpoint],n);return!!o&&(this._updateFallbackInfoWithNewUrl(e,t.endpoint,o),!0)}catch(e){return null===(o=this._errorBoundary)||void 0===o||o.logError("tryFetchUpdatedFallbackInfo",e),!1}}))}_updateFallbackInfoWithNewUrl(e,t,i){var n,s,r;const o={url:i,expiryTime:Date.now()+l,previous:[]},a=null===(n=this._fallbackInfo)||void 0===n?void 0:n[t];a&&o.previous.push(...a.previous),o.previous.length>10&&(o.previous=[]);const c=null===(r=null===(s=this._fallbackInfo)||void 0===s?void 0:s[t])||void 0===r?void 0:r.url;null!=c&&o.previous.push(c),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),{[t]:o}),d(e,this._fallbackInfo)}_tryFetchFallbackUrlsFromNetwork(e){var t;return n(this,void 0,void 0,(function*(){const i=this._dnsQueryCooldowns[e.endpoint];if(i&&Date.now()<i)return null;this._dnsQueryCooldowns[e.endpoint]=Date.now()+144e5;const n=[],r=yield(0,s._fetchTxtRecords)(null!==(t=this._networkOverrideFunc)&&void 0!==t?t:fetch),o=h(e.defaultUrl);for(const t of r){if(!t.startsWith(e.endpointDnsKey+"="))continue;const i=t.split("=");if(i.length>1){let e=i[1];e.endsWith("/")&&(e=e.slice(0,-1)),n.push(`https://${e}${o}`)}}return n}))}_pickNewFallbackUrl(e,t){var i;if(null==t)return null;const n=new Set(null!==(i=null==e?void 0:e.previous)&&void 0!==i?i:[]),s=null==e?void 0:e.url;let r=null;for(const e of t){const t=e.endsWith("/")?e.slice(0,-1):e;if(!n.has(e)&&t!==s){r=t;break}}return r}},t._isDomainFailure=c},"./node_modules/@statsig/client-core/src/OverrideAdapter.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/ParamStoreTypes.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/SDKFlags.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDKFlags=void 0;const i={};t.SDKFlags={setFlags:(e,t)=>{i[e]=t},get:(e,t)=>{var n,s;return null!==(s=null===(n=i[e])||void 0===n?void 0:n[t])&&void 0!==s&&s}}},"./node_modules/@statsig/client-core/src/SDKType.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDKType=void 0;const i={};let n;t.SDKType={_get:e=>{var t;return(null!==(t=i[e])&&void 0!==t?t:"js-mono")+(null!=n?n:"")},_setClientType(e,t){i[e]=t},_setBindingType(e){n&&"-react"!==n||(n="-"+e)}}},"./node_modules/@statsig/client-core/src/SafeJs.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getCurrentPageUrlSafe=t._addDocumentEventListenerSafe=t._addWindowEventListenerSafe=t._isServerEnv=t._getDocumentSafe=t._getWindowSafe=void 0,t._getWindowSafe=()=>"undefined"!=typeof window?window:null,t._getDocumentSafe=()=>{var e;const i=(0,t._getWindowSafe)();return null!==(e=null==i?void 0:i.document)&&void 0!==e?e:null},t._isServerEnv=()=>{if(null!==(0,t._getDocumentSafe)())return!1;const e="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;return"string"==typeof EdgeRuntime||e},t._addWindowEventListenerSafe=(e,i)=>{const n=(0,t._getWindowSafe)();"function"==typeof(null==n?void 0:n.addEventListener)&&n.addEventListener(e,i)},t._addDocumentEventListenerSafe=(e,i)=>{const n=(0,t._getDocumentSafe)();"function"==typeof(null==n?void 0:n.addEventListener)&&n.addEventListener(e,i)},t._getCurrentPageUrlSafe=()=>{var e;try{return null===(e=(0,t._getWindowSafe)())||void 0===e?void 0:e.location.href.split(/[?#]/)[0]}catch(e){return}}},"./node_modules/@statsig/client-core/src/SessionID.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigSession=t.SessionID=void 0;const n=i("./node_modules/@statsig/client-core/src/CacheKey.js"),s=i("./node_modules/@statsig/client-core/src/Log.js"),r=i("./node_modules/@statsig/client-core/src/StorageProvider.js"),o=i("./node_modules/@statsig/client-core/src/UUID.js"),a=18e5,l=144e5,c={};function u(e,t){return setTimeout((()=>{const t=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(e);t&&t.$emt({name:"session_expired"})}),t)}function d(e){return`statsig.session_id.${(0,n._getStorageKey)(e)}`}t.SessionID={get:e=>t.StatsigSession.get(e).data.sessionID},t.StatsigSession={get:e=>(null==c[e]&&(c[e]=function(e){let t=function(e){const t=d(e);return(0,r._getObjectFromStorage)(t)}(e);const i=Date.now();return t||(t={sessionID:(0,o.getUUID)(),startTime:i,lastUpdate:i}),{data:t,sdkKey:e}}(e)),function(e){const t=Date.now(),i=e.data;(function({lastUpdate:e}){return Date.now()-e>a}(i)||function({startTime:e}){return Date.now()-e>l}(i))&&(i.sessionID=(0,o.getUUID)(),i.startTime=t),i.lastUpdate=t,function(e,t){const i=d(t);try{(0,r._setObjectInStorage)(i,e)}catch(e){s.Log.warn("Failed to save SessionID")}}(i,e.sdkKey),clearTimeout(e.idleTimeoutID),clearTimeout(e.ageTimeoutID);const n=t-i.startTime,c=e.sdkKey;return e.idleTimeoutID=u(c,a),e.ageTimeoutID=u(c,l-n),e}(c[e])),overrideInitialSessionID:(e,t)=>{c[t]=function(e,t){const i=Date.now();return{data:{sessionID:e,startTime:i,lastUpdate:i},sdkKey:t}}(e,t)}}},"./node_modules/@statsig/client-core/src/StableID.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StableID=void 0;const n=i("./node_modules/@statsig/client-core/src/CacheKey.js"),s=i("./node_modules/@statsig/client-core/src/Log.js"),r=i("./node_modules/@statsig/client-core/src/StorageProvider.js"),o=i("./node_modules/@statsig/client-core/src/UUID.js"),a={};function l(e){return`statsig.stable_id.${(0,n._getStorageKey)(e)}`}function c(e,t){const i=l(t);try{(0,r._setObjectInStorage)(i,e)}catch(e){s.Log.warn("Failed to save StableID")}}t.StableID={get:e=>{if(null==a[e]){let t=function(e){const t=l(e);return(0,r._getObjectFromStorage)(t)}(e);null==t&&(t=(0,o.getUUID)(),c(t,e)),a[e]=t}return a[e]},setOverride:(e,t)=>{a[t]=e,c(e,t)}}},"./node_modules/@statsig/client-core/src/StatsigClientBase.js":function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClientBase=void 0,i("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js");const s=i("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),r=i("./node_modules/@statsig/client-core/src/ErrorBoundary.js"),o=i("./node_modules/@statsig/client-core/src/EventLogger.js"),a=i("./node_modules/@statsig/client-core/src/Log.js"),l=i("./node_modules/@statsig/client-core/src/MemoKey.js"),c=i("./node_modules/@statsig/client-core/src/SafeJs.js"),u=i("./node_modules/@statsig/client-core/src/SessionID.js"),d=i("./node_modules/@statsig/client-core/src/StorageProvider.js");t.StatsigClientBase=class{constructor(e,t,i,n){var l;this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};const h=this.$emt.bind(this);null!=(null==n?void 0:n.logLevel)&&(a.Log.level=n.logLevel),(null==n?void 0:n.disableStorage)&&d.Storage._setDisabled(!0),(null==n?void 0:n.initialSessionID)&&u.StatsigSession.overrideInitialSessionID(n.initialSessionID,e),(null==n?void 0:n.storageProvider)&&d.Storage._setProvider(n.storageProvider),this._sdkKey=e,this._options=null!=n?n:{},this._memoCache={},this.overrideAdapter=null!==(l=null==n?void 0:n.overrideAdapter)&&void 0!==l?l:null,this._logger=new o.EventLogger(e,h,i,n),this._errorBoundary=new r.ErrorBoundary(e,n,h),this._errorBoundary.wrap(this),this._errorBoundary.wrap(t),this._errorBoundary.wrap(this._logger),i.setErrorBoundary(this._errorBoundary),this.dataAdapter=t,this.dataAdapter.attach(e,n),this.storageProvider=d.Storage,this._primeReadyRipcord(),function(e,t){var i;if((0,c._isServerEnv)())return;const n=(0,s._getStatsigGlobal)(),r=null!==(i=n.instances)&&void 0!==i?i:{},o=t;null!=r[e]&&a.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys."),r[e]=o,n.firstInstance||(n.firstInstance=o),n.instances=r,__STATSIG__=n}(e,this)}updateRuntimeOptions(e){null!=e.disableLogging&&(this._options.disableLogging=e.disableLogging,this._logger.setLoggingDisabled(e.disableLogging)),null!=e.disableStorage&&(this._options.disableStorage=e.disableStorage,d.Storage._setDisabled(e.disableStorage))}flush(){return this._logger.flush()}shutdown(){return n(this,void 0,void 0,(function*(){this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,yield this._logger.stop()}))}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){if(this._listeners[e]){const i=this._listeners[e].indexOf(t);-1!==i&&this._listeners[e].splice(i,1)}}$on(e,t){t.__isInternal=!0,this.on(e,t)}$emt(e){var t;const i=t=>{try{t(e)}catch(i){if(!0===t.__isInternal)return void this._errorBoundary.logError(`__emit:${e.name}`,i);a.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",e)}};this._listeners[e.name]&&this._listeners[e.name].forEach((e=>i(e))),null===(t=this._listeners["*"])||void 0===t||t.forEach(i)}_setStatus(e,t){this.loadingStatus=e,this._memoCache={},this.$emt({name:"values_updated",status:e,values:t})}_enqueueExposure(e,t,i){!0!==(null==i?void 0:i.disableExposureLog)?this._logger.enqueue(t):this._logger.incrementNonExposureCount(e)}_memoize(e,t){return(i,n)=>{if(this._options.disableEvaluationMemoization)return t(i,n);const s=(0,l.createMemoKey)(e,i,n);return s?(s in this._memoCache||(Object.keys(this._memoCache).length>=3e3&&(this._memoCache={}),this._memoCache[s]=t(i,n)),this._memoCache[s]):t(i,n)}}}},"./node_modules/@statsig/client-core/src/StatsigClientEventEmitter.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTag=void 0,t.ErrorTag={NetworkError:"NetworkError"}},"./node_modules/@statsig/client-core/src/StatsigDataAdapter.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataAdapterCachePrefix=void 0,t.DataAdapterCachePrefix="statsig.cached"},"./node_modules/@statsig/client-core/src/StatsigEvent.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._createLayerParameterExposure=t._createConfigExposure=t._createGateExposure=t._isExposureEvent=void 0;const i="statsig::config_exposure",n="statsig::gate_exposure",s="statsig::layer_exposure",r=(e,t,i,n,s)=>(i.bootstrapMetadata&&(n.bootstrapMetadata=i.bootstrapMetadata),{eventName:e,user:t,value:null,metadata:o(i,n),secondaryExposures:s,time:Date.now()});t._isExposureEvent=({eventName:e})=>e===n||e===i||e===s,t._createGateExposure=(e,t)=>{var i,s,o;const a={gate:t.name,gateValue:String(t.value),ruleID:t.ruleID};return null!=(null===(i=t.__evaluation)||void 0===i?void 0:i.version)&&(a.configVersion=t.__evaluation.version),r(n,e,t.details,a,null!==(o=null===(s=t.__evaluation)||void 0===s?void 0:s.secondary_exposures)&&void 0!==o?o:[])},t._createConfigExposure=(e,t)=>{var n,s,o,a;const l={config:t.name,ruleID:t.ruleID};return null!=(null===(n=t.__evaluation)||void 0===n?void 0:n.version)&&(l.configVersion=t.__evaluation.version),null!=(null===(s=t.__evaluation)||void 0===s?void 0:s.passed)&&(l.rulePassed=String(t.__evaluation.passed)),r(i,e,t.details,l,null!==(a=null===(o=t.__evaluation)||void 0===o?void 0:o.secondary_exposures)&&void 0!==a?a:[])},t._createLayerParameterExposure=(e,t,i)=>{var n,o,a,l;const c=t.__evaluation,u=!0===(null===(n=null==c?void 0:c.explicit_parameters)||void 0===n?void 0:n.includes(i));let d="",h=null!==(o=null==c?void 0:c.undelegated_secondary_exposures)&&void 0!==o?o:[];u&&(d=null!==(a=c.allocated_experiment_name)&&void 0!==a?a:"",h=c.secondary_exposures);const p={config:t.name,parameterName:i,ruleID:t.ruleID,allocatedExperiment:d,isExplicitParameter:String(u)};return null!=(null===(l=t.__evaluation)||void 0===l?void 0:l.version)&&(p.configVersion=t.__evaluation.version),r(s,e,t.details,p,h)};const o=(e,t)=>(t.reason=e.reason,e.lcut&&(t.lcut=String(e.lcut)),e.receivedAt&&(t.receivedAt=String(e.receivedAt)),t)},"./node_modules/@statsig/client-core/src/StatsigMetadata.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigMetadataProvider=t.SDK_VERSION=void 0,t.SDK_VERSION="3.12.0";let i={sdkVersion:t.SDK_VERSION,sdkType:"js-mono"};t.StatsigMetadataProvider={get:()=>i,add:e=>{i=Object.assign(Object.assign({},i),e)}}},"./node_modules/@statsig/client-core/src/StatsigOptionsCommon.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/StatsigPlugin.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/StatsigTypeFactories.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._makeTypedGet=t._mergeOverride=t._makeLayer=t._makeExperiment=t._makeDynamicConfig=t._makeFeatureGate=void 0;const n=i("./node_modules/@statsig/client-core/src/Log.js"),s=i("./node_modules/@statsig/client-core/src/TypingUtils.js"),r="default";function o(e,t,i,n){var s;return{name:e,details:t,ruleID:null!==(s=null==i?void 0:i.rule_id)&&void 0!==s?s:r,__evaluation:i,value:n}}function a(e,t,i){var n;const s=null!==(n=null==i?void 0:i.value)&&void 0!==n?n:{};return Object.assign(Object.assign({},o(e,t,i,s)),{get:l(e,null==i?void 0:i.value)})}function l(e,t,i){return(r,o)=>{var a;const l=null!==(a=null==t?void 0:t[r])&&void 0!==a?a:null;return null==l?null!=o?o:null:null==o||(0,s._isTypeMatch)(l,o)?(null==i||i(r),l):(n.Log.warn(`Parameter type mismatch. '${e}.${r}' was found to be type '${typeof l}' but fallback/return type is '${typeof o}'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters`),null!=o?o:null)}}t._makeFeatureGate=function(e,t,i){return o(e,t,i,!0===(null==i?void 0:i.value))},t._makeDynamicConfig=a,t._makeExperiment=function(e,t,i){var n;const s=a(e,t,i);return Object.assign(Object.assign({},s),{groupName:null!==(n=null==i?void 0:i.group_name)&&void 0!==n?n:null})},t._makeLayer=function(e,t,i,n){var s,r;return Object.assign(Object.assign({},o(e,t,i,void 0)),{get:l(e,null==i?void 0:i.value,n),groupName:null!==(s=null==i?void 0:i.group_name)&&void 0!==s?s:null,__value:null!==(r=null==i?void 0:i.value)&&void 0!==r?r:{}})},t._mergeOverride=function(e,t,i,n){return Object.assign(Object.assign(Object.assign({},e),t),{get:l(e.name,i,n)})},t._makeTypedGet=l},"./node_modules/@statsig/client-core/src/StatsigTypes.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/StatsigUpdateDetails.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_DETAIL_ERROR_MESSAGES=t.createUpdateDetails=void 0,t.createUpdateDetails=(e,t,i,n,s,r)=>({duration:i,source:t,success:e,error:n,sourceUrl:s,warnings:r}),t.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."}},"./node_modules/@statsig/client-core/src/StatsigUser.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getFullUserHash=t._normalizeUser=void 0;const n=i("./node_modules/@statsig/client-core/src/Hashing.js"),s=i("./node_modules/@statsig/client-core/src/Log.js");t._normalizeUser=function(e,t,i){try{const n=JSON.parse(JSON.stringify(e));return null!=t&&null!=t.environment?n.statsigEnvironment=t.environment:null!=i&&(n.statsigEnvironment={tier:i}),n}catch(e){return s.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}},t._getFullUserHash=function(e){return e?(0,n._DJB2Object)(e):null}},"./node_modules/@statsig/client-core/src/StorageProvider.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._setObjectInStorage=t._getObjectFromStorage=t.Storage=void 0;const n=i("./node_modules/@statsig/client-core/src/Log.js"),s=i("./node_modules/@statsig/client-core/src/SafeJs.js"),r={},o={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:e=>r[e]?r[e]:null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]},getAllKeys:()=>Object.keys(r)};let a=null;try{const e=(0,s._getWindowSafe)();e&&e.localStorage&&"function"==typeof e.localStorage.getItem&&(a={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:t=>e.localStorage.getItem(t),setItem:(t,i)=>e.localStorage.setItem(t,i),removeItem:t=>e.localStorage.removeItem(t),getAllKeys:()=>Object.keys(e.localStorage)})}catch(e){n.Log.warn("Failed to setup localStorageProvider.")}let l=null!=a?a:o,c=l;t.Storage={isReady:()=>c.isReady(),isReadyResolver:()=>c.isReadyResolver(),getProviderName:()=>c.getProviderName(),getItem:e=>function(e){try{return e()}catch(e){if(e instanceof Error&&"SecurityError"===e.name)return t.Storage._setProvider(o),null;throw e}}((()=>c.getItem(e))),setItem:(e,t)=>c.setItem(e,t),removeItem:e=>c.removeItem(e),getAllKeys:()=>c.getAllKeys(),_setProvider:e=>{l=e,c=e},_setDisabled:e=>{c=e?o:l}},t._getObjectFromStorage=function(e){const i=t.Storage.getItem(e);return JSON.parse(null!=i?i:"null")},t._setObjectInStorage=function(e,i){t.Storage.setItem(e,JSON.stringify(i))}},"./node_modules/@statsig/client-core/src/TypedJsonParse.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._typedJsonParse=void 0;const n=i("./node_modules/@statsig/client-core/src/Log.js");t._typedJsonParse=function(e,t,i){try{const i=JSON.parse(e);if(i&&"object"==typeof i&&t in i)return i}catch(e){}return n.Log.error(`Failed to parse ${i}`),null}},"./node_modules/@statsig/client-core/src/TypingUtils.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._isTypeMatch=t._typeOf=void 0,t._typeOf=function(e){return Array.isArray(e)?"array":typeof e},t._isTypeMatch=function(e,t){const i=e=>Array.isArray(e)?"array":typeof e;return i(e)===i(t)}},"./node_modules/@statsig/client-core/src/UUID.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUUID=void 0,t.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(4*Math.random())]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,(i=>{let n=16*Math.random();return e>0?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(t+n)%16|0,t=Math.floor(t/16)),("x"===i?n:7&n|8).toString(16)}))}},"./node_modules/@statsig/client-core/src/UrlConfiguration.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UrlConfiguration=void 0;const n=i("./node_modules/@statsig/client-core/src/NetworkConfig.js"),s={[n.Endpoint._initialize]:"i",[n.Endpoint._rgstr]:"e",[n.Endpoint._download_config_specs]:"d"};t.UrlConfiguration=class{constructor(e,t,i,r){this.customUrl=null,this.fallbackUrls=null,this.endpoint=e,this.endpointDnsKey=s[e],t&&(this.customUrl=t),!t&&i&&(this.customUrl=i.endsWith("/")?`${i}${e}`:`${i}/${e}`),r&&(this.fallbackUrls=r);const o=n.NetworkDefault[e];this.defaultUrl=`${o}/${e}`}getUrl(){var e;return null!==(e=this.customUrl)&&void 0!==e?e:this.defaultUrl}}},"./node_modules/@statsig/client-core/src/VisibilityObserving.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._notifyVisibilityChanged=t._subscribeToVisiblityChanged=t._isUnloading=t._isCurrentlyVisible=void 0;const n=i("./node_modules/@statsig/client-core/src/SafeJs.js"),s="foreground",r="background",o=[];let a=s,l=!1;t._isCurrentlyVisible=()=>a===s,t._isUnloading=()=>l,t._subscribeToVisiblityChanged=e=>{o.unshift(e)},t._notifyVisibilityChanged=e=>{e!==a&&(a=e,o.forEach((t=>t(e))))},(0,n._addWindowEventListenerSafe)("focus",(()=>{l=!1,(0,t._notifyVisibilityChanged)(s)})),(0,n._addWindowEventListenerSafe)("blur",(()=>(0,t._notifyVisibilityChanged)(r))),(0,n._addWindowEventListenerSafe)("beforeunload",(()=>{l=!0,(0,t._notifyVisibilityChanged)(r)})),(0,n._addDocumentEventListenerSafe)("visibilitychange",(()=>{(0,t._notifyVisibilityChanged)("visible"===document.visibilityState?s:r)}))},"./node_modules/@statsig/client-core/src/index.js":function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.Log=t.EventLogger=t.Diagnostics=void 0,i("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js");const r=i("./node_modules/@statsig/client-core/src/Diagnostics.js");Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return r.Diagnostics}});const o=i("./node_modules/@statsig/client-core/src/EventLogger.js");Object.defineProperty(t,"EventLogger",{enumerable:!0,get:function(){return o.EventLogger}});const a=i("./node_modules/@statsig/client-core/src/Log.js");Object.defineProperty(t,"Log",{enumerable:!0,get:function(){return a.Log}});const l=i("./node_modules/@statsig/client-core/src/StatsigMetadata.js"),c=i("./node_modules/@statsig/client-core/src/StorageProvider.js");Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return c.Storage}}),s(i("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),t),s(i("./node_modules/@statsig/client-core/src/CacheKey.js"),t),s(i("./node_modules/@statsig/client-core/src/ClientInterfaces.js"),t),s(i("./node_modules/@statsig/client-core/src/DataAdapterCore.js"),t),s(i("./node_modules/@statsig/client-core/src/Diagnostics.js"),t),s(i("./node_modules/@statsig/client-core/src/DownloadConfigSpecsResponse.js"),t),s(i("./node_modules/@statsig/client-core/src/ErrorBoundary.js"),t),s(i("./node_modules/@statsig/client-core/src/EvaluationOptions.js"),t),s(i("./node_modules/@statsig/client-core/src/EvaluationTypes.js"),t),s(i("./node_modules/@statsig/client-core/src/Hashing.js"),t),s(i("./node_modules/@statsig/client-core/src/InitializeResponse.js"),t),s(i("./node_modules/@statsig/client-core/src/Log.js"),t),s(i("./node_modules/@statsig/client-core/src/MemoKey.js"),t),s(i("./node_modules/@statsig/client-core/src/NetworkConfig.js"),t),s(i("./node_modules/@statsig/client-core/src/NetworkCore.js"),t),s(i("./node_modules/@statsig/client-core/src/OverrideAdapter.js"),t),s(i("./node_modules/@statsig/client-core/src/ParamStoreTypes.js"),t),s(i("./node_modules/@statsig/client-core/src/SafeJs.js"),t),s(i("./node_modules/@statsig/client-core/src/SDKType.js"),t),s(i("./node_modules/@statsig/client-core/src/SessionID.js"),t),s(i("./node_modules/@statsig/client-core/src/StableID.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigClientBase.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigClientEventEmitter.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigDataAdapter.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigEvent.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigMetadata.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigOptionsCommon.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigPlugin.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigTypeFactories.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigTypes.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigUser.js"),t),s(i("./node_modules/@statsig/client-core/src/StorageProvider.js"),t),s(i("./node_modules/@statsig/client-core/src/TypedJsonParse.js"),t),s(i("./node_modules/@statsig/client-core/src/TypingUtils.js"),t),s(i("./node_modules/@statsig/client-core/src/UrlConfiguration.js"),t),s(i("./node_modules/@statsig/client-core/src/UUID.js"),t),s(i("./node_modules/@statsig/client-core/src/VisibilityObserving.js"),t),s(i("./node_modules/@statsig/client-core/src/StatsigUpdateDetails.js"),t),s(i("./node_modules/@statsig/client-core/src/SDKFlags.js"),t),__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{Log:a.Log,SDK_VERSION:l.SDK_VERSION})},"./node_modules/@statsig/js-client/src/EvaluationResponseDeltas.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._resolveDeltasResponse=void 0;const n=i("./node_modules/@statsig/client-core/src/index.js");function s(e,t){null==e||e.forEach((e=>{delete t[e]}))}t._resolveDeltasResponse=function(e,t){const i=(0,n._typedJsonParse)(t,"checksum","DeltasEvaluationResponse");if(!i)return{hadBadDeltaChecksum:!0};const r=function(e){const t=e;return s(e.deleted_gates,t.feature_gates),delete t.deleted_gates,s(e.deleted_configs,t.dynamic_configs),delete t.deleted_configs,s(e.deleted_layers,t.layer_configs),delete t.deleted_layers,t}(function(e,t){return Object.assign(Object.assign(Object.assign({},e),t),{feature_gates:Object.assign(Object.assign({},e.feature_gates),t.feature_gates),layer_configs:Object.assign(Object.assign({},e.layer_configs),t.layer_configs),dynamic_configs:Object.assign(Object.assign({},e.dynamic_configs),t.dynamic_configs)})}(e,i)),o=(0,n._DJB2Object)({feature_gates:r.feature_gates,dynamic_configs:r.dynamic_configs,layer_configs:r.layer_configs},2);return o===i.checksumV2?JSON.stringify(r):{hadBadDeltaChecksum:!0,badChecksum:o,badMergedConfigs:r,badFullResponse:i.deltas_full_response}}},"./node_modules/@statsig/js-client/src/EvaluationStore.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i("./node_modules/@statsig/client-core/src/index.js");t.default=class{constructor(e){this._sdkKey=e,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,n._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(e,t){if(!e)return!1;const i=(0,n._typedJsonParse)(e.data,"has_updates","EvaluationResponse");return null!=i&&(this._source=e.source,!0!==(null==i?void 0:i.has_updates)||(this._rawValues=e.data,this._lcut=i.time,this._receivedAt=e.receivedAt,this._values=i,this._bootstrapMetadata=this._extractBootstrapMetadata(e.source,i),e.source&&i.user&&this._setWarningState(t,i),i.sdk_flags?n.SDKFlags.setFlags(this._sdkKey,i.sdk_flags):n.SDKFlags.setFlags(this._sdkKey,{})),!0)}getWarnings(){if(0!==this._warnings.size)return Array.from(this._warnings)}getGate(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.feature_gates,e)}getConfig(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.dynamic_configs,e)}getLayer(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.layer_configs,e)}getParamStore(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.param_stores,e)}getSource(){return this._source}_extractBootstrapMetadata(e,t){if("Bootstrap"!==e)return null;const i={};return t.user&&(i.user=t.user),t.sdkInfo&&(i.generatorSDKInfo=t.sdkInfo),i.lcut=t.time,i}_getDetailedStoreResult(e,t){let i=null;return e&&(i=e[t]?e[t]:e[(0,n._DJB2)(t)]),{result:i,details:this._getDetails(null==i)}}_setWarningState(e,t){var i;const s=n.StableID.get(this._sdkKey);if((null===(i=e.customIDs)||void 0===i?void 0:i.stableID)===s){if("user"in t){const i=t.user;(0,n._getFullUserHash)(e)!==(0,n._getFullUserHash)(i)&&this._warnings.add("PartialUserMatch")}}else this._warnings.add("StableIDMismatch")}getCurrentSourceDetails(){if("Uninitialized"===this._source||"NoValues"===this._source)return{reason:this._source};const e={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(e.warnings=Array.from(this._warnings)),e}_getDetails(e){var t,i;const n=this.getCurrentSourceDetails();let s=n.reason;const r=null!==(t=n.warnings)&&void 0!==t?t:[];"Bootstrap"===this._source&&r.length>0&&(s+=r[0]),"Uninitialized"!==s&&"NoValues"!==s&&(s=`${s}:${e?"Unrecognized":"Recognized"}`);const o="Bootstrap"===this._source&&null!==(i=this._bootstrapMetadata)&&void 0!==i?i:void 0;return o&&(n.bootstrapMetadata=o),Object.assign(Object.assign({},n),{reason:s})}}},"./node_modules/@statsig/js-client/src/Network.js":function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("./node_modules/@statsig/client-core/src/index.js"),r=i("./node_modules/@statsig/js-client/src/EvaluationResponseDeltas.js");class o extends s.NetworkCore{constructor(e,t){super(e,t);const i=null==e?void 0:e.networkConfig;this._initializeUrlConfig=new s.UrlConfiguration(s.Endpoint._initialize,null==i?void 0:i.initializeUrl,null==i?void 0:i.api,null==i?void 0:i.initializeFallbackUrls)}fetchEvaluations(e,t,i,r){return n(this,void 0,void 0,(function*(){const n=t?(0,s._typedJsonParse)(t,"has_updates","InitializeResponse"):null;let o={user:r,hash:"djb2",deltasResponseRequested:!1,full_checksum:null};return(null==n?void 0:n.has_updates)&&(o=Object.assign(Object.assign({},o),{sinceTime:n.time,previousDerivedFields:"derived_fields"in n?n.derived_fields:{},deltasResponseRequested:!0,full_checksum:n.full_checksum})),this._fetchEvaluations(e,n,o,i)}))}_fetchEvaluations(e,t,i,s){var o,a;return n(this,void 0,void 0,(function*(){const n=yield this.post({sdkKey:e,urlConfig:this._initializeUrlConfig,data:i,retries:2,isStatsigEncodable:!0,priority:s});if(204===(null==n?void 0:n.code))return'{"has_updates": false}';if(200!==(null==n?void 0:n.code))return null!==(o=null==n?void 0:n.body)&&void 0!==o?o:null;if(!0!==(null==t?void 0:t.has_updates)||!0!==(null===(a=n.body)||void 0===a?void 0:a.includes('"is_delta":true'))||!0!==i.deltasResponseRequested)return n.body;const l=(0,r._resolveDeltasResponse)(t,n.body);return"string"==typeof l?l:this._fetchEvaluations(e,t,Object.assign(Object.assign(Object.assign({},i),l),{deltasResponseRequested:!1}),s)}))}}t.default=o},"./node_modules/@statsig/js-client/src/ParamStoreGetterFactory.js":(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._makeParamStoreGetter=void 0;const n=i("./node_modules/@statsig/client-core/src/index.js"),s={disableExposureLog:!0};function r(e){return null==e||!1===e.disableExposureLog}function o(e,t){return null!=t&&!(0,n._isTypeMatch)(e,t)}t._makeParamStoreGetter=function(e,t,i){return(a,l)=>{if(null==t)return l;const c=t[a];if(null==c||null!=l&&(0,n._typeOf)(l)!==c.param_type)return l;switch(c.ref_type){case"static":return function(e,t){return e.value}(c);case"gate":return function(e,t,i){return e.getFeatureGate(t.gate_name,r(i)?void 0:s).value?t.pass_value:t.fail_value}(e,c,i);case"dynamic_config":return function(e,t,i,n){const a=e.getDynamicConfig(t.config_name,s).get(t.param_name);return o(a,i)?i:(r(n)&&e.getDynamicConfig(t.config_name),a)}(e,c,l,i);case"experiment":return function(e,t,i,n){const a=e.getExperiment(t.experiment_name,s).get(t.param_name);return o(a,i)?i:(r(n)&&e.getExperiment(t.experiment_name),a)}(e,c,l,i);case"layer":return function(e,t,i,n){const a=e.getLayer(t.layer_name,s).get(t.param_name);return o(a,i)?i:(r(n)&&e.getLayer(t.layer_name).get(t.param_name),a)}(e,c,l,i);default:return l}}}},"./node_modules/@statsig/js-client/src/StatsigClient.js":function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("./node_modules/@statsig/client-core/src/index.js"),r=i("./node_modules/@statsig/js-client/src/EvaluationStore.js"),o=i("./node_modules/@statsig/js-client/src/Network.js"),a=i("./node_modules/@statsig/js-client/src/ParamStoreGetterFactory.js"),l=i("./node_modules/@statsig/js-client/src/StatsigEvaluationsDataAdapter.js");class c extends s.StatsigClientBase{static instance(e){const t=(0,s._getStatsigGlobal)().instance(e);return t instanceof c?t:(s.Log.warn((0,s._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new c(null!=e?e:"",{}))}constructor(e,t,i=null){var n,a;s.SDKType._setClientType(e,"javascript-client");const c=new o.default(i,(e=>{this.$emt(e)}));super(e,null!==(n=null==i?void 0:i.dataAdapter)&&void 0!==n?n:new l.StatsigEvaluationsDataAdapter,c,i),this.getFeatureGate=this._memoize(s.MemoPrefix._gate,this._getFeatureGateImpl.bind(this)),this.getDynamicConfig=this._memoize(s.MemoPrefix._dynamicConfig,this._getDynamicConfigImpl.bind(this)),this.getExperiment=this._memoize(s.MemoPrefix._experiment,this._getExperimentImpl.bind(this)),this.getLayer=this._memoize(s.MemoPrefix._layer,this._getLayerImpl.bind(this)),this.getParameterStore=this._memoize(s.MemoPrefix._paramStore,this._getParameterStoreImpl.bind(this)),this._store=new r.default(e),this._network=c,this._user=this._configureUser(t,i);const u=null!==(a=null==i?void 0:i.plugins)&&void 0!==a?a:[];for(const e of u)e.bind(this)}initializeSync(e){var t;return"Uninitialized"!==this.loadingStatus?(0,s.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations",...null!==(t=this._store.getWarnings())&&void 0!==t?t:[]]):(this._logger.start(),this.updateUserSync(this._user,e))}initializeAsync(e){return n(this,void 0,void 0,(function*(){return this._initializePromise||(this._initializePromise=this._initializeAsyncImpl(e)),this._initializePromise}))}updateUserSync(e,t){var i;const n=performance.now(),r=[...null!==(i=this._store.getWarnings())&&void 0!==i?i:[]];this._resetForUser(e);const o=this.dataAdapter.getDataSync(this._user);null==o&&r.push("NoCachedValues"),this._store.setValues(o,this._user),this._finalizeUpdate(o);const a=null==t?void 0:t.disableBackgroundCacheRefresh;return!0===a||null==a&&"Bootstrap"===(null==o?void 0:o.source)||this._runPostUpdate(null!=o?o:null,this._user),(0,s.createUpdateDetails)(!0,this._store.getSource(),performance.now()-n,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),r)}updateUserAsync(e,t){return n(this,void 0,void 0,(function*(){this._resetForUser(e);const i=this._user;s.Diagnostics._markInitOverallStart(this._sdkKey);let n=this.dataAdapter.getDataSync(i);if(this._store.setValues(n,this._user),this._setStatus("Loading",n),n=yield this.dataAdapter.getDataAsync(n,i,t),i!==this._user)return(0,s.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset());let r=!1;null!=n&&(s.Diagnostics._markInitProcessStart(this._sdkKey),r=this._store.setValues(n,this._user),s.Diagnostics._markInitProcessEnd(this._sdkKey,{success:r})),this._finalizeUpdate(n),r||(this._errorBoundary.attachErrorIfNoneExists(s.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),s.Diagnostics._markInitOverallEnd(this._sdkKey,r,this._store.getCurrentSourceDetails());const o=s.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options);return(0,s.createUpdateDetails)(r,this._store.getSource(),o,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings())}))}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:s.StatsigSession.get(this._sdkKey),stableID:s.StableID.get(this._sdkKey)}}checkGate(e,t){return this.getFeatureGate(e,t).value}logEvent(e,t,i){const n="string"==typeof e?{eventName:e,value:t,metadata:i}:e;this._logger.enqueue(Object.assign(Object.assign({},n),{user:this._user,time:Date.now()}))}_primeReadyRipcord(){this.$on("error",(()=>{"Loading"===this.loadingStatus&&this._finalizeUpdate(null)}))}_initializeAsyncImpl(e){return n(this,void 0,void 0,(function*(){return s.Storage.isReady()||(yield s.Storage.isReadyResolver()),this._logger.start(),this.updateUserAsync(this._user,e)}))}_finalizeUpdate(e){this._store.finalize(),this._setStatus("Ready",e)}_runPostUpdate(e,t){this.dataAdapter.getDataAsync(e,t,{priority:"low"}).catch((e=>{s.Log.error("An error occurred after update.",e)}))}_resetForUser(e){this._logger.reset(),this._store.reset(),this._user=this._configureUser(e,this._options)}_configureUser(e,t){var i;const n=(0,s._normalizeUser)(e,t),r=null===(i=n.customIDs)||void 0===i?void 0:i.stableID;return r&&s.StableID.setOverride(r,this._sdkKey),n}_getFeatureGateImpl(e,t){var i,n;const{result:r,details:o}=this._store.getGate(e),a=(0,s._makeFeatureGate)(e,o,r),l=null===(n=null===(i=this.overrideAdapter)||void 0===i?void 0:i.getGateOverride)||void 0===n?void 0:n.call(i,a,this._user,t),c=null!=l?l:a;return this._enqueueExposure(e,(0,s._createGateExposure)(this._user,c),t),this.$emt({name:"gate_evaluation",gate:c}),c}_getDynamicConfigImpl(e,t){var i,n;const{result:r,details:o}=this._store.getConfig(e),a=(0,s._makeDynamicConfig)(e,o,r),l=null===(n=null===(i=this.overrideAdapter)||void 0===i?void 0:i.getDynamicConfigOverride)||void 0===n?void 0:n.call(i,a,this._user,t),c=null!=l?l:a;return this._enqueueExposure(e,(0,s._createConfigExposure)(this._user,c),t),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:c}),c}_getExperimentImpl(e,t){var i,n;const{result:r,details:o}=this._store.getConfig(e),a=(0,s._makeExperiment)(e,o,r),l=null===(n=null===(i=this.overrideAdapter)||void 0===i?void 0:i.getExperimentOverride)||void 0===n?void 0:n.call(i,a,this._user,t),c=null!=l?l:a;return this._enqueueExposure(e,(0,s._createConfigExposure)(this._user,c),t),this.$emt({name:"experiment_evaluation",experiment:c}),c}_getLayerImpl(e,t){var i,n,r;const{result:o,details:a}=this._store.getLayer(e),l=(0,s._makeLayer)(e,a,o),c=null===(n=null===(i=this.overrideAdapter)||void 0===i?void 0:i.getLayerOverride)||void 0===n?void 0:n.call(i,l,this._user,t);(null==t?void 0:t.disableExposureLog)&&this._logger.incrementNonExposureCount(e);const u=(0,s._mergeOverride)(l,c,null!==(r=null==c?void 0:c.__value)&&void 0!==r?r:l.__value,(i=>{(null==t?void 0:t.disableExposureLog)||this._enqueueExposure(e,(0,s._createLayerParameterExposure)(this._user,u,i),t)}));return this.$emt({name:"layer_evaluation",layer:u}),u}_getParameterStoreImpl(e,t){const{result:i,details:n}=this._store.getParamStore(e);return this._logger.incrementNonExposureCount(e),{name:e,details:n,__configuration:i,get:(0,a._makeParamStoreGetter)(this,i,t)}}}t.default=c},"./node_modules/@statsig/js-client/src/StatsigEvaluationsDataAdapter.js":function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigEvaluationsDataAdapter=void 0;const s=i("./node_modules/@statsig/client-core/src/index.js"),r=i("./node_modules/@statsig/js-client/src/Network.js");class o extends s.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(e,t){super.attach(e,t),this._network=new r.default(null!=t?t:{})}getDataAsync(e,t,i){return this._getDataAsyncImpl(e,(0,s._normalizeUser)(t,this._options),i)}prefetchData(e,t){return this._prefetchDataImpl(e,t)}setData(e){const t=(0,s._typedJsonParse)(e,"has_updates","data");t&&"user"in t?super.setData(e,t.user):s.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}setDataLegacy(e,t){super.setData(e,t)}_fetchFromNetwork(e,t,i){var s;return n(this,void 0,void 0,(function*(){const n=yield null===(s=this._network)||void 0===s?void 0:s.fetchEvaluations(this._getSdkKey(),e,null==i?void 0:i.priority,t);return null!=n?n:null}))}_getCacheKey(e){var t;const i=(0,s._getStorageKey)(this._getSdkKey(),e,null===(t=this._options)||void 0===t?void 0:t.customUserCacheKeyFunc);return`${s.DataAdapterCachePrefix}.${this._cacheSuffix}.${i}`}_isCachedResultValidFor204(e,t){return null!=e.fullUserHash&&e.fullUserHash===(0,s._getFullUserHash)(t)}}t.StatsigEvaluationsDataAdapter=o},"./node_modules/@statsig/js-client/src/index.js":function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClient=void 0;const r=i("./node_modules/@statsig/js-client/src/StatsigClient.js");t.StatsigClient=r.default,s(i("./node_modules/@statsig/client-core/src/index.js"),t),__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{StatsigClient:r.default}),t.default=__STATSIG__},"./src/services/feature-flag/feature-flag-service.ts":(e,t,i)=>{i.r(t),i.d(t,{FeatureFlagsService:()=>a});var n=i("./node_modules/@statsig/js-client/src/index.js"),s=i("./src/utils/storage/local-storage.ts"),r=function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},o=function(e,t){var i,n,s,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(r=0)),r;)try{if(i=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((s=(s=r.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(6===a[0]&&r.label<s[1]){r.label=s[1],s=a;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(a);break}s[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{i=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},a=function(){function e(t){var i;if(this.options=t,this.storage=new s.LocalStorageCache("CRFeatureFlags"),e.instance)return e.instance;this.statsigClient=new n.StatsigClient("client-SSmY5k5Cs39G7II74NdWqPfv5hQzrFiUqCc3C1IU9na",{userID:(null===(i=null==t?void 0:t.metaData)||void 0===i?void 0:i.userId)||null}),e.instance=this}return e.prototype.initialize=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.statsigClient.initializeAsync()];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.loadFeatures=function(e){var t=this;e.forEach((function(e){t.storage.set(e,t.statsigClient.checkGate(e))}))},e.prototype.isFeatureEnabled=function(e){if(this.storage.isSet(e))return this.storage.get(e);var t=this.statsigClient.checkGate(e);return this.storage.set(e,t),t},e.prototype.getExperiment=function(e,t){var i;return void 0===t&&(t=[]),this.storage.isSet(e)?i=this.storage.get(e):(i=this.statsigClient.getLayer(e),this.storage.set(e,i)),t.length?t.map((function(e){return i.get(e)})):i},e}()},"./src/utils/storage/local-storage.ts":(e,t,i)=>{i.r(t),i.d(t,{LocalStorageCache:()=>n});var n=function(){function e(e){void 0===e&&(e="APP"),this.namespace=e}return e.prototype.clear=function(){localStorage.removeItem(this.namespace)},e.prototype.get=function(e){return this.getStorage()[e]},e.prototype.remove=function(e){var t=this.getStorage();t[e]=void 0,delete t[e],this.save(t)},e.prototype.isSet=function(e){return void 0!==this.getStorage()[e]},e.prototype.set=function(e,t){var i=this.getStorage();i[e]=t,this.save(i)},e.prototype.getStorage=function(){var e=localStorage.getItem(this.namespace);return e?this.deserialize(e):{}},e.prototype.serialize=function(e){return JSON.stringify(e)},e.prototype.deserialize=function(e){return JSON.parse(e)},e.prototype.save=function(e){localStorage.setItem(this.namespace,this.serialize(e))},e}()}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{i.r(n),i.d(n,{FeatureFlagsService:()=>e.FeatureFlagsService});var e=i("./src/services/feature-flag/feature-flag-service.ts")})(),n})(),e.exports=t()},52:function(e){var t;t=()=>(()=>{"use strict";var e=[,(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n,s=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e={}){var t,i,s=e;function r(){function e(e){const r=n;i=t=0,n=new Map,r.forEach((t=>{try{t(e)}catch(e){console.error(e)}})),this.ob(),s&&s.Tb()}let t=0,i=0,n=new Map,s=null,r=null;this.requestAnimationFrame=function(s){t||(t=requestAnimationFrame(e.bind(this)));const r=++i;return n.set(r,s),r},this.cancelAnimationFrame=function(e){n.delete(e),t&&0==n.size&&(cancelAnimationFrame(t),t=0)},this.Rb=function(e){r&&(document.body.remove(r),r=null),e||(r=document.createElement("div"),r.style.backgroundColor="black",r.style.position="fixed",r.style.right=0,r.style.top=0,r.style.color="white",r.style.padding="4px",r.innerHTML="RIVE FPS",e=function(e){r.innerHTML="RIVE FPS "+e.toFixed(1)},document.body.appendChild(r)),s=new function(){let t=0,i=0;this.Tb=function(){var n=performance.now();i?(++t,1e3<(n-=i)&&(e(1e3*t/n),t=i=0)):(i=n,t=0)}}},this.Ob=function(){r&&(document.body.remove(r),r=null),s=null},this.ob=function(){}}function o(e){console.assert(!0);const t=new Map;let i=-1/0;this.push=function(n){return n=n+((1<<e)-1)>>e,t.has(n)&&clearTimeout(t.get(n)),t.set(n,setTimeout((function(){t.delete(n),0==t.length?i=-1/0:n==i&&(i=Math.max(...t.keys()),console.assert(i<n))}),1e3)),i=Math.max(n,i),i<<e}}s.ready=new Promise(((e,n)=>{t=e,i=n}));const a=s.onRuntimeInitialized;s.onRuntimeInitialized=function(){a&&a();let e=s.decodeAudio;s.decodeAudio=function(t,i){i(t=e(t))};let t=s.decodeFont;s.decodeFont=function(e,i){i(e=t(e))};const i=s.FileAssetLoader;s.ptrToAsset=e=>{let t=s.ptrToFileAsset(e);return t.isImage?s.ptrToImageAsset(e):t.isFont?s.ptrToFontAsset(e):t.isAudio?s.ptrToAudioAsset(e):t},s.CustomFileAssetLoader=i.extend("CustomFileAssetLoader",{__construct:function({loadContents:e}){this.__parent.__construct.call(this),this.Gb=e},loadContents:function(e,t){return e=s.ptrToAsset(e),this.Gb(e,t)}}),s.CDNFileAssetLoader=i.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(e){let t=s.ptrToAsset(e);return""!==(e=t.cdnUuid)&&(i=t.cdnBaseUrl+"/"+e,(n=new XMLHttpRequest).responseType="arraybuffer",n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(e=>{t.decode(new Uint8Array(e.response))})(n)},n.open("GET",i,!0),n.send(null),!0);var i,n}}),s.FallbackFileAssetLoader=i.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(e){this.kb.push(e)},loadContents:function(e,t){for(let i of this.kb)if(i.loadContents(e,t))return!0;return!1}});let n=s.computeAlignment;s.computeAlignment=function(e,t,i,s,r=1){return n.call(this,e,t,i,s,r)}};const l="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),c=new function(){function e(){if(!t){var e=document.createElement("canvas"),o={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let a;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(a=e.getContext("webgl",o),i=1,!a)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(a=e.getContext("webgl2",o))i=2;else{if(!(a=e.getContext("webgl",o)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;i=1}function l(e,t,i){if(t=a.createShader(t),a.shaderSource(t,i),a.compileShader(t),0<((i=a.getShaderInfoLog(t))||"").length)throw i;a.attachShader(e,t)}if(a=new Proxy(a,{get:(e,t)=>e.isContextLost()?(c||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",t),c=!0),"function"==typeof e[t]?function(){}:void 0):"function"==typeof e[t]?function(...i){return e[t].apply(e,i)}:e[t],set(e,t,i){if(!e.isContextLost())return e[t]=i,!0;c||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+t),c=!0)}}),n=Math.min(a.getParameter(a.MAX_RENDERBUFFER_SIZE),a.getParameter(a.MAX_TEXTURE_SIZE)),l(e=a.createProgram(),a.VERTEX_SHADER,"attribute vec2 vertex;\n                attribute vec2 uv;\n                uniform vec4 mat;\n                uniform vec2 translate;\n                varying vec2 st;\n                void main() {\n                    st = uv;\n                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);\n                }"),l(e,a.FRAGMENT_SHADER,"precision highp float;\n                uniform sampler2D image;\n                varying vec2 st;\n                void main() {\n                    gl_FragColor = texture2D(image, st);\n                }"),a.bindAttribLocation(e,0,"vertex"),a.bindAttribLocation(e,1,"uv"),a.linkProgram(e),0<((o=a.getProgramInfoLog(e))||"").trim().length)throw o;s=a.getUniformLocation(e,"mat"),r=a.getUniformLocation(e,"translate"),a.useProgram(e),a.bindBuffer(a.ARRAY_BUFFER,a.createBuffer()),a.enableVertexAttribArray(0),a.enableVertexAttribArray(1),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,a.createBuffer()),a.uniform1i(a.getUniformLocation(e,"image"),0),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=a}return!0}let t=null,i=0,n=0,s=null,r=null,a=0,l=0,c=!1;e(),this.hc=function(){return e(),n},this.Mb=function(e){t.deleteTexture&&t.deleteTexture(e)},this.Lb=function(n){if(!e())return null;const s=t.createTexture();return s?(t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),2==i?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),s):null};const u=new o(8),d=new o(8),h=new o(10),p=new o(10);this.Qb=function(i,n,o,c,m){if(e()){var g=u.push(i),f=d.push(n);if(t.canvas){for(var v of(t.canvas.width==g&&t.canvas.height==f||(t.canvas.width=g,t.canvas.height=f),t.viewport(0,f-n,i,n),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),o.sort(((e,t)=>t.wb-e.wb)),g=h.push(c),a!=g&&(t.bufferData(t.ARRAY_BUFFER,8*g,t.DYNAMIC_DRAW),a=g),g=0,o))t.bufferSubData(t.ARRAY_BUFFER,g,v.Ta),g+=4*v.Ta.length;for(var b of(console.assert(g==4*c),o))t.bufferSubData(t.ARRAY_BUFFER,g,b.Db),g+=4*b.Db.length;for(var y of(console.assert(g==8*c),g=p.push(m),l!=g&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*g,t.DYNAMIC_DRAW),l=g),v=0,o))t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,v,y.indices),v+=2*y.indices.length;console.assert(v==2*m),y=0,b=!0,g=v=0;for(const e of o){e.image.Ka!=y&&(t.bindTexture(t.TEXTURE_2D,e.image.Ja||null),y=e.image.Ka),e.mc?(t.scissor(e.Ya,f-e.Za-e.jb,e.Ac,e.jb),b=!0):b&&(t.scissor(0,f-n,i,n),b=!1),o=2/i;const a=-2/n;t.uniform4f(s,e.ha[0]*o*e.Ba,e.ha[1]*a*e.Ca,e.ha[2]*o*e.Ba,e.ha[3]*a*e.Ca),t.uniform2f(r,e.ha[4]*o*e.Ba+o*(e.Ya-e.ic*e.Ba)-1,e.ha[5]*a*e.Ca+a*(e.Za-e.jc*e.Ca)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,g),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,g+4*c),t.drawElements(t.TRIANGLES,e.indices.length,t.UNSIGNED_SHORT,v),g+=4*e.Ta.length,v+=2*e.indices.length}console.assert(g==4*c),console.assert(v==2*m)}}},this.canvas=function(){return e()&&t.canvas}},u=s.onRuntimeInitialized;s.onRuntimeInitialized=function(){function e(e){switch(e){case m.srcOver:return"source-over";case m.screen:return"screen";case m.overlay:return"overlay";case m.darken:return"darken";case m.lighten:return"lighten";case m.colorDodge:return"color-dodge";case m.colorBurn:return"color-burn";case m.hardLight:return"hard-light";case m.softLight:return"soft-light";case m.difference:return"difference";case m.exclusion:return"exclusion";case m.multiply:return"multiply";case m.hue:return"hue";case m.saturation:return"saturation";case m.color:return"color";case m.luminosity:return"luminosity"}}function t(e){return"rgba("+((16711680&e)>>>16)+","+((65280&e)>>>8)+","+((255&e)>>>0)+","+((4278190080&e)>>>24)/255+")"}function i(){0<T.length&&(c.Qb(E.drawWidth(),E.drawHeight(),T,x,C),T=[],C=x=0,E.reset(512,512));for(const e of S){for(const t of e.H)t();e.H=[]}S.clear()}u&&u();var n=s.RenderPaintStyle;const o=s.RenderPath,a=s.RenderPaint,d=s.Renderer,h=s.StrokeCap,p=s.StrokeJoin,m=s.BlendMode,g=n.fill,f=n.stroke,v=s.FillRule.evenOdd;let b=1;var y=s.RenderImage.extend("CanvasRenderImage",{__construct:function({la:e,xa:t}={}){this.__parent.__construct.call(this),this.Ka=b,b=b+1&2147483647||1,this.la=e,this.xa=t},__destruct:function(){this.Ja&&(c.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(e){var t=this;t.xa&&t.xa(t);var i=new Image;t.Wa=URL.createObjectURL(new Blob([e],{type:"image/png"})),i.onload=function(){t.Fb=i,t.Ja=c.Lb(i),t.size(i.width,i.height),t.la&&t.la(t)},i.src=t.Wa}}),_=o.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(e,t,i,n,s,r,o){var a=this.T,l=a.addPath;e=e.T;const c=new DOMMatrix;c.a=t,c.b=i,c.c=n,c.d=s,c.e=r,c.f=o,l.call(a,e,c)},fillRule:function(e){this.Va=e},moveTo:function(e,t){this.T.moveTo(e,t)},lineTo:function(e,t){this.T.lineTo(e,t)},cubicTo:function(e,t,i,n,s,r){this.T.bezierCurveTo(e,t,i,n,s,r)},close:function(){this.T.closePath()}}),w=a.extend("CanvasRenderPaint",{color:function(e){this.Xa=t(e)},thickness:function(e){this.Ib=e},join:function(e){switch(e){case p.miter:this.Ia="miter";break;case p.round:this.Ia="round";break;case p.bevel:this.Ia="bevel"}},cap:function(e){switch(e){case h.butt:this.Ha="butt";break;case h.round:this.Ha="round";break;case h.square:this.Ha="square"}},style:function(e){this.Hb=e},blendMode:function(t){this.Eb=e(t)},clearGradient:function(){this.ja=null},linearGradient:function(e,t,i,n){this.ja={yb:e,zb:t,bb:i,cb:n,Ra:[]}},radialGradient:function(e,t,i,n){this.ja={yb:e,zb:t,bb:i,cb:n,Ra:[],ec:!0}},addStop:function(e,t){this.ja.Ra.push({color:e,stop:t})},completeGradient:function(){},draw:function(e,i,n){let s=this.Hb;var r=this.Xa,o=this.ja;if(e.globalCompositeOperation=this.Eb,null!=o){r=o.yb;var a=o.zb;const i=o.bb;var l=o.cb;const n=o.Ra;o.ec?(o=i-r,l-=a,r=e.createRadialGradient(r,a,0,r,a,Math.sqrt(o*o+l*l))):r=e.createLinearGradient(r,a,i,l);for(let e=0,i=n.length;e<i;e++)a=n[e],r.addColorStop(a.stop,t(a.color));this.Xa=r,this.ja=null}switch(s){case f:e.strokeStyle=r,e.lineWidth=this.Ib,e.lineCap=this.Ha,e.lineJoin=this.Ia,e.stroke(i);break;case g:e.fillStyle=r,e.fill(i,n)}}});const S=new Set;let E=null,T=[],x=0,C=0;var I=s.CanvasRenderer=d.extend("Renderer",{__construct:function(e){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=e.getContext("2d"),this.Ua=e,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const e=this.S.length-6;if(6>e)throw"restore() called without matching save().";this.S.splice(e),this.H.push(this.C.restore.bind(this.C))},transform:function(e,t,i,n,s,r){const o=this.S,a=o.length-6;o.splice(a,6,o[a]*e+o[a+2]*t,o[a+1]*e+o[a+3]*t,o[a]*i+o[a+2]*n,o[a+1]*i+o[a+3]*n,o[a]*s+o[a+2]*r+o[a+4],o[a+1]*s+o[a+3]*r+o[a+5]),this.H.push(this.C.transform.bind(this.C,e,t,i,n,s,r))},rotate:function(e){const t=Math.sin(e);e=Math.cos(e),this.transform(e,t,-t,e,0,0)},_drawPath:function(e,t){this.H.push(t.draw.bind(t,this.C,e.T,e.Va===v?"evenodd":"nonzero"))},_drawRiveImage:function(t,i,n){var s=t.Fb;if(s){var r=this.C,o=e(i);this.H.push((function(){r.globalCompositeOperation=o,r.globalAlpha=n,r.drawImage(s,0,0),r.globalAlpha=1}))}},_getMatrix:function(e){const t=this.S,i=t.length-6;for(let n=0;6>n;++n)e[n]=t[i+n]},_drawImageMesh:function(t,n,r,o,a,l,u,d,h,p){var m=this.C.canvas.width,g=this.C.canvas.height;const f=h-u,v=p-d;u=Math.max(u,0),d=Math.max(d,0),h=Math.min(h,m),p=Math.min(p,g);const b=h-u,y=p-d;if(console.assert(b<=Math.min(f,m)),console.assert(y<=Math.min(v,g)),!(0>=b||0>=y)){h=b<f||y<v,m=p=1;var _=Math.ceil(b*p),w=Math.ceil(y*m);g=c.hc(),_>g&&(p*=g/_,_=g),w>g&&(m*=g/w,w=g),E||(E=new s.DynamicRectanizer(g),E.reset(512,512)),0>(g=E.addRect(_,w))&&(i(),S.add(this),g=E.addRect(_,w),console.assert(0<=g));var I=65535&g,P=g>>16;T.push({ha:this.S.slice(this.S.length-6),image:t,Ya:I,Za:P,ic:u,jc:d,Ac:_,jb:w,Ba:p,Ca:m,Ta:new Float32Array(o),Db:new Float32Array(a),indices:new Uint16Array(l),mc:h,wb:t.Ka<<1|(h?1:0)}),x+=o.length,C+=l.length;var A=this.C,k=e(n);this.H.push((function(){A.save(),A.resetTransform(),A.globalCompositeOperation=k,A.globalAlpha=r;const e=c.canvas();e&&A.drawImage(e,I,P,_,w,u,d,b,y),A.restore()}))}},_clipPath:function(e){this.H.push(this.C.clip.bind(this.C,e.T,e.Va===v?"evenodd":"nonzero"))},clear:function(){S.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(e,t){this.transform(1,0,0,1,e,t)}});s.makeRenderer=function(e){const t=new I(e),i=t.C;return new Proxy(t,{get(e,n){if("function"==typeof e[n])return function(...t){return e[n].apply(e,t)};if("function"==typeof i[n]){if(-1<l.indexOf(n))throw Error("RiveException: Method call to '"+n+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...e){t.H.push(i[n].bind(i,...e))}}return e[n]},set(e,n,s){if(n in i)return t.H.push((()=>{i[n]=s})),!0}})},s.decodeImage=function(e,t){new y({la:t}).decode(e)},s.renderFactory={makeRenderPaint:function(){return new w},makeRenderPath:function(){return new _},makeRenderImage:function(){let e=A;return new y({xa:()=>{e.total++},la:()=>{if(e.loaded++,e.loaded===e.total){const t=e.ready;t&&(t(),e.ready=null)}}})}};let P=s.load,A=null;s.load=function(e,t,i=!0){const n=new s.FallbackFileAssetLoader;return void 0!==t&&n.addLoader(t),i&&(t=new s.CDNFileAssetLoader,n.addLoader(t)),new Promise((function(t){let i=null;A={total:0,loaded:0,ready:function(){t(i)}},i=P(e,n),0==A.total&&t(i)}))};let k=s.RendererWrapper.prototype.align;s.RendererWrapper.prototype.align=function(e,t,i,n,s=1){k.call(this,e,t,i,n,s)},n=new r,s.requestAnimationFrame=n.requestAnimationFrame.bind(n),s.cancelAnimationFrame=n.cancelAnimationFrame.bind(n),s.enableFPSCounter=n.Rb.bind(n),s.disableFPSCounter=n.Ob,n.ob=i,s.resolveAnimationFrame=i,s.cleanup=function(){E&&E.delete()}};var d,h,p=Object.assign({},s),m="./this.program",g="object"==typeof window,f="function"==typeof importScripts,v="";(g||f)&&(f?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),n&&(v=n),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",f&&(h=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),d=(e,t,i)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):i()},n.onerror=i,n.send(null)});var b,y=s.print||console.log.bind(console),_=s.printErr||console.error.bind(console);Object.assign(s,p),p=null,s.thisProgram&&(m=s.thisProgram),s.wasmBinary&&(b=s.wasmBinary),s.noExitRuntime,"object"!=typeof WebAssembly&&V("no native wasm support detected");var w,S,E,T,x,C,I,P,A,k,L=!1;function D(){var e=w.buffer;s.HEAP8=E=new Int8Array(e),s.HEAP16=x=new Int16Array(e),s.HEAP32=I=new Int32Array(e),s.HEAPU8=T=new Uint8Array(e),s.HEAPU16=C=new Uint16Array(e),s.HEAPU32=P=new Uint32Array(e),s.HEAPF32=A=new Float32Array(e),s.HEAPF64=k=new Float64Array(e)}var M,j=[],B=[],O=[];function R(){var e=s.preRun.shift();j.unshift(e)}var z,N=0,F=null,U=null;function V(e){throw s.onAbort&&s.onAbort(e),_(e="Aborted("+e+")"),L=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),i(e),e}function H(e){return e.startsWith("data:application/octet-stream;base64,")}if(!H(z="canvas_advanced.wasm")){var $=z;z=s.locateFile?s.locateFile($,v):v+$}function W(e){if(e==z&&b)return new Uint8Array(b);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}function G(e,t,i){return function(e){if(!b&&(g||f)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>W(e)));if(d)return new Promise(((t,i)=>{d(e,(e=>t(new Uint8Array(e))),i)}))}return Promise.resolve().then((()=>W(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(i,(e=>{_("failed to asynchronously prepare wasm: "+e),V(e)}))}var Y,X,K={445436:(e,t,i,n,s)=>{if("undefined"==typeof window||void 0===(window.AudioContext||window.webkitAudioContext))return 0;if(void 0===window.h){window.h={Aa:0},window.h.I={},window.h.I.ya=e,window.h.I.capture=t,window.h.I.La=i,window.h.ga={},window.h.ga.stopped=n,window.h.ga.xb=s;let r=window.h;r.D=[],r.yc=function(e){for(var t=0;t<r.D.length;++t)if(null==r.D[t])return r.D[t]=e,t;return r.D.push(e),r.D.length-1},r.Cb=function(e){for(r.D[e]=null;0<r.D.length&&null==r.D[r.D.length-1];)r.D.pop()},r.Sc=function(e){for(var t=0;t<r.D.length;++t)if(r.D[t]==e)return r.Cb(t)},r.ra=function(e){return r.D[e]},r.Bb=["touchend","click"],r.unlock=function(){for(var e=0;e<r.D.length;++e){var t=r.D[e];null!=t&&null!=t.J&&t.state===r.ga.xb&&t.J.resume().then((()=>{Ai(t.pb)}),(e=>{console.error("Failed to resume audiocontext",e)}))}r.Bb.map((function(e){document.removeEventListener(e,r.unlock,!0)}))},r.Bb.map((function(e){document.addEventListener(e,r.unlock,!0)}))}return window.h.Aa+=1,1},447614:()=>{void 0!==window.h&&(--window.h.Aa,0===window.h.Aa&&delete window.h)},447778:()=>void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia,447882:()=>{try{var e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate;return e.close(),t}catch(e){return 0}},448053:(e,t,i,n,s,r)=>{if(void 0===window.h)return-1;var o={},a={};return e==window.h.I.ya&&0!=i&&(a.sampleRate=i),o.J=new(window.AudioContext||window.webkitAudioContext)(a),o.J.suspend(),o.state=window.h.ga.stopped,i=0,e!=window.h.I.ya&&(i=t),o.Z=o.J.createScriptProcessor(n,i,t),o.Z.onaudioprocess=function(i){if(null!=o.sa&&0!=o.sa.length||(o.sa=new Float32Array(A.buffer,s,n*t)),e==window.h.I.capture||e==window.h.I.La){for(var a=0;a<t;a+=1)for(var l=i.inputBuffer.getChannelData(a),c=o.sa,u=0;u<n;u+=1)c[u*t+a]=l[u];Li(r,n,s)}if(e==window.h.I.ya||e==window.h.I.La)for(Di(r,n,s),a=0;a<i.outputBuffer.numberOfChannels;++a)for(l=i.outputBuffer.getChannelData(a),c=o.sa,u=0;u<n;u+=1)l[u]=c[u*t+a];else for(a=0;a<i.outputBuffer.numberOfChannels;++a)i.outputBuffer.getChannelData(a).fill(0)},e!=window.h.I.capture&&e!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){o.Da=o.J.createMediaStreamSource(e),o.Da.connect(o.Z),o.Z.connect(o.J.destination)})).catch((function(e){console.log("Failed to get user media: "+e)})),e==window.h.I.ya&&o.Z.connect(o.J.destination),o.pb=r,window.h.yc(o)},450930:e=>window.h.ra(e).J.sampleRate,451003:e=>{void 0!==(e=window.h.ra(e)).Z&&(e.Z.onaudioprocess=function(){},e.Z.disconnect(),e.Z=void 0),void 0!==e.Da&&(e.Da.disconnect(),e.Da=void 0),e.J.close(),e.J=void 0,e.pb=void 0},451403:e=>{window.h.Cb(e)},451453:e=>{(e=window.h.ra(e)).J.resume(),e.state=window.h.ga.xb},451592:e=>{(e=window.h.ra(e)).J.suspend(),e.state=window.h.ga.stopped}},q=e=>{for(;0<e.length;)e.shift()(s)},J=(e,t)=>{for(var i=0,n=e.length-1;0<=n;n--){var s=e[n];"."===s?e.splice(n,1):".."===s?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i;i--)e.unshift("..");return e},Q=e=>{var t="/"===e.charAt(0),i="/"===e.substr(-1);return(e=J(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e},Z=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."},ee=e=>{if("/"===e)return"/";var t=(e=(e=Q(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},te=e=>(te=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);V("initRandomDevice")})())(e);function ie(){for(var e="",t=!1,i=arguments.length-1;-1<=i&&!t;i--){if("string"!=typeof(t=0<=i?arguments[i]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=J(e.split("/").filter((e=>!!e)),!t).join("/"))||"."}var ne="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,se=(e,t,i)=>{var n=t+i;for(i=t;e[i]&&!(i>=n);)++i;if(16<i-t&&e.buffer&&ne)return ne.decode(e.subarray(t,i));for(n="";t<i;){var s=e[t++];if(128&s){var r=63&e[t++];if(192==(224&s))n+=String.fromCharCode((31&s)<<6|r);else{var o=63&e[t++];65536>(s=224==(240&s)?(15&s)<<12|r<<6|o:(7&s)<<18|r<<12|o<<6|63&e[t++])?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else n+=String.fromCharCode(s)}return n},re=[],oe=e=>{for(var t=0,i=0;i<e.length;++i){var n=e.charCodeAt(i);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++i):t+=3}return t},ae=(e,t,i,n)=>{if(!(0<n))return 0;var s=i;n=i+n-1;for(var r=0;r<e.length;++r){var o=e.charCodeAt(r);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++r)),127>=o){if(i>=n)break;t[i++]=o}else{if(2047>=o){if(i+1>=n)break;t[i++]=192|o>>6}else{if(65535>=o){if(i+2>=n)break;t[i++]=224|o>>12}else{if(i+3>=n)break;t[i++]=240|o>>18,t[i++]=128|o>>12&63}t[i++]=128|o>>6&63}t[i++]=128|63&o}}return t[i]=0,i-s};function le(e,t){var i=Array(oe(e)+1);return e=ae(e,i,0,i.length),t&&(i.length=e),i}var ce=[];function ue(e,t){ce[e]={input:[],F:[],V:t},Ne(e,de)}var de={open:function(e){var t=ce[e.node.za];if(!t)throw new Ce(43);e.s=t,e.seekable=!1},close:function(e){e.s.V.qa(e.s)},qa:function(e){e.s.V.qa(e.s)},read:function(e,t,i,n){if(!e.s||!e.s.V.ib)throw new Ce(60);for(var s=0,r=0;r<n;r++){try{var o=e.s.V.ib(e.s)}catch(e){throw new Ce(29)}if(void 0===o&&0===s)throw new Ce(6);if(null==o)break;s++,t[i+r]=o}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,i,n){if(!e.s||!e.s.V.Oa)throw new Ce(60);try{for(var s=0;s<n;s++)e.s.V.Oa(e.s,t[i+s])}catch(e){throw new Ce(29)}return n&&(e.node.timestamp=Date.now()),s}},he={ib:function(){e:{if(!re.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n"),!e){e=null;break e}re=le(e,!0)}e=re.shift()}return e},Oa:function(e,t){null===t||10===t?(y(se(e.F,0)),e.F=[]):0!=t&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(y(se(e.F,0)),e.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},pe={Oa:function(e,t){null===t||10===t?(_(se(e.F,0)),e.F=[]):0!=t&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(_(se(e.F,0)),e.F=[])}};function me(e,t){var i=e.j?e.j.length:0;i>=t||(t=Math.max(t,i*(1048576>i?2:1.125)>>>0),0!=i&&(t=Math.max(t,256)),i=e.j,e.j=new Uint8Array(t),0<e.v&&e.j.set(i.subarray(0,e.v),0))}var ge,fe,ve,be,ye={O:null,U:()=>ye.createNode(null,"/",16895,0),createNode(e,t,i,n){if(24576==(61440&i)||4096==(61440&i))throw new Ce(63);return ye.O||(ye.O={dir:{node:{Y:ye.l.Y,P:ye.l.P,ka:ye.l.ka,va:ye.l.va,ub:ye.l.ub,Ab:ye.l.Ab,vb:ye.l.vb,sb:ye.l.sb,Ea:ye.l.Ea},stream:{ba:ye.m.ba}},file:{node:{Y:ye.l.Y,P:ye.l.P},stream:{ba:ye.m.ba,read:ye.m.read,write:ye.m.write,pa:ye.m.pa,lb:ye.m.lb,nb:ye.m.nb}},link:{node:{Y:ye.l.Y,P:ye.l.P,ma:ye.l.ma},stream:{}},$a:{node:{Y:ye.l.Y,P:ye.l.P},stream:ze}}),16384==(61440&(i=De(e,t,i,n)).mode)?(i.l=ye.O.dir.node,i.m=ye.O.dir.stream,i.j={}):32768==(61440&i.mode)?(i.l=ye.O.file.node,i.m=ye.O.file.stream,i.v=0,i.j=null):40960==(61440&i.mode)?(i.l=ye.O.link.node,i.m=ye.O.link.stream):8192==(61440&i.mode)&&(i.l=ye.O.$a.node,i.m=ye.O.$a.stream),i.timestamp=Date.now(),e&&(e.j[t]=i,e.timestamp=i.timestamp),i},Kc:e=>e.j?e.j.subarray?e.j.subarray(0,e.v):new Uint8Array(e.j):new Uint8Array(0),l:{Y(e){var t={};return t.Jc=8192==(61440&e.mode)?e.id:1,t.Mc=e.id,t.mode=e.mode,t.Oc=1,t.uid=0,t.Lc=0,t.za=e.za,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.v:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.Bc=new Date(e.timestamp),t.Nc=new Date(e.timestamp),t.Ic=new Date(e.timestamp),t.Jb=4096,t.Cc=Math.ceil(t.size/t.Jb),t},P(e,t){if(void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&(t=t.size,e.v!=t))if(0==t)e.j=null,e.v=0;else{var i=e.j;e.j=new Uint8Array(t),i&&e.j.set(i.subarray(0,Math.min(t,e.v))),e.v=t}},ka(){throw Ie[44]},va:(e,t,i,n)=>ye.createNode(e,t,i,n),ub(e,t,i){if(16384==(61440&e.mode)){try{var n=Le(t,i)}catch(e){}if(n)for(var s in n.j)throw new Ce(55)}delete e.parent.j[e.name],e.parent.timestamp=Date.now(),e.name=i,t.j[i]=e,t.timestamp=e.parent.timestamp,e.parent=t},Ab(e,t){delete e.j[t],e.timestamp=Date.now()},vb(e,t){var i,n=Le(e,t);for(i in n.j)throw new Ce(55);delete e.j[t],e.timestamp=Date.now()},sb(e){var t,i=[".",".."];for(t in e.j)e.j.hasOwnProperty(t)&&i.push(t);return i},Ea:(e,t,i)=>((e=ye.createNode(e,t,41471,0)).link=i,e),ma(e){if(40960!=(61440&e.mode))throw new Ce(28);return e.link}},m:{read(e,t,i,n,s){var r=e.node.j;if(s>=e.node.v)return 0;if(8<(e=Math.min(e.node.v-s,n))&&r.subarray)t.set(r.subarray(s,s+e),i);else for(n=0;n<e;n++)t[i+n]=r[s+n];return e},write(e,t,i,n,s,r){if(t.buffer===E.buffer&&(r=!1),!n)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.j||e.j.subarray)){if(r)return e.j=t.subarray(i,i+n),e.v=n;if(0===e.v&&0===s)return e.j=t.slice(i,i+n),e.v=n;if(s+n<=e.v)return e.j.set(t.subarray(i,i+n),s),n}if(me(e,s+n),e.j.subarray&&t.subarray)e.j.set(t.subarray(i,i+n),s);else for(r=0;r<n;r++)e.j[s+r]=t[i+r];return e.v=Math.max(e.v,s+n),n},ba(e,t,i){if(1===i?t+=e.position:2===i&&32768==(61440&e.node.mode)&&(t+=e.node.v),0>t)throw new Ce(28);return t},pa(e,t,i){me(e.node,t+i),e.node.v=Math.max(e.node.v,t+i)},lb(e,t,i,n,s){if(32768!=(61440&e.node.mode))throw new Ce(43);if(e=e.node.j,2&s||e.buffer!==E.buffer){if((0<i||i+t<e.length)&&(e=e.subarray?e.subarray(i,i+t):Array.prototype.slice.call(e,i,i+t)),i=!0,V(),!(t=void 0))throw new Ce(48);E.set(e,t)}else i=!1,t=e.byteOffset;return{o:t,M:i}},nb:(e,t,i,n)=>(ye.m.write(e,t,0,n,i,!1),0)}},_e=null,we={},Se=[],Ee=1,Te=null,xe=!0,Ce=null,Ie={},Pe=(e,t={})=>{if(!(e=ie(e)))return{path:"",node:null};if(8<(t=Object.assign({gb:!0,Qa:0},t)).Qa)throw new Ce(32);e=e.split("/").filter((e=>!!e));for(var i=_e,n="/",s=0;s<e.length;s++){var r=s===e.length-1;if(r&&t.parent)break;if(i=Le(i,e[s]),n=Q(n+"/"+e[s]),i.wa&&(!r||r&&t.gb)&&(i=i.wa.root),!r||t.fb)for(r=0;40960==(61440&i.mode);)if(i=$e(n),n=ie(Z(n),i),i=Pe(n,{Qa:t.Qa+1}).node,40<r++)throw new Ce(32)}return{path:n,node:i}},Ae=e=>{for(var t;;){if(e===e.parent)return e=e.U.mb,t?"/"!==e[e.length-1]?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}},ke=(e,t)=>{for(var i=0,n=0;n<t.length;n++)i=(i<<5)-i+t.charCodeAt(n)|0;return(e+i>>>0)%Te.length},Le=(e,t)=>{var i;if(i=(i=je(e,"x"))?i:e.l.ka?0:2)throw new Ce(i,e);for(i=Te[ke(e.id,t)];i;i=i.lc){var n=i.name;if(i.parent.id===e.id&&n===t)return i}return e.l.ka(e,t)},De=(e,t,i,n)=>(e=new Ei(e,t,i,n),t=ke(e.parent.id,e.name),e.lc=Te[t],Te[t]=e),Me=e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},je=(e,t)=>xe?0:!t.includes("r")||292&e.mode?t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0:2,Be=(e,t)=>{try{return Le(e,t),20}catch(e){}return je(e,"wx")},Oe=e=>{if(!(e=Se[e]))throw new Ce(8);return e},Re=(e,t=-1)=>(ve||((ve=function(){this.h={}}).prototype={},Object.defineProperties(ve.prototype,{object:{get(){return this.node},set(e){this.node=e}},flags:{get(){return this.h.flags},set(e){this.h.flags=e}},position:{get(){return this.h.position},set(e){this.h.position=e}}})),e=Object.assign(new ve,e),-1==t&&(t=(()=>{for(var e=0;4096>=e;e++)if(!Se[e])return e;throw new Ce(33)})()),e.X=t,Se[t]=e),ze={open:e=>{e.m=we[e.node.za].m,e.m.open&&e.m.open(e)},ba:()=>{throw new Ce(70)}},Ne=(e,t)=>{we[e]={m:t}},Fe=(e,t)=>{var i="/"===t,n=!t;if(i&&_e)throw new Ce(10);if(!i&&!n){var s=Pe(t,{gb:!1});if(t=s.path,(s=s.node).wa)throw new Ce(10);if(16384!=(61440&s.mode))throw new Ce(54)}t={type:e,Qc:{},mb:t,kc:[]},(e=e.U(t)).U=t,t.root=e,i?_e=e:s&&(s.wa=t,s.U&&s.U.kc.push(t))},Ue=(e,t,i)=>{var n=Pe(e,{parent:!0}).node;if(!(e=ee(e))||"."===e||".."===e)throw new Ce(28);var s=Be(n,e);if(s)throw new Ce(s);if(!n.l.va)throw new Ce(63);return n.l.va(n,e,t,i)},Ve=(e,t,i)=>{void 0===i&&(i=t,t=438),Ue(e,8192|t,i)},He=(e,t)=>{if(!ie(e))throw new Ce(44);var i=Pe(t,{parent:!0}).node;if(!i)throw new Ce(44);t=ee(t);var n=Be(i,t);if(n)throw new Ce(n);if(!i.l.Ea)throw new Ce(63);i.l.Ea(i,t,e)},$e=e=>{if(!(e=Pe(e).node))throw new Ce(44);if(!e.l.ma)throw new Ce(28);return ie(Ae(e.parent),e.l.ma(e))},We=(e,t,i)=>{if(""===e)throw new Ce(44);if("string"==typeof t){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(void 0===n)throw Error(`Unknown file open mode: ${t}`);t=n}if(i=64&t?4095&(void 0===i?438:i)|32768:0,"object"==typeof e)var r=e;else{e=Q(e);try{r=Pe(e,{fb:!(131072&t)}).node}catch(e){}}if(n=!1,64&t)if(r){if(128&t)throw new Ce(20)}else r=Ue(e,i,0),n=!0;if(!r)throw new Ce(44);if(8192==(61440&r.mode)&&(t&=-513),65536&t&&16384!=(61440&r.mode))throw new Ce(54);if(!n&&(i=r?40960==(61440&r.mode)?32:16384==(61440&r.mode)&&("r"!==Me(t)||512&t)?31:je(r,Me(t)):44))throw new Ce(i);if(512&t&&!n){if(!(i="string"==typeof(i=r)?Pe(i,{fb:!0}).node:i).l.P)throw new Ce(63);if(16384==(61440&i.mode))throw new Ce(31);if(32768!=(61440&i.mode))throw new Ce(28);if(n=je(i,"w"))throw new Ce(n);i.l.P(i,{size:0,timestamp:Date.now()})}return t&=-131713,(r=Re({node:r,path:Ae(r),flags:t,seekable:!0,position:0,m:r.m,zc:[],error:!1})).m.open&&r.m.open(r),!s.logReadFiles||1&t||(be||(be={}),e in be||(be[e]=1)),r},Ge=(e,t,i)=>{if(null===e.X)throw new Ce(8);if(!e.seekable||!e.m.ba)throw new Ce(70);if(0!=i&&1!=i&&2!=i)throw new Ce(28);e.position=e.m.ba(e,t,i),e.zc=[]},Ye=()=>{Ce||((Ce=function(e,t){this.name="ErrnoError",this.node=t,this.pc=function(e){this.aa=e},this.pc(e),this.message="FS error"}).prototype=Error(),Ce.prototype.constructor=Ce,[44].forEach((e=>{Ie[e]=new Ce(e),Ie[e].stack="<generic error, no stack>"})))},Xe=(e,t,i)=>{e=Q("/dev/"+e);var n=function(e,t){var i=0;return e&&(i|=365),t&&(i|=146),i}(!!t,!!i);fe||(fe=64);var s=fe++<<8;Ne(s,{open:e=>{e.seekable=!1},close:()=>{i&&i.buffer&&i.buffer.length&&i(10)},read:(e,i,n,s)=>{for(var r=0,o=0;o<s;o++){try{var a=t()}catch(e){throw new Ce(29)}if(void 0===a&&0===r)throw new Ce(6);if(null==a)break;r++,i[n+o]=a}return r&&(e.node.timestamp=Date.now()),r},write:(e,t,n,s)=>{for(var r=0;r<s;r++)try{i(t[n+r])}catch(e){throw new Ce(29)}return s&&(e.node.timestamp=Date.now()),r}}),Ve(e,n,s)},Ke={},qe=void 0;function Je(){return I[(qe+=4)-4>>2]}function Qe(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}function Ze(e,t){return e=Qe(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function et(){this.M=[void 0],this.hb=[]}var tt=new et,it=void 0;function nt(e){throw new it(e)}var st=e=>(e||nt("Cannot use deleted val. handle = "+e),tt.get(e).value),rt=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return tt.pa({tb:1,value:e})}};function ot(e){var t=Error,i=Ze(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},i}var at=void 0,lt=void 0;function ct(e){for(var t="";T[e];)t+=lt[T[e++]];return t}var ut=[];function dt(){for(;ut.length;){var e=ut.pop();e.g.fa=!1,e.delete()}}var ht=void 0,pt={};function mt(e,t){for(void 0===t&&nt("ptr should not be undefined");e.A;)t=e.na(t),e=e.A;return t}var gt={};function ft(e){var t=ct(e=ji(e));return Ii(e),t}function vt(e,t){var i=gt[e];return void 0===i&&nt(t+" has unknown type "+ft(e)),i}function bt(){}var yt=!1;function _t(e){--e.count.value,0===e.count.value&&(e.G?e.L.W(e.G):e.u.i.W(e.o))}function wt(e,t,i){return t===i?e:void 0===i.A||null===(e=wt(e,t,i.A))?null:i.Pb(e)}var St={},Et=void 0;function Tt(e){throw new Et(e)}function xt(e,t){return t.u&&t.o||Tt("makeClassHandle requires ptr and ptrType"),!!t.L!=!!t.G&&Tt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ct(Object.create(e,{g:{value:t}}))}function Ct(e){return"undefined"==typeof FinalizationRegistry?(Ct=e=>e,e):(yt=new FinalizationRegistry((e=>{_t(e.g)})),bt=e=>{yt.unregister(e)},(Ct=e=>{var t=e.g;return t.G&&yt.register(e,{g:t},e),e})(e))}var It={};function Pt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function At(e){return this.fromWireType(I[e>>2])}var kt={},Lt={};function Dt(e,t,i){function n(t){(t=i(t)).length!==e.length&&Tt("Mismatched type converter count");for(var n=0;n<e.length;++n)jt(e[n],t[n])}e.forEach((function(e){Lt[e]=t}));var s=Array(t.length),r=[],o=0;t.forEach(((e,t)=>{gt.hasOwnProperty(e)?s[t]=gt[e]:(r.push(e),kt.hasOwnProperty(e)||(kt[e]=[]),kt[e].push((()=>{s[t]=gt[e],++o===r.length&&n(s)})))})),0===r.length&&n(s)}function Mt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function jt(e,t,i={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");!function(e,t,i={}){var n=t.name;if(e||nt(`type "${n}" must have a positive integer typeid pointer`),gt.hasOwnProperty(e)){if(i.$b)return;nt(`Cannot register type '${n}' twice`)}gt[e]=t,delete Lt[e],kt.hasOwnProperty(e)&&(t=kt[e],delete kt[e],t.forEach((e=>e())))}(e,t,i)}function Bt(e){nt(e.g.u.i.name+" instance already deleted")}function Ot(){}function Rt(e,t,i){if(void 0===e[t].B){var n=e[t];e[t]=function(){return e[t].B.hasOwnProperty(arguments.length)||nt(`Function '${i}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].B})!`),e[t].B[arguments.length].apply(this,arguments)},e[t].B=[],e[t].B[n.ea]=n}}function zt(e,t,i){s.hasOwnProperty(e)?((void 0===i||void 0!==s[e].B&&void 0!==s[e].B[i])&&nt(`Cannot register public name '${e}' twice`),Rt(s,e,e),s.hasOwnProperty(i)&&nt(`Cannot register multiple overloads of a function with the same number of arguments (${i})!`),s[e].B[i]=t):(s[e]=t,void 0!==i&&(s[e].Pc=i))}function Nt(e,t,i,n,s,r,o,a){this.name=e,this.constructor=t,this.N=i,this.W=n,this.A=s,this.Ub=r,this.na=o,this.Pb=a,this.qb=[]}function Ft(e,t,i){for(;t!==i;)t.na||nt(`Expected null or instance of ${i.name}, got an instance of ${t.name}`),e=t.na(e),t=t.A;return e}function Ut(e,t){return null===t?(this.Na&&nt(`null is not a valid ${this.name}`),0):(t.g||nt(`Cannot pass "${ii(t)}" as a ${this.name}`),t.g.o||nt(`Cannot pass deleted object as a pointer of type ${this.name}`),Ft(t.g.o,t.g.u.i,this.i))}function Vt(e,t){if(null===t){if(this.Na&&nt(`null is not a valid ${this.name}`),this.ua){var i=this.Pa();return null!==e&&e.push(this.W,i),i}return 0}if(t.g||nt(`Cannot pass "${ii(t)}" as a ${this.name}`),t.g.o||nt(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&t.g.u.ta&&nt(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`),i=Ft(t.g.o,t.g.u.i,this.i),this.ua)switch(void 0===t.g.G&&nt("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:t.g.L===this?i=t.g.G:nt(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`);break;case 1:i=t.g.G;break;case 2:if(t.g.L===this)i=t.g.G;else{var n=t.clone();i=this.oc(i,rt((function(){n.delete()}))),null!==e&&e.push(this.W,i)}break;default:nt("Unsupporting sharing policy")}return i}function Ht(e,t){return null===t?(this.Na&&nt(`null is not a valid ${this.name}`),0):(t.g||nt(`Cannot pass "${ii(t)}" as a ${this.name}`),t.g.o||nt(`Cannot pass deleted object as a pointer of type ${this.name}`),t.g.u.ta&&nt(`Cannot convert argument of type ${t.g.u.name} to parameter type ${this.name}`),Ft(t.g.o,t.g.u.i,this.i))}function $t(e,t,i,n){this.name=e,this.i=t,this.Na=i,this.ta=n,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,void 0!==t.A?this.toWireType=Vt:(this.toWireType=n?Ut:Ht,this.K=null)}function Wt(e,t,i){s.hasOwnProperty(e)||Tt("Replacing nonexistant public symbol"),void 0!==s[e].B&&void 0!==i?s[e].B[i]=t:(s[e]=t,s[e].ea=i)}var Gt=[],Yt=e=>{var t=Gt[e];return t||(e>=Gt.length&&(Gt.length=e+1),Gt[e]=t=M.get(e)),t};function Xt(e,t){var i=(e=ct(e)).includes("j")?((e,t)=>{var i=[];return function(){if(i.length=0,Object.assign(i,arguments),e.includes("j")){var n=s["dynCall_"+e];n=i&&i.length?n.apply(null,[t].concat(i)):n.call(null,t)}else n=Yt(t).apply(null,i);return n}})(e,t):Yt(t);return"function"!=typeof i&&nt(`unknown function pointer with signature ${e}: ${t}`),i}var Kt=void 0;function qt(e,t){var i=[],n={};throw t.forEach((function e(t){n[t]||gt[t]||(Lt[t]?Lt[t].forEach(e):(i.push(t),n[t]=!0))})),new Kt(`${e}: `+i.map(ft).join([", "]))}function Jt(e,t,i,n,s){var r=t.length;2>r&&nt("argTypes array size mismatch! Must at least get return value and 'this' types!");var o=null!==t[1]&&null!==i,a=!1;for(i=1;i<t.length;++i)if(null!==t[i]&&void 0===t[i].K){a=!0;break}var l="void"!==t[0].name,c=r-2,u=Array(c),d=[],h=[];return function(){if(arguments.length!==c&&nt(`function ${e} called with ${arguments.length} arguments, expected ${c} args!`),h.length=0,d.length=o?2:1,d[0]=s,o){var i=t[1].toWireType(h,this);d[1]=i}for(var r=0;r<c;++r)u[r]=t[r+2].toWireType(h,arguments[r]),d.push(u[r]);if(r=n.apply(null,d),a)Pt(h);else for(var p=o?1:2;p<t.length;p++){var m=1===p?i:u[p-2];null!==t[p].K&&t[p].K(m)}return i=l?t[0].fromWireType(r):void 0}}function Qt(e,t){for(var i=[],n=0;n<e;n++)i.push(P[t+4*n>>2]);return i}function Zt(e,t,i){return e instanceof Object||nt(`${i} with invalid "this": ${e}`),e instanceof t.i.constructor||nt(`${i} incompatible with "this" of type ${e.constructor.name}`),e.g.o||nt(`cannot call emscripten binding method ${i} on deleted object`),Ft(e.g.o,e.g.u.i,t.i)}function ei(e){e>=tt.h&&0==--tt.get(e).tb&&tt.Zb(e)}function ti(e,t,i){switch(t){case 0:return function(e){return this.fromWireType((i?E:T)[e])};case 1:return function(e){return this.fromWireType((i?x:C)[e>>1])};case 2:return function(e){return this.fromWireType((i?I:P)[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function ii(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function ni(e,t){switch(t){case 2:return function(e){return this.fromWireType(A[e>>2])};case 3:return function(e){return this.fromWireType(k[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function si(e,t,i){switch(t){case 0:return i?function(e){return E[e]}:function(e){return T[e]};case 1:return i?function(e){return x[e>>1]}:function(e){return C[e>>1]};case 2:return i?function(e){return I[e>>2]}:function(e){return P[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var ri="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,oi=(e,t)=>{for(var i=e>>1,n=i+t/2;!(i>=n)&&C[i];)++i;if(32<(i<<=1)-e&&ri)return ri.decode(T.subarray(e,i));for(i="",n=0;!(n>=t/2);++n){var s=x[e+2*n>>1];if(0==s)break;i+=String.fromCharCode(s)}return i},ai=(e,t,i)=>{if(void 0===i&&(i=2147483647),2>i)return 0;var n=t;i=(i-=2)<2*e.length?i/2:e.length;for(var s=0;s<i;++s)x[t>>1]=e.charCodeAt(s),t+=2;return x[t>>1]=0,t-n},li=e=>2*e.length,ci=(e,t)=>{for(var i=0,n="";!(i>=t/4);){var s=I[e+4*i>>2];if(0==s)break;++i,65536<=s?(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s)):n+=String.fromCharCode(s)}return n},ui=(e,t,i)=>{if(void 0===i&&(i=2147483647),4>i)return 0;var n=t;i=n+i-4;for(var s=0;s<e.length;++s){var r=e.charCodeAt(s);if(55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++s)),I[t>>2]=r,(t+=4)+4>i)break}return I[t>>2]=0,t-n},di=e=>{for(var t=0,i=0;i<e.length;++i){var n=e.charCodeAt(i);55296<=n&&57343>=n&&++i,t+=4}return t},hi={};function pi(e){var t=hi[e];return void 0===t?ct(e):t}var mi,gi=[],fi=[],vi=[],bi={},yi=()=>{if(!mi){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(e in bi)void 0===bi[e]?delete t[e]:t[e]=bi[e];var i=[];for(e in t)i.push(`${e}=${t[e]}`);mi=i}return mi},_i=e=>0==e%4&&(0!=e%100||0==e%400),wi=[31,29,31,30,31,30,31,31,30,31,30,31],Si=[31,28,31,30,31,30,31,31,30,31,30,31];function Ei(e,t,i,n){e||(e=this),this.parent=e,this.U=e.U,this.wa=null,this.id=Ee++,this.name=t,this.mode=i,this.l={},this.m={},this.za=n}Object.defineProperties(Ei.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),Ye(),Te=Array(4096),Fe(ye,"/"),Ue("/tmp",16895,0),Ue("/home",16895,0),Ue("/home/web_user",16895,0),(()=>{Ue("/dev",16895,0),Ne(259,{read:()=>0,write:(e,t,i,n)=>n}),Ve("/dev/null",259),ue(1280,he),ue(1536,pe),Ve("/dev/tty",1280),Ve("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,i=()=>(0===t&&(t=te(e).byteLength),e[--t]);Xe("random",i),Xe("urandom",i),Ue("/dev/shm",16895,0),Ue("/dev/shm/tmp",16895,0)})(),(()=>{Ue("/proc",16895,0);var e=Ue("/proc/self",16895,0);Ue("/proc/self/fd",16895,0),Fe({U:()=>{var t=De(e,"fd",16895,73);return t.l={ka:(e,t)=>{var i=Oe(+t);return(e={parent:null,U:{mb:"fake"},l:{ma:()=>i.path}}).parent=e}},t}},"/proc/self/fd")})(),Object.assign(et.prototype,{get(e){return this.M[e]},has(e){return void 0!==this.M[e]},pa(e){var t=this.hb.pop()||this.M.length;return this.M[t]=e,t},Zb(e){this.M[e]=void 0,this.hb.push(e)}}),it=s.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},tt.M.push({value:void 0},{value:null},{value:!0},{value:!1}),tt.h=tt.M.length,s.count_emval_handles=function(){for(var e=0,t=tt.h;t<tt.M.length;++t)void 0!==tt.M[t]&&++e;return e},at=s.PureVirtualError=ot("PureVirtualError");for(var Ti=Array(256),xi=0;256>xi;++xi)Ti[xi]=String.fromCharCode(xi);lt=Ti,s.getInheritedInstanceCount=function(){return Object.keys(pt).length},s.getLiveInheritedInstances=function(){var e,t=[];for(e in pt)pt.hasOwnProperty(e)&&t.push(pt[e]);return t},s.flushPendingDeletes=dt,s.setDelayFunction=function(e){ht=e,ut.length&&ht&&ht(dt)},Et=s.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Ot.prototype.isAliasOf=function(e){if(!(this instanceof Ot&&e instanceof Ot))return!1;var t=this.g.u.i,i=this.g.o,n=e.g.u.i;for(e=e.g.o;t.A;)i=t.na(i),t=t.A;for(;n.A;)e=n.na(e),n=n.A;return t===n&&i===e},Ot.prototype.clone=function(){if(this.g.o||Bt(this),this.g.ia)return this.g.count.value+=1,this;var e=Ct,t=Object,i=t.create,n=Object.getPrototypeOf(this),s=this.g;return(e=e(i.call(t,n,{g:{value:{count:s.count,fa:s.fa,ia:s.ia,o:s.o,u:s.u,G:s.G,L:s.L}}}))).g.count.value+=1,e.g.fa=!1,e},Ot.prototype.delete=function(){this.g.o||Bt(this),this.g.fa&&!this.g.ia&&nt("Object already scheduled for deletion"),bt(this),_t(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},Ot.prototype.isDeleted=function(){return!this.g.o},Ot.prototype.deleteLater=function(){return this.g.o||Bt(this),this.g.fa&&!this.g.ia&&nt("Object already scheduled for deletion"),ut.push(this),1===ut.length&&ht&&ht(dt),this.g.fa=!0,this},$t.prototype.Vb=function(e){return this.rb&&(e=this.rb(e)),e},$t.prototype.ab=function(e){this.W&&this.W(e)},$t.prototype.argPackAdvance=8,$t.prototype.readValueFromPointer=At,$t.prototype.deleteObject=function(e){null!==e&&e.delete()},$t.prototype.fromWireType=function(e){function t(){return this.ua?xt(this.i.N,{u:this.nc,o:i,L:this,G:e}):xt(this.i.N,{u:this,o:e})}var i=this.Vb(e);if(!i)return this.ab(e),null;var n=function(e,t){return t=mt(e,t),pt[t]}(this.i,i);if(void 0!==n)return 0===n.g.count.value?(n.g.o=i,n.g.G=e,n.clone()):(n=n.clone(),this.ab(e),n);if(n=this.i.Ub(i),!(n=St[n]))return t.call(this);n=this.ta?n.Kb:n.pointerType;var s=wt(i,this.i,n.i);return null===s?t.call(this):this.ua?xt(n.i.N,{u:n,o:s,L:this,G:e}):xt(n.i.N,{u:n,o:s})},Kt=s.UnboundTypeError=ot("UnboundTypeError");var Ci={__syscall_fcntl64:function(e,t,i){qe=i;try{var n=Oe(e);switch(t){case 0:var s=Je();return 0>s?-28:Re(n,s).X;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:return s=Je(),n.flags|=s,0;case 5:return s=Je(),x[s+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return I[Mi()>>2]=28,-1}}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return-e.aa}},__syscall_ioctl:function(e,t,i){qe=i;try{var n=Oe(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return n.s?0:-59;case 21505:if(!n.s)return-59;if(n.s.V.bc){t=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var s=Je();I[s>>2]=25856,I[s+4>>2]=5,I[s+8>>2]=191,I[s+12>>2]=35387;for(var r=0;32>r;r++)E[s+r+17|0]=t[r]||0}return 0;case 21506:case 21507:case 21508:if(!n.s)return-59;if(n.s.V.cc)for(s=Je(),t=[],r=0;32>r;r++)t.push(E[s+r+17|0]);return 0;case 21519:return n.s?(s=Je(),I[s>>2]=0):-59;case 21520:return n.s?-28:-59;case 21531:if(s=Je(),!n.m.ac)throw new Ce(59);return n.m.ac(n,t,s);case 21523:return n.s?(n.s.V.dc&&(r=[24,80],s=Je(),x[s>>1]=r[0],x[s+2>>1]=r[1]),0):-59;default:return-28}}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return-e.aa}},__syscall_openat:function(e,t,i,n){qe=n;try{var s=t=t?se(T,t):"";if("/"===s.charAt(0))t=s;else{var r=-100===e?"/":Oe(e).path;if(0==s.length)throw new Ce(44);t=Q(r+"/"+s)}var o=n?Je():0;return We(t,i,o).X}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return-e.aa}},_embind_create_inheriting_constructor:function(e,t,i){e=ct(e),t=vt(t,"wrapper"),i=st(i);var n=[].slice,s=t.i,r=s.N,o=s.A.N,a=s.A.constructor;for(var l in e=Ze(e,(function(){s.A.qb.forEach(function(e){if(this[e]===o[e])throw new at(`Pure virtual function ${e} must be implemented in JavaScript`)}.bind(this)),Object.defineProperty(this,"__parent",{value:r}),this.__construct.apply(this,n.call(arguments))})),r.__construct=function(){this===r&&nt("Pass correct 'this' to __construct");var e=a.implement.apply(void 0,[this].concat(n.call(arguments)));bt(e);var t=e.g;e.notifyOnDestruction(),t.ia=!0,Object.defineProperties(this,{g:{value:t}}),Ct(this),e=t.o,e=mt(s,e),pt.hasOwnProperty(e)?nt(`Tried to register registered instance: ${e}`):pt[e]=this},r.__destruct=function(){this===r&&nt("Pass correct 'this' to __destruct"),bt(this);var e=this.g.o;e=mt(s,e),pt.hasOwnProperty(e)?delete pt[e]:nt(`Tried to unregister unregistered instance: ${e}`)},e.prototype=Object.create(r),i)e.prototype[l]=i[l];return rt(e)},_embind_finalize_value_object:function(e){var t=It[e];delete It[e];var i=t.Pa,n=t.W,s=t.eb;Dt([e],s.map((e=>e.Yb)).concat(s.map((e=>e.rc))),(e=>{var r={};return s.forEach(((t,i)=>{var n=e[i],o=t.Wb,a=t.Xb,l=e[i+s.length],c=t.qc,u=t.sc;r[t.Sb]={read:e=>n.fromWireType(o(a,e)),write:(e,t)=>{var i=[];c(u,e,l.toWireType(i,t)),Pt(i)}}})),[{name:t.name,fromWireType:function(e){var t,i={};for(t in r)i[t]=r[t].read(e);return n(e),i},toWireType:function(e,t){for(var s in r)if(!(s in t))throw new TypeError(`Missing field: "${s}"`);var o=i();for(s in r)r[s].write(o,t[s]);return null!==e&&e.push(n,o),o},argPackAdvance:8,readValueFromPointer:At,K:n}]}))},_embind_register_bigint:function(){},_embind_register_bool:function(e,t,i,n,s){var r=Mt(i);jt(e,{name:t=ct(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:s},argPackAdvance:8,readValueFromPointer:function(e){if(1===i)var n=E;else if(2===i)n=x;else{if(4!==i)throw new TypeError("Unknown boolean type size: "+t);n=I}return this.fromWireType(n[e>>r])},K:null})},_embind_register_class:function(e,t,i,n,s,r,o,a,l,c,u,d,h){u=ct(u),r=Xt(s,r),a&&(a=Xt(o,a)),c&&(c=Xt(l,c)),h=Xt(d,h);var p=Qe(u);zt(p,(function(){qt(`Cannot construct ${u} due to unbound types`,[n])})),Dt([e,t,i],n?[n]:[],(function(t){if(t=t[0],n)var i=t.i,s=i.N;else s=Ot.prototype;t=Ze(p,(function(){if(Object.getPrototypeOf(this)!==o)throw new it("Use 'new' to construct "+u);if(void 0===l.$)throw new it(u+" has no accessible constructor");var e=l.$[arguments.length];if(void 0===e)throw new it(`Tried to invoke ctor of ${u} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(l.$).toString()}) parameters instead!`);return e.apply(this,arguments)}));var o=Object.create(s,{constructor:{value:t}});t.prototype=o;var l=new Nt(u,t,o,h,i,r,a,c);l.A&&(void 0===l.A.oa&&(l.A.oa=[]),l.A.oa.push(l)),i=new $t(u,l,!0,!1),s=new $t(u+"*",l,!1,!1);var d=new $t(u+" const*",l,!1,!0);return St[e]={pointerType:s,Kb:d},Wt(p,t),[i,s,d]}))},_embind_register_class_class_function:function(e,t,i,n,s,r,o){var a=Qt(i,n);t=ct(t),r=Xt(s,r),Dt([],[e],(function(e){function n(){qt(`Cannot call ${s} due to unbound types`,a)}var s=`${(e=e[0]).name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var l=e.i.constructor;return void 0===l[t]?(n.ea=i-1,l[t]=n):(Rt(l,t,s),l[t].B[i-1]=n),Dt([],a,(function(n){if(n=Jt(s,[n[0],null].concat(n.slice(1)),null,r,o),void 0===l[t].B?(n.ea=i-1,l[t]=n):l[t].B[i-1]=n,e.i.oa)for(const i of e.i.oa)i.constructor.hasOwnProperty(t)||(i.constructor[t]=n);return[]})),[]}))},_embind_register_class_class_property:function(e,t,i,n,s,r,o,a){t=ct(t),r=Xt(s,r),Dt([],[e],(function(e){var s=`${(e=e[0]).name}.${t}`,l={get(){qt(`Cannot access ${s} due to unbound types`,[i])},enumerable:!0,configurable:!0};return l.set=a?()=>{qt(`Cannot access ${s} due to unbound types`,[i])}:()=>{nt(`${s} is a read-only property`)},Object.defineProperty(e.i.constructor,t,l),Dt([],[i],(function(i){i=i[0];var s={get:()=>i.fromWireType(r(n)),enumerable:!0};return a&&(a=Xt(o,a),s.set=e=>{var t=[];a(n,i.toWireType(t,e)),Pt(t)}),Object.defineProperty(e.i.constructor,t,s),[]})),[]}))},_embind_register_class_constructor:function(e,t,i,n,s,r){var o=Qt(t,i);s=Xt(n,s),Dt([],[e],(function(e){var i=`constructor ${(e=e[0]).name}`;if(void 0===e.i.$&&(e.i.$=[]),void 0!==e.i.$[t-1])throw new it(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.i.$[t-1]=()=>{qt(`Cannot construct ${e.name} due to unbound types`,o)},Dt([],o,(function(n){return n.splice(1,0,null),e.i.$[t-1]=Jt(i,n,null,s,r),[]})),[]}))},_embind_register_class_function:function(e,t,i,n,s,r,o,a){var l=Qt(i,n);t=ct(t),r=Xt(s,r),Dt([],[e],(function(e){function n(){qt(`Cannot call ${s} due to unbound types`,l)}var s=`${(e=e[0]).name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),a&&e.i.qb.push(t);var c=e.i.N,u=c[t];return void 0===u||void 0===u.B&&u.className!==e.name&&u.ea===i-2?(n.ea=i-2,n.className=e.name,c[t]=n):(Rt(c,t,s),c[t].B[i-2]=n),Dt([],l,(function(n){return n=Jt(s,n,e,r,o),void 0===c[t].B?(n.ea=i-2,c[t]=n):c[t].B[i-2]=n,[]})),[]}))},_embind_register_class_property:function(e,t,i,n,s,r,o,a,l,c){t=ct(t),s=Xt(n,s),Dt([],[e],(function(e){var n=`${(e=e[0]).name}.${t}`,u={get(){qt(`Cannot access ${n} due to unbound types`,[i,o])},enumerable:!0,configurable:!0};return u.set=l?()=>{qt(`Cannot access ${n} due to unbound types`,[i,o])}:()=>{nt(n+" is a read-only property")},Object.defineProperty(e.i.N,t,u),Dt([],l?[i,o]:[i],(function(i){var o=i[0],u={get(){var t=Zt(this,e,n+" getter");return o.fromWireType(s(r,t))},enumerable:!0};if(l){l=Xt(a,l);var d=i[1];u.set=function(t){var i=Zt(this,e,n+" setter"),s=[];l(c,i,d.toWireType(s,t)),Pt(s)}}return Object.defineProperty(e.i.N,t,u),[]})),[]}))},_embind_register_emval:function(e,t){jt(e,{name:t=ct(t),fromWireType:function(e){var t=st(e);return ei(e),t},toWireType:function(e,t){return rt(t)},argPackAdvance:8,readValueFromPointer:At,K:null})},_embind_register_enum:function(e,t,i,n){function s(){}i=Mt(i),t=ct(t),s.values={},jt(e,{name:t,constructor:s,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:ti(t,i,n),K:null}),zt(t,s)},_embind_register_enum_value:function(e,t,i){var n=vt(e,"enum");t=ct(t),e=n.constructor,n=Object.create(n.constructor.prototype,{value:{value:i},constructor:{value:Ze(`${n.name}_${t}`,(function(){}))}}),e.values[i]=n,e[t]=n},_embind_register_float:function(e,t,i){i=Mt(i),jt(e,{name:t=ct(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:ni(t,i),K:null})},_embind_register_function:function(e,t,i,n,s,r){var o=Qt(t,i);e=ct(e),s=Xt(n,s),zt(e,(function(){qt(`Cannot call ${e} due to unbound types`,o)}),t-1),Dt([],o,(function(i){return Wt(e,Jt(e,[i[0],null].concat(i.slice(1)),null,s,r),t-1),[]}))},_embind_register_integer:function(e,t,i,n,s){t=ct(t),-1===s&&(s=4294967295),s=Mt(i);var r=e=>e;if(0===n){var o=32-8*i;r=e=>e<<o>>>o}i=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},jt(e,{name:t,fromWireType:r,toWireType:i,argPackAdvance:8,readValueFromPointer:si(t,s,0!==n),K:null})},_embind_register_memory_view:function(e,t,i){function n(e){e>>=2;var t=P;return new s(t.buffer,t[e+1],t[e])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];jt(e,{name:i=ct(i),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{$b:!0})},_embind_register_std_string:function(e,t){var i="std::string"===(t=ct(t));jt(e,{name:t,fromWireType:function(e){var t=P[e>>2],n=e+4;if(i)for(var s=n,r=0;r<=t;++r){var o=n+r;if(r==t||0==T[o]){if(s=s?se(T,s,o-s):"",void 0===a)var a=s;else a+=String.fromCharCode(0),a+=s;s=o+1}}else{for(a=Array(t),r=0;r<t;++r)a[r]=String.fromCharCode(T[n+r]);a=a.join("")}return Ii(e),a},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||nt("Cannot pass non-string to std::string");var s=i&&n?oe(t):t.length,r=Pi(4+s+1),o=r+4;if(P[r>>2]=s,i&&n)ae(t,T,o,s+1);else if(n)for(n=0;n<s;++n){var a=t.charCodeAt(n);255<a&&(Ii(o),nt("String has UTF-16 code units that do not fit in 8 bits")),T[o+n]=a}else for(n=0;n<s;++n)T[o+n]=t[n];return null!==e&&e.push(Ii,r),r},argPackAdvance:8,readValueFromPointer:At,K:function(e){Ii(e)}})},_embind_register_std_wstring:function(e,t,i){if(i=ct(i),2===t)var n=oi,s=ai,r=li,o=()=>C,a=1;else 4===t&&(n=ci,s=ui,r=di,o=()=>P,a=2);jt(e,{name:i,fromWireType:function(e){for(var i,s=P[e>>2],r=o(),l=e+4,c=0;c<=s;++c){var u=e+4+c*t;c!=s&&0!=r[u>>a]||(l=n(l,u-l),void 0===i?i=l:(i+=String.fromCharCode(0),i+=l),l=u+t)}return Ii(e),i},toWireType:function(e,n){"string"!=typeof n&&nt(`Cannot pass non-string to C++ string type ${i}`);var o=r(n),l=Pi(4+o+t);return P[l>>2]=o>>a,s(n,l+4,o+t),null!==e&&e.push(Ii,l),l},argPackAdvance:8,readValueFromPointer:At,K:function(e){Ii(e)}})},_embind_register_value_object:function(e,t,i,n,s,r){It[e]={name:ct(t),Pa:Xt(i,n),W:Xt(s,r),eb:[]}},_embind_register_value_object_field:function(e,t,i,n,s,r,o,a,l,c){It[e].eb.push({Sb:ct(t),Yb:i,Wb:Xt(n,s),Xb:r,rc:o,qc:Xt(a,l),sc:c})},_embind_register_void:function(e,t){jt(e,{fc:!0,name:t=ct(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(e,t,i){e=st(e),t=vt(t,"emval::as");var n=[],s=rt(n);return P[i>>2]=s,t.toWireType(n,e)},_emval_call_method:function(e,t,i,n,s){e=gi[e],t=st(t),i=pi(i);var r=[];return P[n>>2]=rt(r),e(t,i,r,s)},_emval_call_void_method:function(e,t,i,n){(e=gi[e])(t=st(t),i=pi(i),null,n)},_emval_decref:ei,_emval_get_method_caller:function(e,t){var i=function(e,t){for(var i=Array(e),n=0;n<e;++n)i[n]=vt(P[t+4*n>>2],"parameter "+n);return i}(e,t),n=i[0];t=n.name+"_$"+i.slice(1).map((function(e){return e.name})).join("_")+"$";var s=fi[t];if(void 0!==s)return s;var r=Array(e-1);return s=function(e){var t=gi.length;return gi.push(e),t}(((t,s,o,a)=>{for(var l=0,c=0;c<e-1;++c)r[c]=i[c+1].readValueFromPointer(a+l),l+=i[c+1].argPackAdvance;for(t=t[s].apply(t,r),c=0;c<e-1;++c)i[c+1].Nb&&i[c+1].Nb(r[c]);if(!n.fc)return n.toWireType(o,t)})),fi[t]=s},_emval_get_module_property:function(e){return e=pi(e),rt(s[e])},_emval_get_property:function(e,t){return e=st(e),t=st(t),rt(e[t])},_emval_incref:function(e){4<e&&(tt.get(e).tb+=1)},_emval_new_cstring:function(e){return rt(pi(e))},_emval_new_object:function(){return rt({})},_emval_run_destructors:function(e){Pt(st(e)),ei(e)},_emval_set_property:function(e,t,i){e=st(e),t=st(t),i=st(i),e[t]=i},_emval_take_value:function(e,t){return e=(e=vt(e,"_emval_take_value")).readValueFromPointer(t),rt(e)},abort:()=>{V("")},emscripten_asm_const_int:(e,t,i)=>{var n;for(vi.length=0,i>>=2;n=T[t++];)i+=105!=n&i,vi.push(105==n?I[i]:k[i++>>1]),++i;return K[e].apply(null,vi)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(e,t,i)=>T.copyWithin(e,t,t+i),emscripten_resize_heap:e=>{var t=T.length;if(2147483648<(e>>>=0))return!1;for(var i=1;4>=i;i*=2){var n=t*(1+.2/i);n=Math.min(n,e+100663296);var s=Math;n=Math.max(e,n);e:{s=s.min.call(s,2147483648,n+(65536-n%65536)%65536)-w.buffer.byteLength+65535>>>16;try{w.grow(s),D();var r=1;break e}catch(e){}r=void 0}if(r)return!0}return!1},environ_get:(e,t)=>{var i=0;return yi().forEach((function(n,s){var r=t+i;for(s=P[e+4*s>>2]=r,r=0;r<n.length;++r)E[0|s++]=n.charCodeAt(r);E[0|s]=0,i+=n.length+1})),0},environ_sizes_get:(e,t)=>{var i=yi();P[e>>2]=i.length;var n=0;return i.forEach((function(e){n+=e.length+1})),P[t>>2]=n,0},fd_close:function(e){try{var t=Oe(e);if(null===t.X)throw new Ce(8);t.Ma&&(t.Ma=null);try{t.m.close&&t.m.close(t)}catch(e){throw e}finally{Se[t.X]=null}return t.X=null,0}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return e.aa}},fd_read:function(e,t,i,n){try{e:{var s=Oe(e);e=t;for(var r,o=t=0;o<i;o++){var a=P[e>>2],l=P[e+4>>2];e+=8;var c=s,u=a,d=l,h=r,p=E;if(0>d||0>h)throw new Ce(28);if(null===c.X)throw new Ce(8);if(1==(2097155&c.flags))throw new Ce(8);if(16384==(61440&c.node.mode))throw new Ce(31);if(!c.m.read)throw new Ce(28);var m=void 0!==h;if(m){if(!c.seekable)throw new Ce(70)}else h=c.position;var g=c.m.read(c,p,u,d,h);m||(c.position+=g);var f=g;if(0>f){var v=-1;break e}if(t+=f,f<l)break;void 0!==r&&(r+=f)}v=t}return P[n>>2]=v,0}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return e.aa}},fd_seek:function(e,t,i,n,s){t=i+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*i:NaN;try{if(isNaN(t))return 61;var r=Oe(e);return Ge(r,t,n),X=[r.position>>>0,(Y=r.position,1<=+Math.abs(Y)?0<Y?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],I[s>>2]=X[0],I[s+4>>2]=X[1],r.Ma&&0===t&&0===n&&(r.Ma=null),0}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return e.aa}},fd_write:function(e,t,i,n){try{e:{var s=Oe(e);e=t;for(var r,o=t=0;o<i;o++){var a=P[e>>2],l=P[e+4>>2];e+=8;var c=s,u=a,d=l,h=r,p=E;if(0>d||0>h)throw new Ce(28);if(null===c.X)throw new Ce(8);if(!(2097155&c.flags))throw new Ce(8);if(16384==(61440&c.node.mode))throw new Ce(31);if(!c.m.write)throw new Ce(28);c.seekable&&1024&c.flags&&Ge(c,0,2);var m=void 0!==h;if(m){if(!c.seekable)throw new Ce(70)}else h=c.position;var g=c.m.write(c,p,u,d,h,void 0);m||(c.position+=g);var f=g;if(0>f){var v=-1;break e}t+=f,void 0!==r&&(r+=f)}v=t}return P[n>>2]=v,0}catch(e){if(void 0===Ke||"ErrnoError"!==e.name)throw e;return e.aa}},strftime_l:(e,t,i,n)=>((e,t,i,n)=>{function s(e,t,i){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=i[0]+e;return e}function r(e,t){return s(e,t,"0")}function o(e,t){function i(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=i(e.getFullYear()-t.getFullYear()))&&0===(n=i(e.getMonth()-t.getMonth()))&&(n=i(e.getDate()-t.getDate())),n}function a(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function l(e){var t=e.ca;for(e=new Date(new Date(e.da+1900,0,1).getTime());0<t;){var i=e.getMonth(),n=(_i(e.getFullYear())?wi:Si)[i];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>i?e.setMonth(i+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return i=new Date(e.getFullYear()+1,0,4),t=a(new Date(e.getFullYear(),0,4)),i=a(i),0>=o(t,e)?0>=o(i,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var c=I[n+40>>2];for(var u in n={wc:I[n>>2],vc:I[n+4>>2],Fa:I[n+8>>2],Sa:I[n+12>>2],Ga:I[n+16>>2],da:I[n+20>>2],R:I[n+24>>2],ca:I[n+28>>2],Rc:I[n+32>>2],uc:I[n+36>>2],xc:c&&c?se(T,c):""},i=i?se(T,i):"",c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})i=i.replace(new RegExp(u,"g"),c[u]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" ");for(u in c={"%a":e=>d[e.R].substring(0,3),"%A":e=>d[e.R],"%b":e=>h[e.Ga].substring(0,3),"%B":e=>h[e.Ga],"%C":e=>r((e.da+1900)/100|0,2),"%d":e=>r(e.Sa,2),"%e":e=>s(e.Sa,2," "),"%g":e=>l(e).toString().substring(2),"%G":e=>l(e),"%H":e=>r(e.Fa,2),"%I":e=>(0==(e=e.Fa)?e=12:12<e&&(e-=12),r(e,2)),"%j":e=>{for(var t=0,i=0;i<=e.Ga-1;t+=(_i(e.da+1900)?wi:Si)[i++]);return r(e.Sa+t,3)},"%m":e=>r(e.Ga+1,2),"%M":e=>r(e.vc,2),"%n":()=>"\n","%p":e=>0<=e.Fa&&12>e.Fa?"AM":"PM","%S":e=>r(e.wc,2),"%t":()=>"\t","%u":e=>e.R||7,"%U":e=>r(Math.floor((e.ca+7-e.R)/7),2),"%V":e=>{var t=Math.floor((e.ca+7-(e.R+6)%7)/7);if(2>=(e.R+371-e.ca-2)%7&&t++,t)53==t&&(4==(i=(e.R+371-e.ca)%7)||3==i&&_i(e.da)||(t=1));else{t=52;var i=(e.R+7-e.ca-1)%7;(4==i||5==i&&_i(e.da%400-1))&&t++}return r(t,2)},"%w":e=>e.R,"%W":e=>r(Math.floor((e.ca+7-(e.R+6)%7)/7),2),"%y":e=>(e.da+1900).toString().substring(2),"%Y":e=>e.da+1900,"%z":e=>{var t=0<=(e=e.uc);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.xc,"%%":()=>"%"},i=i.replace(/%%/g,"\0\0"),c)i.includes(u)&&(i=i.replace(new RegExp(u,"g"),c[u](n)));return(u=le(i=i.replace(/\0\0/g,"%"),!1)).length>t?0:(E.set(u,e),u.length-1)})(e,t,i,n)};!function(){function e(e){if(S=e=e.exports,w=S.memory,D(),M=S.__indirect_function_table,B.unshift(S.__wasm_call_ctors),N--,s.monitorRunDependencies&&s.monitorRunDependencies(N),0==N&&(null!==F&&(clearInterval(F),F=null),U)){var t=U;U=null,t()}return e}var t={env:Ci,wasi_snapshot_preview1:Ci};if(N++,s.monitorRunDependencies&&s.monitorRunDependencies(N),s.instantiateWasm)try{return s.instantiateWasm(t,e)}catch(e){_("Module.instantiateWasm callback failed with error: "+e),i(e)}(function(e,t){var i=z;return b||"function"!=typeof WebAssembly.instantiateStreaming||H(i)||i.startsWith("file://")||"function"!=typeof fetch?G(i,e,t):fetch(i,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return _("wasm streaming compile failed: "+n),_("falling back to ArrayBuffer instantiation"),G(i,e,t)}))))})(t,(function(t){e(t.instance)})).catch(i)}();var Ii=e=>(Ii=S.free)(e),Pi=e=>(Pi=S.malloc)(e),Ai=s._ma_device__on_notification_unlocked=e=>(Ai=s._ma_device__on_notification_unlocked=S.ma_device__on_notification_unlocked)(e);s._ma_malloc_emscripten=(e,t)=>(s._ma_malloc_emscripten=S.ma_malloc_emscripten)(e,t),s._ma_free_emscripten=(e,t)=>(s._ma_free_emscripten=S.ma_free_emscripten)(e,t);var ki,Li=s._ma_device_process_pcm_frames_capture__webaudio=(e,t,i)=>(Li=s._ma_device_process_pcm_frames_capture__webaudio=S.ma_device_process_pcm_frames_capture__webaudio)(e,t,i),Di=s._ma_device_process_pcm_frames_playback__webaudio=(e,t,i)=>(Di=s._ma_device_process_pcm_frames_playback__webaudio=S.ma_device_process_pcm_frames_playback__webaudio)(e,t,i),Mi=()=>(Mi=S.__errno_location)(),ji=e=>(ji=S.__getTypeName)(e);function Bi(){function e(){if(!ki&&(ki=!0,s.calledRun=!0,!L)){if(s.noFSInit||ge||(ge=!0,Ye(),s.stdin=s.stdin,s.stdout=s.stdout,s.stderr=s.stderr,s.stdin?Xe("stdin",s.stdin):He("/dev/tty","/dev/stdin"),s.stdout?Xe("stdout",null,s.stdout):He("/dev/tty","/dev/stdout"),s.stderr?Xe("stderr",null,s.stderr):He("/dev/tty1","/dev/stderr"),We("/dev/stdin",0),We("/dev/stdout",1),We("/dev/stderr",1)),xe=!1,q(B),t(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;){var e=s.postRun.shift();O.unshift(e)}q(O)}}if(!(0<N)){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)R();q(j),0<N||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),e()}),1)):e())}}if(s.__embind_initialize_bindings=()=>(s.__embind_initialize_bindings=S._embind_initialize_bindings)(),s.dynCall_iiji=(e,t,i,n,r)=>(s.dynCall_iiji=S.dynCall_iiji)(e,t,i,n,r),s.dynCall_jiji=(e,t,i,n,r)=>(s.dynCall_jiji=S.dynCall_jiji)(e,t,i,n,r),s.dynCall_iiiji=(e,t,i,n,r,o)=>(s.dynCall_iiiji=S.dynCall_iiiji)(e,t,i,n,r,o),s.dynCall_iij=(e,t,i,n)=>(s.dynCall_iij=S.dynCall_iij)(e,t,i,n),s.dynCall_jii=(e,t,i)=>(s.dynCall_jii=S.dynCall_jii)(e,t,i),s.dynCall_viijii=(e,t,i,n,r,o,a)=>(s.dynCall_viijii=S.dynCall_viijii)(e,t,i,n,r,o,a),s.dynCall_iiiiij=(e,t,i,n,r,o,a)=>(s.dynCall_iiiiij=S.dynCall_iiiiij)(e,t,i,n,r,o,a),s.dynCall_iiiiijj=(e,t,i,n,r,o,a,l,c)=>(s.dynCall_iiiiijj=S.dynCall_iiiiijj)(e,t,i,n,r,o,a,l,c),s.dynCall_iiiiiijj=(e,t,i,n,r,o,a,l,c,u)=>(s.dynCall_iiiiiijj=S.dynCall_iiiiiijj)(e,t,i,n,r,o,a,l,c,u),U=function e(){ki||Bi(),ki||(U=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return Bi(),e.ready});const r=s},e=>{e.exports=JSON.parse('{"name":"@rive-app/canvas","version":"2.25.1","description":"Rive\'s canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}')},(e,t,i)=>{i.r(t),i.d(t,{Animation:()=>n.Animation});var n=i(4)},(e,t,i)=>{i.r(t),i.d(t,{Animation:()=>n});var n=function(){function e(e,t,i,n){this.animation=e,this.artboard=t,this.playing=n,this.loopCount=0,this.scrubTo=null,this.instance=new i.LinearAnimationInstance(e,t)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this.instance.time},set:function(e){this.instance.time=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needsScrub",{get:function(){return null!==this.scrubTo},enumerable:!1,configurable:!0}),e.prototype.advance=function(e){null===this.scrubTo?this.instance.advance(e):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},e.prototype.apply=function(e){this.instance.apply(e)},e.prototype.cleanup=function(){this.instance.delete()},e}()},(e,t,i)=>{i.r(t),i.d(t,{BLANK_URL:()=>s.BLANK_URL,registerTouchInteractions:()=>n.registerTouchInteractions,sanitizeUrl:()=>s.sanitizeUrl});var n=i(6),s=i(7)},(e,t,i)=>{i.r(t),i.d(t,{registerTouchInteractions:()=>n});var n=function(e){var t=e.canvas,i=e.artboard,n=e.stateMachines,s=void 0===n?[]:n,r=e.renderer,o=e.rive,a=e.fit,l=e.alignment,c=e.isTouchScrollEnabled,u=void 0!==c&&c,d=e.layoutScaleFactor,h=void 0===d?1:d;if(!(t&&s.length&&r&&o&&i&&"undefined"!=typeof window))return null;var p=null,m=!1,g=function(e){if(m&&e instanceof MouseEvent)"mouseup"==e.type&&(m=!1);else{m=u&&"touchend"===e.type&&"touchstart"===p,p=e.type;var t=e.currentTarget.getBoundingClientRect(),n=function(e,t){var i,n;return["touchstart","touchmove"].indexOf(e.type)>-1&&(null===(i=e.touches)||void 0===i?void 0:i.length)?(t||e.preventDefault(),{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}):"touchend"===e.type&&(null===(n=e.changedTouches)||void 0===n?void 0:n.length)?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}(e,u),r=n.clientX,c=n.clientY;if(r||c){var d=r-t.left,g=c-t.top,f=o.computeAlignment(a,l,{minX:0,minY:0,maxX:t.width,maxY:t.height},i.bounds,h),v=new o.Mat2D;f.invert(v);var b=new o.Vec2D(d,g),y=o.mapXY(v,b),_=y.x(),w=y.y();switch(y.delete(),v.delete(),b.delete(),f.delete(),e.type){case"mouseout":for(var S=0,E=s;S<E.length;S++)E[S].pointerMove(_,w);break;case"touchmove":case"mouseover":case"mousemove":for(var T=0,x=s;T<x.length;T++)x[T].pointerMove(_,w);break;case"touchstart":case"mousedown":for(var C=0,I=s;C<I.length;C++)I[C].pointerDown(_,w);break;case"touchend":case"mouseup":for(var P=0,A=s;P<A.length;P++)A[P].pointerUp(_,w)}}}}.bind(void 0);return t.addEventListener("mouseover",g),t.addEventListener("mouseout",g),t.addEventListener("mousemove",g),t.addEventListener("mousedown",g),t.addEventListener("mouseup",g),t.addEventListener("touchmove",g,{passive:u}),t.addEventListener("touchstart",g,{passive:u}),t.addEventListener("touchend",g),function(){t.removeEventListener("mouseover",g),t.removeEventListener("mouseout",g),t.removeEventListener("mousemove",g),t.removeEventListener("mousedown",g),t.removeEventListener("mouseup",g),t.removeEventListener("touchmove",g),t.removeEventListener("touchstart",g),t.removeEventListener("touchend",g)}}},(e,t,i)=>{i.r(t),i.d(t,{BLANK_URL:()=>c,sanitizeUrl:()=>u});var n=/^([^\w]*)(javascript|data|vbscript)/im,s=/&#(\w+)(^\w|;)?/g,r=/&(newline|tab);/gi,o=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,a=/^.+(:|&colon;)/gim,l=[".","/"],c="about:blank";function u(e){if(!e)return c;var t,i=(t=e,t.replace(o,"").replace(s,(function(e,t){return String.fromCharCode(t)}))).replace(r,"").replace(o,"").trim();if(!i)return c;if(function(e){return l.indexOf(e[0])>-1}(i))return i;var u=i.match(a);if(!u)return i;var d=u[0];return n.test(d)?c:i}}],t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{i.r(n),i.d(n,{Alignment:()=>s,EventType:()=>v,Fit:()=>t,Layout:()=>p,LoopType:()=>b,Rive:()=>k,RiveEventType:()=>g,RiveFile:()=>A,RuntimeLoader:()=>m,StateMachineInput:()=>f,StateMachineInputType:()=>h,Testing:()=>M,decodeAudio:()=>j,decodeFont:()=>O,decodeImage:()=>B});var e,t,s,r=i(1),o=i(2),a=i(3),l=i(5),c=(e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),u=function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},d=function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(o=0)),o;)try{if(i=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};!function(e){e.Cover="cover",e.Contain="contain",e.Fill="fill",e.FitWidth="fitWidth",e.FitHeight="fitHeight",e.None="none",e.ScaleDown="scaleDown",e.Layout="layout"}(t||(t={})),function(e){e.Center="center",e.TopLeft="topLeft",e.TopCenter="topCenter",e.TopRight="topRight",e.CenterLeft="centerLeft",e.CenterRight="centerRight",e.BottomLeft="bottomLeft",e.BottomCenter="bottomCenter",e.BottomRight="bottomRight"}(s||(s={}));var h,p=function(){function e(e){var i,n,r,o,a,l,c;this.fit=null!==(i=null==e?void 0:e.fit)&&void 0!==i?i:t.Contain,this.alignment=null!==(n=null==e?void 0:e.alignment)&&void 0!==n?n:s.Center,this.layoutScaleFactor=null!==(r=null==e?void 0:e.layoutScaleFactor)&&void 0!==r?r:1,this.minX=null!==(o=null==e?void 0:e.minX)&&void 0!==o?o:0,this.minY=null!==(a=null==e?void 0:e.minY)&&void 0!==a?a:0,this.maxX=null!==(l=null==e?void 0:e.maxX)&&void 0!==l?l:0,this.maxY=null!==(c=null==e?void 0:e.maxY)&&void 0!==c?c:0}return e.new=function(t){var i=t.fit,n=t.alignment,s=t.minX,r=t.minY,o=t.maxX,a=t.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new e({fit:i,alignment:n,minX:s,minY:r,maxX:o,maxY:a})},e.prototype.copyWith=function(t){var i=t.fit,n=t.alignment,s=t.layoutScaleFactor,r=t.minX,o=t.minY,a=t.maxX,l=t.maxY;return new e({fit:null!=i?i:this.fit,alignment:null!=n?n:this.alignment,layoutScaleFactor:null!=s?s:this.layoutScaleFactor,minX:null!=r?r:this.minX,minY:null!=o?o:this.minY,maxX:null!=a?a:this.maxX,maxY:null!=l?l:this.maxY})},e.prototype.runtimeFit=function(e){return this.cachedRuntimeFit?this.cachedRuntimeFit:(i=this.fit===t.Cover?e.Fit.cover:this.fit===t.Contain?e.Fit.contain:this.fit===t.Fill?e.Fit.fill:this.fit===t.FitWidth?e.Fit.fitWidth:this.fit===t.FitHeight?e.Fit.fitHeight:this.fit===t.ScaleDown?e.Fit.scaleDown:this.fit===t.Layout?e.Fit.layout:e.Fit.none,this.cachedRuntimeFit=i,i);var i},e.prototype.runtimeAlignment=function(e){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(t=this.alignment===s.TopLeft?e.Alignment.topLeft:this.alignment===s.TopCenter?e.Alignment.topCenter:this.alignment===s.TopRight?e.Alignment.topRight:this.alignment===s.CenterLeft?e.Alignment.centerLeft:this.alignment===s.CenterRight?e.Alignment.centerRight:this.alignment===s.BottomLeft?e.Alignment.bottomLeft:this.alignment===s.BottomCenter?e.Alignment.bottomCenter:this.alignment===s.BottomRight?e.Alignment.bottomRight:e.Alignment.center,this.cachedRuntimeAlignment=t,t);var t},e}(),m=function(){function e(){}return e.loadRuntime=function(){r.default({locateFile:function(){return e.wasmURL}}).then((function(t){var i;for(e.runtime=t;e.callBackQueue.length>0;)null===(i=e.callBackQueue.shift())||void 0===i||i(e.runtime)})).catch((function(t){var i={message:(null==t?void 0:t.message)||"Unknown error",type:(null==t?void 0:t.name)||"Error",wasmError:t instanceof WebAssembly.CompileError||t instanceof WebAssembly.RuntimeError,originalError:t};console.debug("Rive WASM load error details:",i);var n="https://cdn.jsdelivr.net/npm/".concat(o.name,"@").concat(o.version,"/rive_fallback.wasm");if(e.wasmURL.toLowerCase()!==n)console.warn("Failed to load WASM from ".concat(e.wasmURL," (").concat(i.message,"), trying jsdelivr as a backup")),e.setWasmUrl(n),e.loadRuntime();else{var s=["Could not load Rive WASM file from ".concat(e.wasmURL," or ").concat(n,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible","\nError details:","- Type: ".concat(i.type),"- Message: ".concat(i.message),"- WebAssembly-specific error: ".concat(i.wasmError),"\nTo resolve, you may need to:","1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join("\n");console.error(s)}}))},e.getInstance=function(t){e.isLoading||(e.isLoading=!0,e.loadRuntime()),e.runtime?t(e.runtime):e.callBackQueue.push(t)},e.awaitInstance=function(){return new Promise((function(t){return e.getInstance((function(e){return t(e)}))}))},e.setWasmUrl=function(t){e.wasmURL=t},e.getWasmUrl=function(){return e.wasmURL},e.isLoading=!1,e.callBackQueue=[],e.wasmURL="https://unpkg.com/".concat(o.name,"@").concat(o.version,"/rive.wasm"),e}();!function(e){e[e.Number=56]="Number",e[e.Trigger=58]="Trigger",e[e.Boolean=59]="Boolean"}(h||(h={}));var g,f=function(){function e(e,t){this.type=e,this.runtimeInput=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(e){this.runtimeInput.value=e},enumerable:!1,configurable:!0}),e.prototype.fire=function(){this.type===h.Trigger&&this.runtimeInput.fire()},e.prototype.delete=function(){this.runtimeInput=null},e}();!function(e){e[e.General=128]="General",e[e.OpenUrl=131]="OpenUrl"}(g||(g={}));var v,b,y=function(){function e(e,t,i,n){this.stateMachine=e,this.playing=i,this.artboard=n,this.inputs=[],this.instance=new t.StateMachineInstance(e,n),this.initInputs(t)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statesChanged",{get:function(){for(var e=[],t=0;t<this.instance.stateChangedCount();t++)e.push(this.instance.stateChangedNameByIndex(t));return e},enumerable:!1,configurable:!0}),e.prototype.advance=function(e){this.instance.advance(e)},e.prototype.advanceAndApply=function(e){this.instance.advanceAndApply(e)},e.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},e.prototype.reportedEventAt=function(e){return this.instance.reportedEventAt(e)},e.prototype.initInputs=function(e){for(var t=0;t<this.instance.inputCount();t++){var i=this.instance.input(t);this.inputs.push(this.mapRuntimeInput(i,e))}},e.prototype.mapRuntimeInput=function(e,t){return e.type===t.SMIInput.bool?new f(h.Boolean,e.asBool()):e.type===t.SMIInput.number?new f(h.Number,e.asNumber()):e.type===t.SMIInput.trigger?new f(h.Trigger,e.asTrigger()):void 0},e.prototype.cleanup=function(){this.inputs.forEach((function(e){e.delete()})),this.inputs.length=0,this.instance.delete()},e}(),_=function(){function e(e,t,i,n,s){void 0===n&&(n=[]),void 0===s&&(s=[]),this.runtime=e,this.artboard=t,this.eventManager=i,this.animations=n,this.stateMachines=s}return e.prototype.add=function(e,t,i){if(void 0===i&&(i=!0),0===(e=D(e)).length)this.animations.forEach((function(e){return e.playing=t})),this.stateMachines.forEach((function(e){return e.playing=t}));else for(var n=this.animations.map((function(e){return e.name})),s=this.stateMachines.map((function(e){return e.name})),r=0;r<e.length;r++){var o=n.indexOf(e[r]),l=s.indexOf(e[r]);if(o>=0||l>=0)o>=0?this.animations[o].playing=t:this.stateMachines[l].playing=t;else{var c=this.artboard.animationByName(e[r]);if(c){var u=new a.Animation(c,this.artboard,this.runtime,t);u.advance(0),u.apply(1),this.animations.push(u)}else{var d=this.artboard.stateMachineByName(e[r]);if(d){var h=new y(d,this.runtime,t,this.artboard);this.stateMachines.push(h)}}}}return i&&(t?this.eventManager.fire({type:v.Play,data:this.playing}):this.eventManager.fire({type:v.Pause,data:this.paused})),t?this.playing:this.paused},e.prototype.initLinearAnimations=function(e,t){for(var i=this.animations.map((function(e){return e.name})),n=0;n<e.length;n++){var s=i.indexOf(e[n]);if(s>=0)this.animations[s].playing=t;else{var r=this.artboard.animationByName(e[n]);if(r){var o=new a.Animation(r,this.artboard,this.runtime,t);o.advance(0),o.apply(1),this.animations.push(o)}}}},e.prototype.initStateMachines=function(e,t){for(var i=this.stateMachines.map((function(e){return e.name})),n=0;n<e.length;n++){var s=i.indexOf(e[n]);if(s>=0)this.stateMachines[s].playing=t;else{var r=this.artboard.stateMachineByName(e[n]);if(r){var o=new y(r,this.runtime,t,this.artboard);this.stateMachines.push(o)}else this.initLinearAnimations([e[n]],t)}}},e.prototype.play=function(e){return this.add(e,!0)},e.prototype.pause=function(e){return this.add(e,!1)},e.prototype.scrub=function(e,t){var i=this.animations.filter((function(t){return e.includes(t.name)}));return i.forEach((function(e){return e.scrubTo=t})),i.map((function(e){return e.name}))},Object.defineProperty(e.prototype,"playing",{get:function(){return this.animations.filter((function(e){return e.playing})).map((function(e){return e.name})).concat(this.stateMachines.filter((function(e){return e.playing})).map((function(e){return e.name})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.animations.filter((function(e){return!e.playing})).map((function(e){return e.name})).concat(this.stateMachines.filter((function(e){return!e.playing})).map((function(e){return e.name})))},enumerable:!1,configurable:!0}),e.prototype.stop=function(e){var t=this,i=[];if(0===(e=D(e)).length)i=this.animations.map((function(e){return e.name})).concat(this.stateMachines.map((function(e){return e.name}))),this.animations.forEach((function(e){return e.cleanup()})),this.stateMachines.forEach((function(e){return e.cleanup()})),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var n=this.animations.filter((function(t){return e.includes(t.name)}));n.forEach((function(e){e.cleanup(),t.animations.splice(t.animations.indexOf(e),1)}));var s=this.stateMachines.filter((function(t){return e.includes(t.name)}));s.forEach((function(e){e.cleanup(),t.stateMachines.splice(t.stateMachines.indexOf(e),1)})),i=n.map((function(e){return e.name})).concat(s.map((function(e){return e.name})))}return this.eventManager.fire({type:v.Stop,data:i}),i},Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.animations.reduce((function(e,t){return e||t.playing}),!1)||this.stateMachines.reduce((function(e,t){return e||t.playing}),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStopped",{get:function(){return 0===this.animations.length&&0===this.stateMachines.length},enumerable:!1,configurable:!0}),e.prototype.atLeastOne=function(e,t){var i;return void 0===t&&(t=!0),0===this.animations.length&&0===this.stateMachines.length&&(this.artboard.animationCount()>0?this.add([i=this.artboard.animationByIndex(0).name],e,t):this.artboard.stateMachineCount()>0&&this.add([i=this.artboard.stateMachineByIndex(0).name],e,t)),i},e.prototype.handleLooping=function(){for(var e=0,t=this.animations.filter((function(e){return e.playing}));e<t.length;e++){var i=t[e];0===i.loopValue&&i.loopCount?(i.loopCount=0,this.stop(i.name)):1===i.loopValue&&i.loopCount?(this.eventManager.fire({type:v.Loop,data:{animation:i.name,type:b.Loop}}),i.loopCount=0):2===i.loopValue&&i.loopCount>1&&(this.eventManager.fire({type:v.Loop,data:{animation:i.name,type:b.PingPong}}),i.loopCount=0)}},e.prototype.handleStateChanges=function(){for(var e=[],t=0,i=this.stateMachines.filter((function(e){return e.playing}));t<i.length;t++){var n=i[t];e.push.apply(e,n.statesChanged)}e.length>0&&this.eventManager.fire({type:v.StateChange,data:e})},e.prototype.handleAdvancing=function(e){this.eventManager.fire({type:v.Advance,data:e})},e}();!function(e){e.Load="load",e.LoadError="loaderror",e.Play="play",e.Pause="pause",e.Stop="stop",e.Loop="loop",e.Draw="draw",e.Advance="advance",e.StateChange="statechange",e.RiveEvent="riveevent",e.AudioStatusChange="audiostatuschange"}(v||(v={})),function(e){e.OneShot="oneshot",e.Loop="loop",e.PingPong="pingpong"}(b||(b={}));var w,S=function(){function e(e){void 0===e&&(e=[]),this.listeners=e}return e.prototype.getListeners=function(e){return this.listeners.filter((function(t){return t.type===e}))},e.prototype.add=function(e){this.listeners.includes(e)||this.listeners.push(e)},e.prototype.remove=function(e){for(var t=0;t<this.listeners.length;t++){var i=this.listeners[t];if(i.type===e.type&&i.callback===e.callback){this.listeners.splice(t,1);break}}},e.prototype.removeAll=function(e){var t=this;e?this.listeners.filter((function(t){return t.type===e})).forEach((function(e){return t.remove(e)})):this.listeners.splice(0,this.listeners.length)},e.prototype.fire=function(e){this.getListeners(e.type).forEach((function(t){return t.callback(e)}))},e}(),E=function(){function e(e){this.eventManager=e,this.queue=[]}return e.prototype.add=function(e){this.queue.push(e)},e.prototype.process=function(){for(;this.queue.length>0;){var e=this.queue.shift();(null==e?void 0:e.action)&&e.action(),(null==e?void 0:e.event)&&this.eventManager.fire(e.event)}},e}();!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.UNAVAILABLE=1]="UNAVAILABLE"}(w||(w={}));var T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._started=!1,t._enabled=!1,t._status=w.UNAVAILABLE,t}return c(t,e),t.prototype.delay=function(e){return u(this,void 0,void 0,(function(){return d(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},t.prototype.timeout=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){return[2,new Promise((function(e,t){return setTimeout(t,50)}))]}))}))},t.prototype.reportToListeners=function(){this.fire({type:v.AudioStatusChange}),this.removeAll()},t.prototype.enableAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){return this._enabled||(this._enabled=!0,this._status=w.AVAILABLE,this.reportToListeners()),[2]}))}))},t.prototype.testAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:if(this._status!==w.UNAVAILABLE||null===this._audioContext)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return e.sent(),this.enableAudio(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},t.prototype._establishAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this._started?[3,5]:(this._started=!0,"undefined"!=typeof window?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),e.label=2;case 2:return this._status!==w.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return e.sent(),[4,this.delay(1e3)];case 4:return e.sent(),[3,2];case 5:return[2]}}))}))},t.prototype.listenForUserAction=function(){var e=this;document.addEventListener("pointerdown",(function(){return u(e,void 0,void 0,(function(){return d(this,(function(e){return this.enableAudio(),[2]}))}))}),{once:!0})},t.prototype.establishAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){return this._establishAudio(),[2]}))}))},Object.defineProperty(t.prototype,"systemVolume",{get:function(){return this._status===w.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),t}(S),x=new T,C=function(){function e(){}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.disconnect=function(){},e}(),I=globalThis.ResizeObserver||C,P=new(function(){function e(){var e=this;this._elementsMap=new Map,this._onObservedEntry=function(t){var i=e._elementsMap.get(t.target);null!==i?i.onResize(0==t.target.clientWidth||0==t.target.clientHeight):e._resizeObserver.unobserve(t.target)},this._onObserved=function(t){t.forEach(e._onObservedEntry)},this._resizeObserver=new I(this._onObserved)}return e.prototype.add=function(e,t){var i={onResize:t,element:e};return this._elementsMap.set(e,i),this._resizeObserver.observe(e),i},e.prototype.remove=function(e){this._resizeObserver.unobserve(e.element),this._elementsMap.delete(e.element)},e}()),A=function(){function e(e){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.src=e.src,this.buffer=e.buffer,e.assetLoader&&(this.assetLoader=e.assetLoader),this.enableRiveAssetCDN="boolean"!=typeof e.enableRiveAssetCDN||e.enableRiveAssetCDN,this.eventManager=new S,e.onLoad&&this.on(v.Load,e.onLoad),e.onLoadError&&this.on(v.LoadError,e.onLoadError)}return e.prototype.initData=function(){return u(this,void 0,void 0,(function(){var t,i,n;return d(this,(function(s){switch(s.label){case 0:return this.src?(t=this,[4,L(this.src)]):[3,2];case 1:t.buffer=s.sent(),s.label=2;case 2:return this.assetLoader&&(i=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),n=this,[4,this.runtime.load(new Uint8Array(this.buffer),i,this.enableRiveAssetCDN)];case 3:if(n.file=s.sent(),null===this.file)throw this.eventManager.fire({type:v.LoadError,data:null}),new Error(e.fileLoadErrorMessage);return this.eventManager.fire({type:v.Load,data:this}),[2]}}))}))},e.prototype.init=function(){return u(this,void 0,void 0,(function(){var t;return d(this,(function(i){switch(i.label){case 0:if(!this.src&&!this.buffer)throw new Error(e.missingErrorMessage);return t=this,[4,m.awaitInstance()];case 1:return t.runtime=i.sent(),[4,this.initData()];case 2:return i.sent(),[2]}}))}))},e.prototype.on=function(e,t){this.eventManager.add({type:e,callback:t})},e.prototype.off=function(e,t){this.eventManager.remove({type:e,callback:t})},e.prototype.cleanup=function(){var e;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),null===(e=this.file)||void 0===e||e.delete())},e.prototype.removeAllRiveEventListeners=function(e){this.eventManager.removeAll(e)},e.prototype.getInstance=function(){if(null!==this.file)return this.referenceCount+=1,this.file},e.missingErrorMessage="Rive source file or data buffer required",e.fileLoadErrorMessage="The file failed to load",e}(),k=function(){function e(e){var t,i=this;this.loaded=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(e){i._hasZeroSize=e,i._layout.maxX&&i._layout.maxY||i.resizeToCanvas()},this.renderSecondTimer=0,this.canvas=e.canvas,e.canvas.constructor===HTMLCanvasElement&&(this._observed=P.add(this.canvas,this.onCanvasResize)),this.src=e.src,this.buffer=e.buffer,this.riveFile=e.riveFile,this.layout=null!==(t=e.layout)&&void 0!==t?t:new p,this.shouldDisableRiveListeners=!!e.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!e.isTouchScrollEnabled,this.automaticallyHandleEvents=!!e.automaticallyHandleEvents,this.enableRiveAssetCDN=void 0===e.enableRiveAssetCDN||e.enableRiveAssetCDN,this.eventManager=new S,e.onLoad&&this.on(v.Load,e.onLoad),e.onLoadError&&this.on(v.LoadError,e.onLoadError),e.onPlay&&this.on(v.Play,e.onPlay),e.onPause&&this.on(v.Pause,e.onPause),e.onStop&&this.on(v.Stop,e.onStop),e.onLoop&&this.on(v.Loop,e.onLoop),e.onStateChange&&this.on(v.StateChange,e.onStateChange),e.onAdvance&&this.on(v.Advance,e.onAdvance),e.onload&&!e.onLoad&&this.on(v.Load,e.onload),e.onloaderror&&!e.onLoadError&&this.on(v.LoadError,e.onloaderror),e.onplay&&!e.onPlay&&this.on(v.Play,e.onplay),e.onpause&&!e.onPause&&this.on(v.Pause,e.onpause),e.onstop&&!e.onStop&&this.on(v.Stop,e.onstop),e.onloop&&!e.onLoop&&this.on(v.Loop,e.onloop),e.onstatechange&&!e.onStateChange&&this.on(v.StateChange,e.onstatechange),e.assetLoader&&(this.assetLoader=e.assetLoader),this.taskQueue=new E(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:e.autoplay,animations:e.animations,stateMachines:e.stateMachines,artboard:e.artboard,useOffscreenRenderer:e.useOffscreenRenderer})}return e.new=function(t){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new e(t)},e.prototype.onSystemAudioChanged=function(){this.volume=this._volume},e.prototype.init=function(t){var i=this,n=t.src,s=t.buffer,r=t.riveFile,o=t.animations,a=t.stateMachines,l=t.artboard,c=t.autoplay,u=void 0!==c&&c,d=t.useOffscreenRenderer,h=void 0!==d&&d;if(this.src=n,this.buffer=s,this.riveFile=r,!this.src&&!this.buffer&&!this.riveFile)throw new Error(e.missingErrorMessage);var p=D(o),g=D(a);this.loaded=!1,this.readyForPlaying=!1,m.awaitInstance().then((function(e){i.runtime=e,i.removeRiveListeners(),i.deleteRiveRenderer(),i.renderer=i.runtime.makeRenderer(i.canvas,h),i.canvas.width||i.canvas.height||i.resizeDrawingSurfaceToCanvas(),i.initData(l,p,g,u).then((function(){return i.setupRiveListeners()})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))},e.prototype.setupRiveListeners=function(e){var t=this;if(!this.shouldDisableRiveListeners){var i=(this.animator.stateMachines||[]).filter((function(e){return e.playing&&t.runtime.hasListeners(e.instance)})).map((function(e){return e.instance})),n=this.isTouchScrollEnabled;e&&"isTouchScrollEnabled"in e&&(n=e.isTouchScrollEnabled),this.eventCleanup=(0,l.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:i,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:n,layoutScaleFactor:this._layout.layoutScaleFactor})}},e.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},e.prototype.initializeAudio=function(){var e,t=this;x.status==w.UNAVAILABLE&&(null===(e=this.artboard)||void 0===e?void 0:e.hasAudio)&&null===this._audioEventListener&&(this._audioEventListener={type:v.AudioStatusChange,callback:function(){return t.onSystemAudioChanged()}},x.add(this._audioEventListener),x.establishAudio())},e.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},e.prototype.initData=function(e,t,i,n){var s;return u(this,void 0,void 0,(function(){var r;return d(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),null!=this.riveFile?[3,2]:(this.riveFile=new A({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:o.sent(),o.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(e,t,i,n),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:v.Load,data:null!==(s=this.src)&&void 0!==s?s:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return o.sent(),r="Problem loading file; may be corrupt!",console.warn(r),this.eventManager.fire({type:v.LoadError,data:r}),[2,Promise.reject(r)];case 4:return[2]}}))}))},e.prototype.initArtboard=function(e,t,i,n){if(this.file){var s,r=e?this.file.artboardByName(e):this.file.defaultArtboard();if(!r){var o="Invalid artboard name or no default artboard";return console.warn(o),void this.eventManager.fire({type:v.LoadError,data:o})}if(this.artboard=r,r.volume=this._volume*x.systemVolume,this.artboard.animationCount()<1)throw o="Artboard has no animations",this.eventManager.fire({type:v.LoadError,data:o}),o;this.animator=new _(this.runtime,this.artboard,this.eventManager),t.length>0||i.length>0?(s=t.concat(i),this.animator.initLinearAnimations(t,n),this.animator.initStateMachines(i,n)):s=[this.animator.atLeastOne(n,!1)],this.taskQueue.add({event:{type:n?v.Play:v.Pause,data:s}})}},e.prototype.drawFrame=function(){this.startRendering()},e.prototype.draw=function(e,t){this.frameRequestId=null;var i=performance.now();this.lastRenderTime||(this.lastRenderTime=e),this.renderSecondTimer+=e-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,null==t||t());var n=(e-this.lastRenderTime)/1e3;this.lastRenderTime=e;for(var s=0,r=this.animator.animations.filter((function(e){return e.playing||e.needsScrub})).sort((function(e){return e.needsScrub?-1:1}));s<r.length;s++){var o=r[s];o.advance(n),o.instance.didLoop&&(o.loopCount+=1),o.apply(1)}for(var a=0,c=this.animator.stateMachines.filter((function(e){return e.playing}));a<c.length;a++){var u=c[a],d=u.reportedEventCount();if(d)for(var h=0;h<d;h++){var p=u.reportedEventAt(h);if(p)if(p.type===g.OpenUrl){if(this.eventManager.fire({type:v.RiveEvent,data:p}),this.automaticallyHandleEvents){var m=document.createElement("a"),f=p,b=f.url,y=f.target,_=(0,l.sanitizeUrl)(b);b&&m.setAttribute("href",_),y&&m.setAttribute("target",y),_&&_!==l.BLANK_URL&&m.click()}}else this.eventManager.fire({type:v.RiveEvent,data:p})}u.advanceAndApply(n)}0==this.animator.stateMachines.length&&this.artboard.advance(n);var w=this.renderer;w.clear(),w.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(w),w.restore(),w.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(n),this.frameCount++;var S=performance.now();for(this.frameTimes.push(S),this.durations.push(S-i);this.frameTimes[0]<=S-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},e.prototype.alignRenderer=function(){var e=this,t=e.renderer,i=e.runtime,n=e._layout,s=e.artboard;t.align(n.runtimeFit(i),n.runtimeAlignment(i),{minX:n.minX,minY:n.minY,maxX:n.maxX,maxY:n.maxY},s.bounds,this._devicePixelRatioUsed*n.layoutScaleFactor)},Object.defineProperty(e.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameTime",{get:function(){return 0===this.durations.length?0:(this.durations.reduce((function(e,t){return e+t}),0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){var e;this.stopRendering(),this.cleanupInstances(),null!==this._observed&&P.remove(this._observed),this.removeRiveListeners(),null===(e=this.riveFile)||void 0===e||e.cleanup(),this.riveFile=null,this.file=null,this.deleteRiveRenderer(),null!==this._audioEventListener&&(x.remove(this._audioEventListener),this._audioEventListener=null)},e.prototype.deleteRiveRenderer=function(){var e;null===(e=this.renderer)||void 0===e||e.delete(),this.renderer=null},e.prototype.cleanupInstances=function(){null!==this.eventCleanup&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},e.prototype.retrieveTextRun=function(e){var t;if(e)if(this.artboard){var i=this.artboard.textRun(e);if(i)return i;console.warn("Could not access a text run with name '".concat(e,"' in the '").concat(null===(t=this.artboard)||void 0===t?void 0:t.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},e.prototype.getTextRunValue=function(e){var t=this.retrieveTextRun(e);return t?t.text:void 0},e.prototype.setTextRunValue=function(e,t){var i=this.retrieveTextRun(e);i&&(i.text=t)},e.prototype.play=function(e,t){var i=this;e=D(e),this.readyForPlaying?(this.animator.play(e),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return i.play(e,t)}})},e.prototype.pause=function(e){var t=this;e=D(e),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(e)):this.taskQueue.add({action:function(){return t.pause(e)}})},e.prototype.scrub=function(e,t){var i=this;e=D(e),this.readyForPlaying?(this.animator.scrub(e,t||0),this.drawFrame()):this.taskQueue.add({action:function(){return i.scrub(e,t)}})},e.prototype.stop=function(e){var t=this;e=D(e),this.readyForPlaying?(this.animator&&this.animator.stop(e),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return t.stop(e)}})},e.prototype.reset=function(e){var t,i=null==e?void 0:e.artboard,n=D(null==e?void 0:e.animations),s=D(null==e?void 0:e.stateMachines),r=null!==(t=null==e?void 0:e.autoplay)&&void 0!==t&&t;this.cleanupInstances(),this.initArtboard(i,n,s,r),this.taskQueue.process()},e.prototype.load=function(e){this.file=null,this.stop(),this.init(e)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},set:function(e){this._layout=e,e.maxX&&e.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),e.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},e.prototype.resizeDrawingSurfaceToCanvas=function(e){if(this.canvas instanceof HTMLCanvasElement&&window){var i=this.canvas.getBoundingClientRect(),n=i.width,s=i.height,r=e||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=r,this.canvas.width=r*n,this.canvas.height=r*s,this.startRendering(),this.resizeToCanvas(),this.layout.fit===t.Layout){var o=this._layout.layoutScaleFactor;this.artboard.width=n/o,this.artboard.height=s/o}}},Object.defineProperty(e.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var e=[],t=0;t<this.artboard.animationCount();t++)e.push(this.artboard.animationByIndex(t).name);return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var e=[],t=0;t<this.artboard.stateMachineCount();t++)e.push(this.artboard.stateMachineByIndex(t).name);return e},enumerable:!1,configurable:!0}),e.prototype.stateMachineInputs=function(e){if(this.loaded){var t=this.animator.stateMachines.find((function(t){return t.name===e}));return null==t?void 0:t.inputs}},e.prototype.retrieveInputAtPath=function(e,t){if(e)if(this.artboard){var i=this.artboard.inputByPath(e,t);if(i)return i;console.warn("Could not access an input with name: '".concat(e,"', at path:'").concat(t,"'"))}else console.warn("Tried to access input: '".concat(e,"', at path: '").concat(t,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(t,"'"))},e.prototype.setBooleanStateAtPath=function(e,t,i){var n=this.retrieveInputAtPath(e,i);n&&(n.type===h.Boolean?n.asBool().value=t:console.warn("Input with name: '".concat(e,"', at path:'").concat(i,"' is not a boolean")))},e.prototype.setNumberStateAtPath=function(e,t,i){var n=this.retrieveInputAtPath(e,i);n&&(n.type===h.Number?n.asNumber().value=t:console.warn("Input with name: '".concat(e,"', at path:'").concat(i,"' is not a number")))},e.prototype.fireStateAtPath=function(e,t){var i=this.retrieveInputAtPath(e,t);i&&(i.type===h.Trigger?i.asTrigger().fire():console.warn("Input with name: '".concat(e,"', at path:'").concat(t,"' is not a trigger")))},e.prototype.retrieveTextAtPath=function(e,t){if(e)if(t)if(this.artboard){var i=this.artboard.textByPath(e,t);if(i)return i;console.warn("Could not access text with name: '".concat(e,"', at path:'").concat(t,"'"))}else console.warn("Tried to access text: '".concat(e,"', at path: '").concat(t,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(e,"'"));else console.warn("No text name provided for path '".concat(t,"'"))},e.prototype.getTextRunValueAtPath=function(e,t){var i=this.retrieveTextAtPath(e,t);if(i)return i.text;console.warn("Could not get text with name: '".concat(e,"', at path:'").concat(t,"'"))},e.prototype.setTextRunValueAtPath=function(e,t,i){var n=this.retrieveTextAtPath(e,i);n?n.text=t:console.warn("Could not set text with name: '".concat(e,"', at path:'").concat(i,"'"))},Object.defineProperty(e.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(e){return e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(e){return e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(e){return!e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(e){return!e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t){this.eventManager.add({type:e,callback:t})},e.prototype.off=function(e,t){this.eventManager.remove({type:e,callback:t})},e.prototype.unsubscribe=function(e,t){console.warn("This function is deprecated: please use `off()` instead."),this.off(e,t)},e.prototype.removeAllRiveEventListeners=function(e){this.eventManager.removeAll(e)},e.prototype.unsubscribeAll=function(e){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(e)},e.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},e.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},e.prototype.enableFPSCounter=function(e){this.runtime.enableFPSCounter(e)},e.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(e.prototype,"contents",{get:function(){if(this.loaded){for(var e={artboards:[]},t=0;t<this.file.artboardCount();t++){for(var i=this.file.artboardByIndex(t),n={name:i.name,animations:[],stateMachines:[]},s=0;s<i.animationCount();s++){var r=i.animationByIndex(s);n.animations.push(r.name)}for(var o=0;o<i.stateMachineCount();o++){for(var a=i.stateMachineByIndex(o),l=a.name,c=new this.runtime.StateMachineInstance(a,i),u=[],d=0;d<c.inputCount();d++){var h=c.input(d);u.push({name:h.name,type:h.type})}n.stateMachines.push({name:l,inputs:u})}e.artboards.push(n)}return e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(e){this._volume=e,this.artboard&&(this.artboard.volume=e*x.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"artboardWidth",{get:function(){var e;return this.artboard?this.artboard.width:null!==(e=this._artboardWidth)&&void 0!==e?e:0},set:function(e){this._artboardWidth=e,this.artboard&&(this.artboard.width=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"artboardHeight",{get:function(){var e;return this.artboard?this.artboard.height:null!==(e=this._artboardHeight)&&void 0!==e?e:0},set:function(e){this._artboardHeight=e,this.artboard&&(this.artboard.height=e)},enumerable:!1,configurable:!0}),e.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(e.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(e){this._devicePixelRatioUsed=e},enumerable:!1,configurable:!0}),e.missingErrorMessage="Rive source file or data buffer required",e}(),L=function(e){return u(void 0,void 0,void 0,(function(){var t;return d(this,(function(i){switch(i.label){case 0:return t=new Request(e),[4,fetch(t)];case 1:return[4,i.sent().arrayBuffer()];case 2:return[2,i.sent()]}}))}))},D=function(e){return"string"==typeof e?[e]:e instanceof Array?e:[]},M={EventManager:S,TaskQueueManager:E},j=function(e){return new Promise((function(t){return m.getInstance((function(i){i.decodeAudio(e,t)}))}))},B=function(e){return new Promise((function(t){return m.getInstance((function(i){i.decodeImage(e,t)}))}))},O=function(e){return new Promise((function(t){return m.getInstance((function(i){i.decodeFont(e,t)}))}))}})(),n})(),e.exports=t()},424:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(601),s=i.n(n),r=i(314),o=i.n(r)()(s());o.push([e.id,".game-scene #play-button{position:relative;display:block;margin:0 auto;z-index:6}@media(max-width: 576px){#play-button{max-width:115px;max-height:115px}}@media(min-width: 768px){#play-button{max-width:200px;max-height:200px}}",""]);const a=o},632:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(601),s=i.n(n),r=i(314),o=i.n(r)()(s());o.push([e.id,".game-control .level_content-wrapper{position:absolute;z-index:5;max-width:130px;width:100%;top:5px;left:12%}.game-control .level_content-wrapper .bar-level-wrapper{position:absolute;width:100%;max-width:125px;top:1.4rem;left:0;display:flex;align-items:center;justify-content:center}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{position:relative;width:100%;max-width:10px;margin:0px 2.2px}@media(min-width: 320px)and (max-width: 360px){.game-control .level_content-wrapper .bar-level-wrapper{max-width:100px;top:1.1rem;left:6px}.game-control .level_content-wrapper{max-width:115px;width:100%;top:5px;left:12%}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:13px}}@media(min-width: 361px)and (max-width: 500px){.level_content-wrapper{top:.5rem}.game-control .level_content-wrapper{max-width:130px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:13px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:130px;top:1.3rem}}@media(min-width: 501px)and (max-width: 767px){.game-control .level_content-wrapper{max-width:200px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:190px;top:2rem}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:22px;margin:0px 2.5px}}@media(min-width: 768px)and (max-width: 991px){.game-control .level_content-wrapper{max-width:215px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:205px;top:2rem}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px;margin:0px 2.5px}}@media(min-width: 991px)and (max-width: 1024px){.game-control .level_content-wrapper{max-width:230px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:215px;top:2.3rem;left:5px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px}}@media(min-width: 1080px){.game-control .level_content-wrapper{max-width:130px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:130px;top:1.2rem;left:0px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:15px;margin:0px 2.2px}}@media screen and (min-width: 1080px)and (max-height: 650px){.game-control .level_content-wrapper{max-width:100px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:100px;top:.9rem;left:0px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:12px;margin:0px 2.2px}}",""]);const a=o},636:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(601),s=i.n(n),r=i(314),o=i.n(r)()(s());o.push([e.id,".popup{display:none;position:absolute;top:0;left:0;right:0;bottom:0;z-index:1000;height:100%;width:100%;font-family:Arial}.popup.show{display:block}.popup .popup__overlay{height:100%;width:100%;background-color:rgba(0,0,0,.5)}.popup .popup__content-wrapper{position:absolute;top:20vh;left:10vw;right:10vw;height:80vw;background-repeat:no-repeat;background-size:contain}.popup .popup__content-wrapper [data-click=close]{position:absolute;top:-15px;left:15px;display:block}.popup .popup__content-wrapper .popup__content-container{position:absolute;padding:15px;color:#fff;display:flex;width:100%;height:100%;justify-content:center;align-items:center;align-content:center;flex-wrap:wrap}.popup #cancel-button{position:absolute;top:4px}#popup-bg{position:absolute;width:100%;height:100%;top:0px;left:0px}",""]);const a=o},970:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(601),s=i.n(n),r=i(314),o=i.n(r)()(s());o.push([e.id,'.prompt-container{position:absolute;width:100%;height:100%;pointer-events:none;z-index:5}.prompt-container #prompt-text-button-container{position:relative;height:74%;width:100%;left:0;top:0;display:flex;justify-content:center;align-items:center}.prompt-background{position:relative;background-size:contain;background-repeat:no-repeat;background-position:center;transition:transform .05s ease;left:50%;transform:translateX(-50%)}@media(max-width: 376px){.prompt-background{width:50%;height:26%;top:18%}}@media(min-width: 377px)and (max-width: 480px){.prompt-background{width:50%;height:22%;top:15%}}@media(min-width: 481px)and (max-width: 820px){.prompt-background{width:48%;height:22%;top:20%}}@media(min-width: 821px){.prompt-background{width:48%;height:22%;top:25%}}.prompt-background .prompt-text{width:100%;text-align:center;font-family:"Quicksand",sans-serif;font-weight:bold;color:#000;z-index:2}.prompt-background .prompt-text[dir=rtl]{unicode-bidi:bidi-override}.prompt-background .prompt-play-button{width:120px;height:120px;background-size:contain;background-repeat:no-repeat;background-position:center;cursor:pointer;pointer-events:auto;position:absolute;top:10px;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:none;user-select:none;-webkit-touch-callout:none;-webkit-user-select:none}.text-black{color:#000}.text-red{color:red}@-webkit-keyframes text-pulse{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}50%{-webkit-transform:scale(1.4);transform:scale(1.4)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes text-pulse{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}50%{-webkit-transform:scale(1.4);transform:scale(1.4)}100%{-webkit-transform:scale(1);transform:scale(1)}}.text-red-pulse-letter{color:red;display:inline-block;-webkit-animation:text-pulse 2s ease-in-out infinite both;animation:text-pulse 2s ease-in-out infinite both;font-weight:bold;transform-origin:center;position:relative;z-index:5;padding:0 2px}.text-red-pulse{color:red;display:inline-block;font-weight:bold}@media(min-width: 1080px){.prompt-background{width:50%;height:25%;top:18%}}',""]);const a=o},278:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(601),s=i.n(n),r=i(314),o=i.n(r)()(s());o.push([e.id,"#timer-ticking{position:relative;top:120px;width:100%;display:flex}#timer-ticking #timer-empty{position:absolute;bottom:0px;width:100%;height:40px}#timer-ticking #rotating-clock{transform:translateX(-50%);position:absolute;width:45px;bottom:-2px;left:28px}#timer-ticking #timer-full-container{position:absolute;bottom:0;left:14%;width:100%;overflow:hidden;height:40px}#timer-ticking #timer-full-container .timer-mask{position:absolute;width:86%;background:repeating-linear-gradient(-45deg, #EA3323, #EA3323 20px, #F9AAAA 20px, #F9AAAA 40px);left:0px;height:25px;margin:6px 0px 0px 2px}@keyframes rotateClock{from{transform:translateX(-50%) rotate(0deg)}to{transform:translateX(-50%) rotate(360deg)}}@keyframes reduceWidth{from{width:100%}to{width:0%}}@media(min-width: 320px)and (max-width: 360px){#timer-ticking{top:100px}#timer-ticking #timer-full-container{height:30px}#timer-ticking #timer-empty{height:30px}#timer-ticking #timer-full-container .timer-mask{height:22px;margin:4px 0px 0px 0px}#timer-ticking #rotating-clock{width:40px;bottom:-5px;left:25px}}@media(min-width: 361px)and (max-width: 500px){#timer-ticking{top:120px}#timer-ticking #timer-full-container .timer-mask{height:28px;margin:6px 0px 0px 1px}}@media(min-width: 501px)and (max-width: 768px){#timer-ticking{top:180px}#timer-ticking #timer-empty{height:60px}#timer-ticking #rotating-clock{width:80px;bottom:-8px;left:7%}#timer-ticking #timer-full-container{height:60px}#timer-ticking #timer-full-container .timer-mask{height:42px;margin:9px 0px 0px 0px}}@media(min-width: 769px)and (max-width: 992px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:60px}#timer-ticking #rotating-clock{width:75px;bottom:-8px;left:7%}#timer-ticking #timer-full-container{height:60px}#timer-ticking #timer-full-container .timer-mask{height:40px;margin:10px 0px 0px 0}}@media(min-width: 993px)and (max-width: 1024px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:70px}#timer-ticking #rotating-clock{width:75px;bottom:-8px;left:7%}#timer-ticking #timer-full-container{height:70px}#timer-ticking #timer-full-container .timer-mask{height:45px;margin:10px 0px 0px 6px}}@media(min-width: 1080px){#timer-ticking{top:13%}#timer-ticking #timer-empty{height:40px}#timer-ticking #rotating-clock{width:50px;bottom:-5px;left:7%}#timer-ticking #timer-full-container{height:40px}#timer-ticking #timer-full-container .timer-mask{height:30px;margin:5px 0px 0px 2px}}@media screen and (min-width: 1080px)and (max-height: 650px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:30px}#timer-ticking #rotating-clock{width:40px;bottom:-5px;left:7%}#timer-ticking #timer-full-container{height:30px}#timer-ticking #timer-full-container .timer-mask{height:22px;margin:4px 0px 0px 1px}}",""]);const a=o},717:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(601),s=i.n(n),r=i(314),o=i.n(r)()(s());o.push([e.id,".buttons-container{position:absolute;width:100%;bottom:65px;display:flex;gap:40px;justify-content:center}#levelend-background{background:rgba(36,36,36,.4196078431);height:100%;z-index:12;position:relative;transition:all 2.5s ease;opacity:1}#levelend-background.gray{background:#242424;opacity:1}#levelend-background.fade-out{opacity:0;z-index:0;background:rgba(0,0,0,0)}@media screen and (min-width: 1080px)and (max-height: 650px){.buttons-container{bottom:50px}.stars-container{top:80px;height:110px}}",""]);const a=o},35:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(601),s=i.n(n),r=i(314),o=i.n(r)()(s());o.push([e.id,"#title-and-play-button{position:absolute;width:100%}#title{width:100%;font-family:Atma-SemiBold,sans-serif;z-index:4;position:relative;margin-top:15%;text-align:center;padding:15px 10px 0;font-size:8vw;color:#f8b618;text-shadow:-2px -2px 0 #fff,2px -2px 0 #fff,-2px 2px 0 #fff,2px 2px 0 #fff,-3px 0 0 #fff,3px 0 0 #fff,0 -3px 0 #fff,0 3px 0 #fff;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;word-wrap:break-word}#title.title-long{font-size:6.5vw;margin-top:18%;padding:10px}@media(min-width: 501px)and (max-width: 768px){#title{margin-top:5%}}@media(min-width: 769px)and (max-width: 992px){#title{margin-top:5%}}",""]);const a=o},664:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(601),s=i.n(n),r=i(314),o=i.n(r)()(s());o.push([e.id,"button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.w-100{width:100%}.h-100{height:100%}.d-flex{display:flex}.justify-content-center{justify-content:center}.m-1{margin:8px}.ms-1{margin-left:8px}.me-1{margin-right:8px}.mt-1{margin-top:8px}.mb-1{margin-bottom:8px}.m-2{margin:16px}.ms-2{margin-left:16px}.me-2{margin-right:16px}.mt-2{margin-top:16px}.mb-2{margin-bottom:16px}.m-3{margin:24px}.ms-3{margin-left:24px}.me-3{margin-right:24px}.mt-3{margin-top:24px}.mb-3{margin-bottom:24px}.m-4{margin:32px}.ms-4{margin-left:32px}.me-4{margin-right:32px}.mt-4{margin-top:32px}.mb-4{margin-bottom:32px}.m-5{margin:40px}.ms-5{margin-left:40px}.me-5{margin-right:40px}.mt-5{margin-top:40px}.mb-5{margin-bottom:40px}.text-align-center{text-align:center}.font-size-1{font-size:8px}.font-size-2{font-size:16px}.font-size-3{font-size:24px}.font-size-4{font-size:32px}.font-size-5{font-size:40px}",""]);const a=o},371:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(601),s=i.n(n),r=i(314),o=i.n(r)()(s());o.push([e.id,"#hand-pointer{position:absolute;left:55%;margin-top:-115px;transform:translateX(-55%);animation:hand-bounce 2s linear infinite;z-index:1}@keyframes hand-bounce{0%{top:100px}50%{top:150px}100%{top:100px}}",""]);const a=o},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",n=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),n&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),n&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,n,s,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);n&&o[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),i&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=i):u[2]=i),s&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=s):u[4]="".concat(s)),t.push(u))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},72:e=>{"use strict";var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var r={},o=[],a=0;a<e.length;a++){var l=e[a],c=n.base?l[0]+n.base:l[0],u=r[c]||0,d="".concat(c," ").concat(u);r[c]=u+1;var h=i(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var m=s(p,n);n.byIndex=a,t.splice(a,0,{identifier:d,updater:m,references:1})}o.push(d)}return o}function s(e,t){var i=t.domAPI(t);i.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,s){var r=n(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var a=i(r[o]);t[a].references--}for(var l=n(e,s),c=0;c<r.length;c++){var u=i(r[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}r=l}}},659:e=>{"use strict";var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,s&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={id:n,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0,(()=>{"use strict";class e{subscribers;listenerIdCounter;constructor(){this.subscribers={},this.listenerIdCounter=0}checkSubscribers(){console.log("checkSubscribers ",this.subscribers)}subscribe(e,t){const i=this.listenerIdCounter++;return this.subscribers[e]||(this.subscribers[e]={}),this.subscribers[e][i]=t,()=>{this.unsubscribe(e,i)}}unsubscribe(e,t){this.subscribers[e]&&this.subscribers[e][t]&&delete this.subscribers[e][t]}publish(e,t){this.subscribers[e]&&Object.keys(this.subscribers[e]).forEach((i=>{this.subscribers[e][i]&&this.subscribers[e][i](t)}))}}const t=new class extends e{devicePixelRatio;constructor(){super(),this.devicePixelRatio=window.devicePixelRatio||1}getCanvasSizeValues(){const e=document.getElementById("canvas"),t=document.getElementById("loading");return t.width=e.width,t.height=e.height,{canvasElem:e,canvasWidth:e.width,canvasHeight:e.height,context:e.getContext("2d"),gameCanvasContext:e.getContext("2d",{willReadFrequently:!0}),loadingCanvas:t,loadingContext:t.getContext("2d"),gameControlElem:document.getElementById("game-control")}}getRiveCanvasValue(){const e=document.getElementById("rivecanvas");return e.width=e.clientWidth*this.devicePixelRatio,e.height=e.clientHeight*this.devicePixelRatio,e}getDevicePixelRatioValue(){return this.devicePixelRatio}};class n{x;y;origx;origy;text;img;imageSize;textFontSize;canWidth;canHeight;imageCenterOffsetX;imageCenterOffsetY;context;frame=0;isDisposed=!1;animationStartTime=0;animationDuration=1500;scale=t.getDevicePixelRatioValue();constructor(e,t,i,n,s,r,o){this.x=s,this.y=r,this.origx=s,this.origy=r,this.canWidth=t,this.canHeight=i,this.text=n,this.img=o,this.context=e,this.calculateImageAndFontSize(),this.imageCenterOffsetX=this.imageSize/2.3,this.imageCenterOffsetY=this.imageSize/1.5}initialize(){this.frame=0,this.isDisposed=!1,this.animationStartTime=0}calculateImageAndFontSize(){const e=Math.round(this.canWidth/this.scale),t=Math.round(this.canHeight/this.scale);1.4*this.context.measureText(this.text).width>t/9.5?(this.imageSize=1.1*this.context.measureText(this.text).width,this.textFontSize=t/25,this.text.length>=3&&this.origx<50&&this.origx<e/2&&(this.x=this.origx+21)):(this.imageSize=t/9.5,this.textFontSize=t/20)}getEase=(e,t,i)=>-i/2*(Math.cos(Math.PI*e)-1)+t;getX=()=>this.frame>=100?this.x:this.getEase(this.frame/100,0,this.x);getY=()=>this.frame>=100?this.y:this.getEase(this.frame/100,0,this.y);adjustSize(e,t){return e?1.25*t:t}draw(e=!1){if(this.isDisposed||!this.img||!this.context)return;if(this.frame<100){0===this.animationStartTime&&(this.animationStartTime=performance.now());const e=performance.now()-this.animationStartTime;this.frame=Math.min(100,e/this.animationDuration*100)}const t=this.getX()-(e?1.25*this.imageCenterOffsetX:this.imageCenterOffsetX),i=this.getY()-(e?1.25*this.imageCenterOffsetY:this.imageCenterOffsetY),n=e?1.25*this.imageSize:this.imageSize;e&&(this.context.shadowColor="rgba(255, 255, 255, 1)",this.context.shadowBlur=12,this.context.shadowOffsetX=0,this.context.shadowOffsetY=0),this.context.drawImage(this.img,t,i,n,n),this.context.shadowColor="transparent",this.context.shadowBlur=0,this.context.fillStyle="white",this.context.font=this.textFontSize+`px ${J}, monospace`,this.context.textAlign="center",this.context.fillText(this.text,this.getX(),this.getY())}dispose(){this.isDisposed=!0,this.img=null,this.context=null,this.frame=0}reset(){this.x=this.origx,this.y=this.origy,this.isDisposed=!1}}const s="pwa_installed_status",r="storePreviousPlayedLevel",o="is_cached",a="https://globallit-aws-s3-static-webapp-test-us-east-2.s3.us-west-2.amazonaws.com/feed-the-monster",l="./assets/audios/Eat.mp3",c=e=>`./assets/audios/Cheering-0${e}.mp3`,u="./assets/audios/intro.mp3",d=["./assets/audios/intro.mp3","./assets/audios/Cheering-02.mp3","./assets/audios/Cheering-03.mp3","./assets/audios/Cheering-01.mp3","./assets/audios/onDrag.mp3","./assets/audios/timeout.mp3","./assets/audios/LevelWinFanfare.mp3","./assets/audios/LevelLoseFanfare.mp3","./assets/audios/ButtonClick.mp3","./assets/audios/Monster Spits wrong stones-01.mp3","./assets/audios/Disapointed-05.mp3","./assets/audios/MonsterSpit.mp3","./assets/audios/Eat.mp3","./assets/audios/PointsAdd.wav","./assets/audios/are-you-sure.mp3","./assets/audios/monster_discovered_fanfare.mp3","./assets/audios/monster_evolve.mp3"],h=["./assets/audios/star_whoosh_and_poof.mp3"],p="./assets/audios/Cheering-03.mp3",m="./assets/audios/monster_discovered_fanfare.mp3",g="./assets/audios/monster_evolve.mp3",f="./assets/images/Totem_v02_v01.webp",v="./assets/images/hill.webp",b="./assets/images/fence_v01.webp",y="./assets/images/bg_v01.webp",w="./assets/images/timer_emptynew.webp",S="./assets/images/timer_new.svg",E="./assets/images/tutorial_hand.webp",T="./assets/images/next_btn.svg",x={DEFAULT_BACKGROUND_1:y,ASSETS_PATH_HILL:v,ASSETS_PATH_TOTEM:f,ASSETS_PATH_FENCE:b},C={AUTUMN_BACKGROUND_1:"./assets/images/Autumn_bg_v01.webp",AUTUMN_HILL_1:"./assets/images/Autumn_hill.webp",AUTUMN_PILLAR_1:"./assets/images/Autumn_sign_v01.webp",AUTUMN_SIGN_1:"./assets/images/Autumn_sign_v01.webp",AUTUMN_FENCE_1:"./assets/images/Autumn_fence_v01.webp"},I={WINTER_BACKGROUND_1:"./assets/images/Winter_bg_01.webp",WINTER_HILL_1:"./assets/images/Winter_hill.webp",WINTER_SIGN_1:"./assets/images/Winter_sign_v01.webp",WINTER_FENCE_1:"./assets/images/Winter_fence_v01.webp",WINTER_PILLAR_1:"./assets/images/Winter_sign_v01.webp"},P=["./assets/rive/eggmonster.riv","./assets/rive/hatchedmonster.riv","./assets/rive/youngmonster.riv","./assets/rive/adultmonster.riv"],A=["./assets/rive/ftm_monster_evolve1-2.riv","./assets/rive/ftm_monster_evolve2-4.riv"];var k;!function(e){e.PHASE="phase",e.EVOLUTION="evolution"}(k||(k={}));const L="StartScene",D="LevelSelection",M="GamePlay",j="GamePlay_Replay",B="LevelEnd",O=[5,13,20,30,42],R={0:"./assets/images/phaseBackground_1.webp",1:"./assets/images/phaseBackground_2.webp",2:"./assets/images/phaseBackground_3.webp",3:"./assets/images/phaseBackground_4.webp"},z={english:"Consolas",swahili:"Consolas",wolof:"Consolas",tajik:"Consolas",marathi:"Consolas",amharic:"Consolas",punjabi:"Consolas",tamil:"Consolas",sepedi:"Consolas",gujarati:"Consolas",telugu:"Consolas",tsonga:"Consolas",malay:"Consolas",ndebele:"Consolas",venda:"NotoSans-Regular",siswati:"Consolas",tswana:"Consolas",thai:"Consolas",fula:"Consolas",farsi:"Consolas",burmese:"Consolas",bengali:"Consolas",Azerbaijani:"NotoSans-Regular",Sesotho:"Consolas",Georgian:"Consolas",BrazilianPortuguese:"Consolas",Somali:"Consolas",Hausa:"NotoSans-Regular",Igbo:"Consolas",HatianCreole:"Consolas",Oromo:"Consolas",Luganda:"Consolas",Yoruba:"Consolas",Khmer:"Consolas",Javanese:"Consolas",Urdu:"Consolas",Kinyarwanda:"Consolas",Shona:"Consolas",Kurdish:"Consolas",French:"Consolas",isiXhosa:"Consolas",Afrikaans:"Consolas",Nepali:"Consolas",Ukrainian:"Consolas",Hindi:"Consolas",Tagalog:"Consolas",Vietnamese:"NotoSans-Regular",Pashto:"Consolas",Twi:"NotoSans-Regular",Arabic:"Adobe-Arabic-Bold",Mixe:"Mutsk-Regular"};class N{static getPromptAudioUrl(e){return N.getConvertedDevProdURL(e.prompt.promptAudio)}static playPromptSound(e,t,i){i&&e.playPromptAudio(N.getPromptAudioUrl(t))}static UrlSubstring="/feedthemonster";static subdomain="https://feedthemonster.curiouscontent.org";static getConvertedDevProdURL(e){return Q.DevelopmentLink?e.slice(0,e.indexOf(this.UrlSubstring)+this.UrlSubstring.length)+"dev"+e.slice(e.indexOf(this.UrlSubstring)+this.UrlSubstring.length):Q.TestLink?e.replace(this.subdomain,a):e}static getResponsiveCanvasWidth(){const e=window.innerWidth,t=window.innerHeight;return e>1080&&t<650?380:e>1080?500:e}static getLanguageSpecificFont(e){const t=e.toLowerCase();for(const e in z)if(e.toLowerCase()===t)return z[e];return"NotoSans-Regular"}static getRandomNumber(e,t){return Math.floor(Math.random()*(t-e+1))+e}static getExcludedCoordinates(e,t){return{excludeX:e.width*(t/100),excludeY:e.height*(t/100)}}}function F(e,t){const i={};let n=0;const s=Object.keys(e).length;for(let r in e)i[r]=new Image,i[r].onload=function(){++n>=s&&t(i)},i[r].src=e[r]}const U=async e=>{const t=Object.keys(e).map((async t=>{const i=await(async e=>{const t=new Image;return new Promise((i=>{t.onload=()=>i(t),t.src=e}))})(e[t]);return{[t]:i}}));return(await Promise.all(t)).reduce(((e,t)=>({...e,...t})),{})};const V=()=>"visible"===document.visibilityState,H=(e=!1,t)=>{e?t.classList.remove("show"):t.classList.add("show")},$=(e,t)=>W(e)?`Sound${t}`:t,W=e=>"Visible"!==e,G=new URLSearchParams(window.location.search);var Y=G.get("cr_user_id"),X=null==G.get("source")?null:G.get("source"),K=null==G.get("campaign_id")?null:G.get("campaign_id"),q=null==G.get("cr_lang")?"english":G.get("cr_lang");const J=N.getLanguageSpecificFont(q),Q={DevelopmentLink:!!window.location.href.includes("https://feedthemonsterdev.curiouscontent.org"),TestLink:!!window.location.href.includes(a),DebugMode:!1},Z="loadpuzzle",ee="stonesdropped",te="mousemove",ie="mousedown",ne="mouseup",se="touchstart",re="touchmove",oe="touchend",ae="click",le="visibilitychange",ce="./lang/"+q+"/ftm_"+q+".json";async function ue(){return await fetch(ce,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json().then((e=>e))))}class de{title;otherAudios;levels;FeedbackTexts;FeedbackAudios;rightToLeft;majVersion;minVersion;version;constructor(e,t,i,n,s,r,o,a,l){this.title=e,this.otherAudios=new he(t),this.levels=this.getLevels(i),this.FeedbackTexts=new pe(n),this.FeedbackAudios=new me(r),this.rightToLeft=s,this.majVersion=o,this.minVersion=a,this.version=l}getLevels(e){let t=[];for(let i=0;i<e.length;i++)t.push(new ge(e[i]));return t}}class he{selctYourPlayer;watchMeGrow;areYouSure;constructor(e){this.selctYourPlayer=e["Select your player"],this.watchMeGrow=e["Watch me grow"],this.areYouSure=e["Are you sure"]}}class pe{fantastic;great;amazing;constructor(e){e.length>=1&&(this.fantastic=e[0]),e.length>=2&&(this.great=e[1]),e.length>=3&&(this.amazing=e[2])}}class me{fantastic;great;amazing;constructor(e){e.length>=1&&(this.fantastic=e[0]),e.length>=2&&(this.great=e[1]),e.length>=3&&(this.amazing=e[2])}}class ge{puzzles;levelMeta;levelNumber;constructor(e){this.puzzles=this.getPuzzleData(e),this.levelMeta=new be(e.LevelMeta),this.levelNumber=e.LevelNumber}getPuzzleData(e){let t=[];return e.Puzzles.map(((e,i)=>{t.push(new fe(e))})),t}}class fe{segmentNumber;prompt;foilStones;targetStones;constructor(e){this.segmentNumber=e.SegmentNumber,this.prompt=new ve(e.prompt),this.foilStones=this.getFoilStones(e),this.targetStones=this.getTargetStones(e)}getFoilStones(e){let t=[];return e.foilstones.map(((e,i)=>{t.push(e.StoneText)})),t}getTargetStones(e){let t=[];return e.targetstones.map(((e,i)=>{t.push(e.StoneText)})),t}}class ve{promptText;promptAudio;constructor(e){this.promptText=e.PromptText,this.promptAudio=e.PromptAudio}}class be{promptFadeOut;letterGroup;levelNumber;protoType;levelType;constructor(e){this.promptFadeOut=e.PromptFadeout,this.letterGroup=e.LetterGroup,this.levelNumber=e.LevelNumber,this.protoType=e.PromptType,this.levelType=e.LevelType}}class ye{static currentlanguage=q;static setGameLevelScore(e,t){let i=this.calculateStarCount(t),n={levelName:e.levelMeta.levelType,levelNumber:e.levelMeta.levelNumber,score:t,starCount:i},s=this.getAllGameLevelInfo(),r=s.findIndex((e=>e.levelNumber===n.levelNumber));-1!==r?n.score>s[r].score&&(s[r]=n):s.push(n),localStorage.setItem(this.currentlanguage+"gamePlayedInfo",JSON.stringify(s)),this.updateTotalStarCount()}static getAllGameLevelInfo(){const e=localStorage.getItem(this.currentlanguage+"gamePlayedInfo");return e?JSON.parse(e):[]}static updateTotalStarCount(){const e=this.getAllGameLevelInfo().reduce(((e,t)=>e+t.starCount),0);localStorage.setItem(this.currentlanguage+"totalStarCount",e.toString())}static getTotalStarCount(){const e=localStorage.getItem(this.currentlanguage+"totalStarCount");return null==e?0:parseInt(e)}static calculateStarCount(e){switch(e){case 200:return 1;case 300:case 400:return 2;case 500:return 3;default:return 0}}static getDatafromStorage(){const e=Q.DebugMode?"ProfileDebug":"Profile";return JSON.parse(localStorage.getItem(q+e)||"{}")}}const _e={default:"Atma-SemiBold",english:"Atma-SemiBold",swahili:"Atma-SemiBold",wolof:"Atma-SemiBold",tajik:"Atma-SemiBold",marathi:"Atma-SemiBold",amharic:"Atma-SemiBold",punjabi:"Atma-SemiBold",tamil:"Atma-SemiBold",sepedi:"Atma-SemiBold",gujarati:"Atma-SemiBold",telugu:"Atma-SemiBold",tsonga:"Atma-SemiBold",malay:"Atma-SemiBold",ndebele:"Atma-SemiBold",venda:"Atma-SemiBold",siswati:"Atma-SemiBold",tswana:"Atma-SemiBold",thai:"Atma-SemiBold",fula:"Atma-SemiBold",farsi:"Atma-SemiBold",burmese:"Atma-SemiBold",bengali:"Atma-SemiBold",Azerbaijani:"Atma-SemiBold",Sesotho:"Atma-SemiBold",Georgian:"Atma-SemiBold",BrazilianPortuguese:"Atma-SemiBold",Somali:"Atma-SemiBold",Hausa:"Atma-SemiBold",Igbo:"Atma-SemiBold",HatianCreole:"Atma-SemiBold",Oromo:"Atma-SemiBold",Luganda:"Atma-SemiBold",Yoruba:"Atma-SemiBold",Khmer:"Atma-SemiBold",Javanese:"Atma-SemiBold",Urdu:"Atma-SemiBold",Kinyarwanda:"Atma-SemiBold",Shona:"Atma-SemiBold",Kurdish:"Atma-SemiBold",French:"Atma-SemiBold",isiXhosa:"Atma-SemiBold",Afrikaans:"Atma-SemiBold",Nepali:"Atma-SemiBold",Ukrainian:"Atma-SemiBold",Hindi:"Atma-SemiBold",Tagalog:"Atma-SemiBold",Vietnamese:"Atma-SemiBold",Pashto:"Atma-SemiBold",Twi:"Atma-SemiBold",Arabic:"Atma-SemiBold"};class we{audioContext;sourceNode;audioQueue;promptAudioBuffer;clickSoundBuffer;static audioBuffers=new Map;audioSourcs=[];isClickSoundLoaded;constructor(){this.audioContext=Se.getAudioContext(),this.sourceNode=null,this.audioQueue=[],this.clickSoundBuffer=null,this.isClickSoundLoaded=!1}async playButtonClickSound(){const e="./assets/audios/ButtonClick.mp3";if(!this.isClickSoundLoaded)try{this.clickSoundBuffer=await this.loadAndDecodeAudio(e),we.audioBuffers.set(e,this.clickSoundBuffer),this.isClickSoundLoaded=!0}catch(e){return void console.error("Error loading or decoding click sound:",e)}if(this.clickSoundBuffer){const e=this.audioContext.createBufferSource();e.buffer=this.clickSoundBuffer,e.connect(this.audioContext.destination),e.start()}else console.error("Click sound buffer is not available.")}async loadAndDecodeAudio(e){return new Promise((async(t,i)=>{try{const i=await fetch(e),n=await i.arrayBuffer();t(await this.audioContext.decodeAudioData(n))}catch(e){console.error("Error loading or decoding audio:",e),i(e)}}))}async preloadPromptAudio(e){const t=await this.loadAndDecodeAudio(e);t&&(this.promptAudioBuffer=t)}async preloadGameAudio(e){if(we.audioBuffers.has(e))return;const t=await this.loadAndDecodeAudio(e);t&&we.audioBuffers.set(e,t)}playAudio(e){const t=we.audioBuffers.get(e);if(t){const e=this.audioContext.createBufferSource();e.buffer=t,e.connect(this.audioContext.destination),this.audioSourcs.push(e),e.start()}}playAudioQueue=(e=!1,...t)=>{t.length>0&&(this.audioQueue=t,this.playFetch(0,e))};playPromptAudio=e=>{if(this.promptAudioBuffer){const e=this.audioContext.createBufferSource();e.buffer=this.promptAudioBuffer,e.connect(this.audioContext.destination),this.audioSourcs.push(e),e.start()}};stopFeedbackAudio=()=>{this.sourceNode&&(this.sourceNode.stop(),this.sourceNode=null),this.audioQueue=[]};stopAllAudios=()=>{this.sourceNode&&(this.sourceNode.stop(),this.sourceNode=null),this.audioQueue=[],this.audioSourcs.forEach((e=>{e.stop()})),this.audioSourcs=[]};playFetch=(e,t)=>{e>=this.audioQueue.length?this.stopFeedbackAudio():this.audioQueue[e]&&fetch(this.audioQueue[e]).then((e=>e.arrayBuffer())).then((i=>{this.audioContext?.decodeAudioData(i,(i=>{this.sourceNode=this.audioContext?.createBufferSource(),this.sourceNode.buffer=i,this.sourceNode.connect(this.audioContext?.destination),this.sourceNode.loop=t,this.sourceNode.onended=()=>this.handleAudioEnded(e,t),this.sourceNode.start()}))}))};handleAudioEnded=(e,t)=>{this.sourceNode&&(this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.disconnect(),this.sourceNode=null),this.playFetch(e+1,t)}}class Se{static instance=null;static getAudioContext(){return Se.instance||(Se.instance=new(window.AudioContext||window.webkitAudioContext)),Se.instance}}class Ee{id;element;audioPlayer;clickListener;constructor(e){this.id=e.id,this.audioPlayer=new we;const t=document.getElementById(e.id);t?this.element=t:(this.element=this.createButtonElement(e),this.injectButtonIntoTarget(e.targetId||"game-control")),e.onClick&&this.onClick(e.onClick)}onClick(e){this.clickListener=t=>{t.preventDefault(),this.element.hasAttribute("disabled")||(this.audioPlayer&&this.audioPlayer.playButtonClickSound(),this.element.style.transform="scale(0.90)",setTimeout((()=>{this.element.style.transform="scale(1)"}),100),e())},this.element.addEventListener("click",this.clickListener)}createButtonElement({id:e,className:t="",imageSrc:i,imageAlt:n="Button Image"}){const s=document.createElement("div");return s.innerHTML=`\n      <button id="${e}" class="dynamic-button ${t}">\n        ${i?`<img src="${i}" alt="${n}" class="button-image" />`:""}\n      </button>\n    `,s.firstElementChild}injectButtonIntoTarget(e){const t=document.getElementById(e);t&&t.appendChild(this.element)}setDisabled(e){e?(this.element.setAttribute("disabled","true"),this.element.classList.add("disabled")):(this.element.removeAttribute("disabled"),this.element.classList.remove("disabled"))}dispose(){this.clickListener&&(this.element.removeEventListener("click",this.clickListener),this.clickListener=null),this.audioPlayer=null}getElement(){return this.element}destroy(){const e=document.getElementById(this.id);e&&e.remove()}}class Te extends Ee{constructor(e={}){super({id:e.id||"pause-button",className:e.className||"pause-button-image",imageSrc:"./assets/images/Pause_Button.svg",imageAlt:e.imageAlt||"Pause Icon",targetId:e.targetId||"game-control",...e})}}class xe{handler;stoneDropCallbackHandler;loadPuzzleCallbackHandler;constructor(e){this.handler=e,this.stoneDropCallbackHandler=e.stoneDropCallbackHandler,this.loadPuzzleCallbackHandler=e.loadPuzzleCallbackHandler,document.addEventListener(ee,this.handleStoneDroppedEvent,!1),document.addEventListener(Z,this.handleLoadPuzzleEvent,!1)}handleStoneDroppedEvent=e=>{this.stoneDropCallbackHandler(e)};handleLoadPuzzleEvent=e=>{this.loadPuzzleCallbackHandler(e)};unregisterEventListener=()=>{document.removeEventListener(ee,this.handleStoneDroppedEvent,!1),document.removeEventListener(Z,this.handleLoadPuzzleEvent,!1)}}class Ce{options;isRendered=!1;id;template;shouldSanitize;constructor(e,t,i,n=!1){this.options=e,this.id=t,this.template=i,this.shouldSanitize=n,this._init()}_init(){this.shouldSanitize&&this.sanitizeElement(),this.render()}render(){if(this.isRendered)return;const{root:e}=this.options.selectors,t=document.querySelector(e),i=this.template(this.id);t&&t.insertAdjacentHTML("beforeend",i),this.isRendered=!0}getElements(e){return document.querySelectorAll(e)}sanitizeElement(){const e=document.querySelectorAll(`#${this.id}`);e.length&&e.forEach((e=>{e.remove()}))}destroy(){const e=document.getElementById(this.id);e&&e.remove(),this.isRendered=!1}}var Ie=i(72),Pe=i.n(Ie),Ae=i(825),ke=i.n(Ae),Le=i(659),De=i.n(Le),Me=i(56),je=i.n(Me),Be=i(540),Oe=i.n(Be),Re=i(113),ze=i.n(Re),Ne=i(632),Fe={};Fe.styleTagTransform=ze(),Fe.setAttributes=je(),Fe.insert=De().bind(null,"head"),Fe.domAPI=ke(),Fe.insertStyleElement=Oe();Pe()(Ne.A,Fe);Ne.A&&Ne.A.locals&&Ne.A.locals;const Ue={root:".game-control",bars:".bar-level"},Ve=e=>`\n    <div id="${e}" class="level_content-wrapper">\n        <img class="level-background" src="./assets/images/levels_v01.svg"/>\n        <div class="bar-level-wrapper">\n           ${Array(5).fill('<img class="bar-level" src="./assets/images/bar_empty_v01.svg" alt="bar" />').join("")}\n        </div>\n    </div>\n  `;class He extends Ce{constructor(e="level-field",t={selectors:Ue}){super(t,e,Ve)}updateLevel(e){const t=e-1;if(t<0)return;const{bars:i}=this.options.selectors,n=this.getElements(i);n.length&&n[t]&&(n[t].src="./assets/images/bar_full_v01.svg")}}class $e extends xe{levelBarIndicator;constructor(){super({stoneDropCallbackHandler:e=>this.handleStoneDrop(e),loadPuzzleCallbackHandler:e=>this.handleLoadPuzzle(e)}),this.levelBarIndicator=new He}setIndicators(e){this.levelBarIndicator.updateLevel(e)}addDropStoneEvent(){document.addEventListener("dropstone",(e=>{this.setIndicators(2)}))}dispose(){this.unregisterEventListener(),this.levelBarIndicator.destroy()}handleStoneDrop(e){}handleLoadPuzzle(e){this.setIndicators(e.detail.counter)}}var We=i(970),Ge={};Ge.styleTagTransform=ze(),Ge.setAttributes=je(),Ge.insert=De().bind(null,"head"),Ge.domAPI=ke(),Ge.insertStyleElement=Oe();Pe()(We.A,Ge);We.A&&We.A.locals&&We.A.locals;const Ye={root:"#background",promptText:".prompt-text",promptBackground:".prompt-background",promptPlayButton:".prompt-play-button"};class Xe extends Ce{shouldPlayTutorialPromptAudio;width;height;levelData;currentPromptText;currentPuzzleData;targetStones;rightToLeft;audioPlayer;isStoneDropped=!1;droppedStones=0;droppedStoneCount=0;time=0;isAppForeground=!0;scale=1;isScalingUp=!0;scaleFactor=5e-4;translateY=0;isTranslatingUp=!0;translateFactor=.05;promptContainer;promptBackground;promptTextElement;promptPlayButtonElement;animationFrameId;eventManager;containerId;onClickCallback;constructor(e,t,i,n,s,r="prompt-container",o={selectors:Ye},a,l){super(o,r,(e=>((e,t)=>`\n        <div id="${e}" class="prompt-container">\n            <div id="prompt-background" class="prompt-background" style="background-image: url(${W(t.levelMeta.protoType)?null:"./assets/images/Prompt_Text_BG.svg"})">\n                <div id="prompt-text-button-container">\n                    <div id="prompt-text" class="prompt-text"></div>\n                    <div id="prompt-play-button" class="prompt-play-button" style="background-image: url(./assets/images/audio_icon.png); pointer-events: auto;"></div>\n                </div>\n            </div>\n        </div>\n    `)(e,n))),this.containerId=r,this.eventManager=new xe({stoneDropCallbackHandler:e=>this.handleStoneDrop(e),loadPuzzleCallbackHandler:e=>this.handleLoadPuzzle(e)}),this.width=e,this.height=t,this.levelData=n,this.rightToLeft=s,this.currentPromptText=i.prompt.promptText,this.currentPuzzleData=i,this.targetStones=this.currentPuzzleData.targetStones,this.audioPlayer=new we,this.audioPlayer.preloadPromptAudio(N.getPromptAudioUrl(this.currentPuzzleData)),document.addEventListener(le,this.handleVisibilityChange,!1),this.initializeHtmlElements(),this.startAnimationLoop(),this.onClickCallback=a,this.shouldPlayTutorialPromptAudio=l}initializeHtmlElements(){this.promptContainer=document.getElementById(this.containerId),this.promptBackground=this.promptContainer.querySelector("#prompt-background"),this.promptTextElement=this.promptContainer.querySelector("#prompt-text"),this.promptPlayButtonElement=this.promptContainer.querySelector("#prompt-play-button");const e=e=>{N.playPromptSound(this.audioPlayer,this.currentPuzzleData,this.isAppForeground),this.onClickCallback&&this.onClickCallback(),e.stopPropagation()};this.promptPlayButtonElement.addEventListener("click",e),this.promptBackground.addEventListener("click",e),this.promptTextElement.addEventListener("click",e),this.promptBackground.style.pointerEvents="auto",this.promptTextElement.style.pointerEvents="auto",this.promptTextElement.style.fontSize=`${this.calculateFont()}px`,this.updateTextDisplay()}getPromptAudioUrl=()=>N.getConvertedDevProdURL(this.currentPuzzleData.prompt.promptAudio);playSound=()=>{this.isAppForeground&&(console.log("Playing prompt audio:",this.getPromptAudioUrl()),this.audioPlayer.playPromptAudio(this.getPromptAudioUrl()))};updateRTLText(){if(this.promptTextElement.innerHTML="",this.promptTextElement.style.direction="rtl",this.promptTextElement.setAttribute("dir","rtl"),this.promptTextElement.style.textAlign="center","LetterInWord"==this.levelData.levelMeta.levelType)if("Visible"==this.levelData.levelMeta.protoType){const e=document.createElement("span");e.style.direction="rtl",e.style.unicodeBidi="embed",e.style.textAlign="center",e.style.width="100%",e.style.display="inline-block";const t=this.targetStones[0],i="string"==typeof t?t:t.StoneText,n=this.currentPromptText.split(i);n.length>1?e.innerHTML=n.join(`<span class="text-red-pulse-letter">${i}</span>`):e.textContent=this.currentPromptText,this.promptTextElement.appendChild(e),this.promptTextElement.style.display="block",this.promptPlayButtonElement.style.display="none"}else this.updateCenteredPlayButton();else if("Word"==this.levelData.levelMeta.levelType)if("Visible"==this.levelData.levelMeta.protoType){const e=document.createElement("span");e.style.direction="rtl",e.style.unicodeBidi="embed",e.style.textAlign="center",e.style.width="100%",e.style.display="inline-block";let t="";for(let e=0;e<this.targetStones.length;e++){const i="string"==typeof this.targetStones[e]?this.targetStones[e]:this.targetStones[e].StoneText;t+=`<span class="${e<this.droppedStones?"text-black":"text-red"}">${i}</span>`}e.innerHTML=t,this.promptTextElement.appendChild(e),this.promptTextElement.style.display="block",this.promptPlayButtonElement.style.display="none"}else this.updateCenteredPlayButton();else if("audioPlayerWord"==this.levelData.levelMeta.levelType)this.updateCenteredPlayButton();else if("Visible"==this.levelData.levelMeta.protoType){const e=document.createElement("span");e.className="text-black",e.style.direction="rtl",e.style.unicodeBidi="embed",e.style.textAlign="center",e.style.width="100%",e.style.display="inline-block",e.textContent=this.currentPromptText,this.promptTextElement.appendChild(e),this.promptTextElement.style.display="block",this.promptPlayButtonElement.style.display="none"}else this.updateCenteredPlayButton()}updateLTRText(){if(this.promptTextElement.innerHTML="",this.promptTextElement.style.direction="ltr",this.promptTextElement.setAttribute("dir","ltr"),this.promptTextElement.style.textAlign="center","LetterInWord"===this.levelData.levelMeta.levelType&&"Visible"==this.levelData.levelMeta.protoType){const e=document.createElement("span");e.style.direction="ltr",e.style.textAlign="center",e.style.width="100%",e.style.display="inline-block",e.style.letterSpacing="4px";const t=this.targetStones[0],i="string"==typeof t?t:t.StoneText;let n="",s=!1,r=0;for(;r<this.currentPromptText.length;){if(!s&&r>=this.droppedStones){if(this.currentPromptText.substring(r,r+i.length)===i){n+=`<span class="text-red-pulse-letter">${i}</span>`,r+=i.length,s=!0;continue}}n+=this.currentPromptText[r],r++}return e.innerHTML=n,this.promptTextElement.appendChild(e),this.promptTextElement.style.display="block",void(this.promptPlayButtonElement.style.display="none")}switch(this.levelData.levelMeta.levelType){case"Word":if("Visible"==this.levelData.levelMeta.protoType){const e=document.createElement("span");e.style.direction="ltr",e.style.textAlign="center",e.style.width="100%",e.style.display="inline-block";let t="";if(this.targetStones.length!=this.currentPromptText.length)for(let e=0;e<this.targetStones.length;e++){const i="string"==typeof this.targetStones[e]?this.targetStones[e]:this.targetStones[e].StoneText;t+=`<span class="${e<this.droppedStones?"text-black":"text-red"}${e>0?" letter-spacing":""}">${i}</span>`}else if(this.droppedStones>=this.targetStones.length)t=`<span class="text-black">${this.currentPromptText}</span>`;else for(let e=0;e<this.targetStones.length;e++){const i="string"==typeof this.targetStones[e]?this.targetStones[e]:this.targetStones[e].StoneText;t+=`<span class="${e<this.droppedStones?"text-black":"text-red"}">${i}</span>`}e.innerHTML=t,this.promptTextElement.appendChild(e),this.promptTextElement.style.display="block",this.promptPlayButtonElement.style.display="none"}else this.updateCenteredPlayButton();break;case"SoundWord":this.updateCenteredPlayButton();break;default:if("Visible"==this.levelData.levelMeta.protoType){const e=document.createElement("span");e.className="text-black",e.style.direction="ltr",e.style.textAlign="center",e.style.width="100%",e.style.display="inline-block",e.textContent=this.currentPromptText,this.promptTextElement.appendChild(e),this.promptTextElement.style.display="block",this.promptPlayButtonElement.style.display="none"}else this.updateCenteredPlayButton()}}updateCenteredPlayButton(){this.promptPlayButtonElement.style.display="block",this.promptTextElement.style.display="none",this.promptPlayButtonElement.style.pointerEvents="auto"}updateTextDisplay(){const e=this.calculateFont();this.promptTextElement.style.fontSize=`${e}px`,this.rightToLeft?this.updateRTLText():this.updateLTRText()}startAnimationLoop(){let e=0;const t=i=>{e||(e=i);const n=i-e;e=i,this.time+=n,this.shouldPlayTutorialPromptAudio&&this.shouldPlayTutorialPromptAudio(this)&&this.playSound(),this.isStoneDropped||W(this.levelData.levelMeta.protoType)||(this.updateScaling(),this.updateTranslation(),this.promptBackground.style.transform=`translateX(-50%) scale(${this.scale}) translateY(${this.translateY}px)`,this.promptContainer.style.display="block"),this.animationFrameId=requestAnimationFrame(t)};this.animationFrameId=requestAnimationFrame(t)}handleStoneDrop(e){this.isStoneDropped=!0,this.promptContainer.style.display="none"}handleLoadPuzzle(e){this.droppedStones=0,this.droppedStoneCount=0,this.currentPuzzleData=this.levelData.puzzles[e.detail.counter],this.currentPromptText=this.currentPuzzleData.prompt.promptText,this.targetStones=this.currentPuzzleData.targetStones,this.audioPlayer.preloadPromptAudio(N.getPromptAudioUrl(this.currentPuzzleData)),this.isStoneDropped=!1,this.time=0,this.promptTextElement.style.fontSize=`${this.calculateFont()}px`,this.updateTextDisplay(),this.promptContainer.style.display="block"}dispose(){document.removeEventListener(le,this.handleVisibilityChange,!1),this.eventManager.unregisterEventListener(),this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),super.destroy()}droppedLetterIndex(e){this.droppedStones=e,this.droppedStoneCount++,this.isStoneDropped||this.updateTextDisplay()}calculateFont(){return.65*this.width/this.currentPromptText.length>35?25:.65*this.width/this.currentPromptText.length}updateScaling(){this.isScalingUp?(this.scale+=this.scaleFactor,this.scale>=1.05&&(this.isScalingUp=!1)):(this.scale-=this.scaleFactor,this.scale<=.95&&(this.scale=.95,this.isScalingUp=!0))}updateTranslation(){this.isTranslatingUp?(this.translateY-=this.translateFactor,this.translateY<=-5&&(this.isTranslatingUp=!1)):(this.translateY+=this.translateFactor,this.translateY>=5&&(this.translateY=5,this.isTranslatingUp=!0))}handleVisibilityChange=()=>{"hidden"==document.visibilityState&&(this.audioPlayer.stopAllAudios(),this.isAppForeground=!1),"visible"==document.visibilityState&&(this.isAppForeground=!0)}}const Ke=new class extends e{EVENTS;data;isGamePaused;gamePlayData;feedbackTexts;rightToLeft;majVersion;minVersion;monsterPhaseNumber;gameTypesFirstInstanceList;feedbackAudios;levelEndData;isLastLevel;currentMonsterPhase;tutorialOn=!1;hitboxRanges;constructor(){super(),this.EVENTS={START_GAME:"START_GAME",SWITCH_SCENE_EVENT:"SWITCH_SCENE_EVENT",GAMEPLAY_DATA_EVENT:"GAMEPLAY_DATA_EVENT",GAME_PAUSE_STATUS_EVENT:"GAME_PAUSE_STATUS_EVENT",LEVEL_END_DATA_EVENT:"LEVEL_END_DATA_EVENT",CORRECT_STONE_POSITION:"CORRECT_STONE_POSITION"},this.data=null,this.isGamePaused=!1,this.gamePlayData=null,this.feedbackAudios=null,this.feedbackTexts=null,this.rightToLeft=!1,this.majVersion=0,this.minVersion=0,this.initListeners(),this.levelEndData=null,this.isLastLevel=!1,this.tutorialOn=!1}initListeners(){this.subscribe(this.EVENTS.GAMEPLAY_DATA_EVENT,(e=>{this.gameStateGamePlayDataListener(e)})),this.subscribe(this.EVENTS.GAME_PAUSE_STATUS_EVENT,(e=>{this.updateGamePauseActivity(e)})),this.subscribe(this.EVENTS.LEVEL_END_DATA_EVENT,(e=>{this.levelEndSceneData(e)}))}gameStateGamePlayDataListener(e){this.gamePlayData=e,this.isGamePaused=!1}updateGamePauseActivity(e){this.isGamePaused=e}getFTMData(){return this.data}setDefaultGameStateValues(e){this.data=e,this.feedbackTexts=e.FeedbackTexts,this.feedbackAudios=e.FeedbackAudios,this.rightToLeft=e.rightToLeft,this.majVersion=e.majVersion,this.minVersion=e.minVersion,this.monsterPhaseNumber=this.checkMonsterPhaseUpdation(),this.gameTypesFirstInstanceList=this.getFirstInstanceOfEachGameTypes(e)}getFirstInstanceOfEachGameTypes(e){if(e.levels){const t=e.levels,i={};let n=null;return t.forEach(((e,t)=>{const{levelType:s,levelNumber:r,protoType:o}=e?.levelMeta;n=$(o,s),i.hasOwnProperty(n)||(i[n]={levelNumber:r,isCleared:this.checkClearedLevels(r)})})),i}return{}}checkClearedLevels(e){const t=ye.getAllGameLevelInfo();let i=!1;return t.every((t=>t.levelNumber!==e||(i=!0,!1))),i}setClearedTutorial(e){this.gameTypesFirstInstanceList[e]&&(this.gameTypesFirstInstanceList[e].isCleared=!0)}getGameTypeList(){return this.gameTypesFirstInstanceList}getGamePlaySceneDetails(){const e=this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"";let t=!1,i=!1;const n=this.gamePlayData.selectedLevelNumber,s="string"==typeof n?parseInt(n):n;return Object.values(this.gameTypesFirstInstanceList).forEach((e=>{if(e?.levelNumber===s)return i=e?.isCleared,t=!0,!1})),{levelData:{...this.gamePlayData.currentLevelData},levelNumber:s,feedBackTexts:{...this.feedbackTexts},rightToLeft:this?.rightToLeft,jsonVersionNumber:e,feedbackAudios:{...this.feedbackAudios},isGamePaused:this.isGamePaused,data:this.data,isLastLevel:this.isLastLevel,monsterPhaseNumber:this.monsterPhaseNumber,tutorialOn:t,isTutorialCleared:i}}levelEndSceneData({levelEndData:e,data:t}){this.levelEndData={...e},this.data=t,this.isLastLevel=e.currentLevel===t.levels[t.levels.length-1].levelMeta.levelNumber}getLevelEndSceneData(){return{starCount:this.levelEndData.starCount,currentLevel:this.levelEndData.currentLevel,isTimerEnded:this.levelEndData.isTimerEnded,data:this.data,monsterPhaseNumber:this.monsterPhaseNumber}}getTotalStars(){return ye.getTotalStarCount()}checkMonsterPhaseUpdation(){const e=this.getTotalStars();switch(!0){case e>=38:return 3;case e>=23:return 2;case e>=8:return 1;default:return 0}}updateMonsterPhaseState(e){this.monsterPhaseNumber=e}saveHitBoxRanges(e){this.hitboxRanges=e}getHitBoxRanges(){return this.hitboxRanges}};class qe extends xe{offsetCoordinateValue;context;canvas;currentPuzzleData;targetStones;stonePos;pickedStone;foilStones=new Array;answer="";puzzleNumber;levelData;correctAnswer;puzzleStartTime;correctTargetStone;stonebg;audioPlayer;originalWidth;originalHeight;stonesHasLoaded=!1;activeStones=new Array;constructor(e,t,i,n){super({stoneDropCallbackHandler:e=>this.handleStoneDrop(e),loadPuzzleCallbackHandler:e=>this.handleLoadPuzzle(e)}),this.cleanup(),this.offsetCoordinateValue=32,this.context=e,this.canvas=t,this.originalWidth=this.canvas.width,this.originalHeight=this.canvas.height,this.puzzleNumber=i,this.levelData=n,this.setTargetStone(this.puzzleNumber),this.stonePos=this.getRandomizedStonePositions(t.width,t.height),this.puzzleStartTime=new Date,this.stonebg=new Image,this.stonebg.src="./assets/images/Pink_Stone.svg",this.stonebg.onload=e=>{this.createStones(this.stonebg)},this.audioPlayer=new we,document.addEventListener(le,this.handleVisibilityChange,!1)}shuffleArray(e){const t=[...e];for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}createStones(e){this.disposeStones();const i=this.getFoilStones(),s=this.shuffleArray(this.stonePos),r=t.getDevicePixelRatioValue();this.canvas.width=this.canvas.clientWidth*r,this.canvas.height=this.canvas.clientHeight*r,this.context.scale(r,r);for(let t=0;t<i.length;t++){const r=new n(this.context,this.canvas.width,this.canvas.height,i[t],s[t][0],s[t][1],e);if(r.initialize(),0===this.currentPuzzleData.segmentNumber){const n="Word"===this.levelData?.levelMeta?.levelType;i[t]==this.correctTargetStone&&Ke.publish(Ke.EVENTS.CORRECT_STONE_POSITION,{stonePosVal:s[t],img:e,levelData:this.levelData}),n&&t===i.length-1&&Ke.publish(Ke.EVENTS.CORRECT_STONE_POSITION,{stonePosVal:s,img:e,levelData:this.levelData})}this.foilStones.push(r)}this.activeStones=this.foilStones.filter((e=>e&&!e.isDisposed))}draw(){if(0!==this.foilStones.length){for(const e of this.foilStones)e.draw();!this.stonesHasLoaded&&this.areStonesReadyForPlay()}}drawWordPuzzleLetters(e,t){for(let i=0;i<this.foilStones.length;i++)e(i)&&this.foilStones[i].draw(Object.keys(t).length>1&&void 0!==t[i]);!this.stonesHasLoaded&&this.areStonesReadyForPlay()}areStonesReadyForPlay(){this.foilStones[this.foilStones.length-1].frame>=100&&(this.stonesHasLoaded=!0)}setTargetStone(e){this.currentPuzzleData=this.levelData.puzzles[e],this.targetStones=[...this.currentPuzzleData.targetStones],this.correctTargetStone=this.targetStones.join("")}handleStoneDrop(e){this.disposeStones()}handleLoadPuzzle(e){this.disposeStones(),this.puzzleNumber=e.detail.counter,this.setTargetStone(this.puzzleNumber),this.createStones(this.stonebg)}dispose(){this.canvas.width=this.originalWidth,this.canvas.height=this.originalHeight,document.removeEventListener(le,this.handleVisibilityChange,!1),this.unregisterEventListener()}cleanup(){this.disposeStones(),document.removeEventListener(le,this.handleVisibilityChange)}getCorrectTargetStone(){return this.correctTargetStone}getFoilStones(){this.currentPuzzleData.targetStones.forEach((e=>{const t=this.currentPuzzleData.foilStones.indexOf(e);-1!==t&&this.currentPuzzleData.foilStones.splice(t,1)}));const e=this.currentPuzzleData.targetStones.length+this.currentPuzzleData.foilStones.length;if(e>8){const t=e-8;this.currentPuzzleData.foilStones.splice(0,t)}return this.currentPuzzleData.targetStones.forEach((e=>{this.currentPuzzleData.foilStones.push(e)})),this.currentPuzzleData.foilStones.sort((()=>Math.random()-.5))}disposeStones(){for(const e of this.foilStones)e&&!e.isDisposed&&e.dispose();this.foilStones=[]}handleVisibilityChange=()=>{this.audioPlayer.stopAllAudios()};async playCorrectAnswerFeedbackSound(e){try{this.disposeStones()}catch(e){console.warn("Audio playback failed:",e)}}resetStonePosition(e,t,i){const n=t,s=i;if(n&&s&&n.text&&"number"==typeof s.origx&&"number"==typeof s.origy){const t=50,i=e/2;n.x=n.text.length<=3&&s.origx<t&&s.origx<i?s.origx+25:s.origx,n.y=s.origy}return n}computeCursorDistance(e,t,i){return Math.sqrt((e-i.x)**2+(t-i.y)**2)}handlePickStoneUp(e,t){let i=null,n=0;for(let s of this.foilStones){if(this.computeCursorDistance(e,t,s)<=40){i=s,i.foilStoneIndex=n;break}n++}return i}handleHoveringToAnotherStone(e,t,i){let n=null,s=0;for(let r of this.foilStones){if(this.computeCursorDistance(e,t,r)<=40&&i(r.text,s)){n=r,n.foilStoneIndex=s;break}s++}return n}handleMovingStoneLetter(e,t,i){const n=e,s=this.canvas.getBoundingClientRect();return n.x=t-s.left,n.y=i-s.top,n}playDragAudioIfNecessary(e){e.frame>99&&this.audioPlayer.playAudio("./assets/audios/onDrag.mp3")}hideStone(e){e&&(e.x=-999,e.y=-999)}getRandomizedStonePositions(e,t){const i=(t,i)=>540>e?i:t;return[[6.2,1.8],[7.5,1.5],[i(5.8,6.2),2.5],[6.4,1.1],[i(1.2,1.5),1],[[2.3,1.9],1.5],[[i(2.8,2.2),2.1],2.4],[[i(4.5,3.2),1.5],1.8]].map(((i,n)=>{const s=i[0],r=i[1];let o=Array.isArray(s)?e/s[0]+e/s[1]:e/s,a=t/r;const l=n<4?25:0;return[o-this.offsetCoordinateValue+l,a-this.offsetCoordinateValue]})).sort((()=>Math.random()-.5))}}class Je{element;constructor(e){this.element=document.getElementById(e)}setClassName(e){this.element&&(this.element.className="",this.element.classList.add(e))}createElementWithImage(e,t,i,n){const s=document.createElement("div");s.className=e;const r=document.createElement("img");return r.src=t,r.alt=i,r.id=n,s.appendChild(r),s}}class Qe extends Je{constructor(){super("background")}generateBackground(e){const t=document.getElementById("background-elements");if(!t)return;const i=this.getAssetsForSeason(e);this.clearBackgroundContent();const n=this.createBackgroundSection(e,i);t.appendChild(n)}static createBackgroundComponent(e){const t=["summer","autumn","winter"],i=Math.floor(e/10)%t.length,n=e>=30?t[i%3]:t[i];return this.updateBackgroundClass(n),n}createBackgroundGameplay(e){const t=document.getElementById("background-elements");if(!t)return;const i=this.getAssetsForSeason(e),n=document.createElement("div");n.className=`${e}-section`;const s=this.createElementWithImage("ftm-mountain",i.hill,"Hill","hill-img"),r=this.createElementWithImage("ftm-fence",i.fence,"Fence","fence-img"),o=this.createElementWithImage("ftm-totem",i.totem,"Totem","totem-img");n.append(s,r,o),t.appendChild(n)}getAssetsForSeason(e){switch(e){case"summer":return{hill:x.ASSETS_PATH_HILL,fence:x.ASSETS_PATH_FENCE,totem:x.ASSETS_PATH_TOTEM};case"autumn":return{hill:C.AUTUMN_HILL_1,fence:C.AUTUMN_FENCE_1,totem:C.AUTUMN_SIGN_1};case"winter":return{hill:I.WINTER_HILL_1,fence:I.WINTER_FENCE_1,totem:I.WINTER_SIGN_1};default:throw new Error("Unknown season: "+e)}}clearBackgroundContent(){const e=document.getElementById("background-elements");e&&(e.innerHTML="")}createBackgroundSection(e,t){const i=document.createElement("div");i.className=e;const n=this.createElementWithImage("ftm-mountain",t.hill,"Hill","hill-img"),s=this.createElementWithImage("ftm-fence",t.fence,"Fence","fence-img"),r=this.createElementWithImage("ftm-totem",t.totem,"Totem","totem-img");return i.append(n,s,r),i}static updateBackgroundClass(e){const t=document.getElementById("background"),i=`${e}-bg`;t&&t.className!==i&&(t.className=i)}}class Ze extends Je{constructor(){super("background")}getBackgroundElement(){return document.getElementById("background-elements")}generateBackground(e){const t=this.getBackgroundElement();if(!t)return;const i=this.getAssetsForPhase(e);this.clearBackgroundContent();const n=this.createBackgroundSection(i);t.appendChild(n)}getAssetsForPhase(e){return{placeholder:R[e]}}createBackgroundSection(e){const t=document.createElement("div");t.className="evolution-phase-bg";const i=this.createElementWithImage("phase-bg-img",e.placeholder,"PHASE BG","phasebg-img");return t.append(i),t}clearBackgroundContent(){const e=this.getBackgroundElement();e&&(e.innerHTML="")}}class et{feedbackTextElement;hideTimeoutId;constructor(){this.feedbackTextElement=document.getElementById("feedback-text"),this.hideTimeoutId=null,this.initialize()}initialize(){this.isFeedbackElementAvailable()}isFeedbackElementAvailable(){return!!this.feedbackTextElement}wrapText(e){this.isFeedbackElementAvailable()&&(this.feedbackTextElement.textContent=e,H(!1,this.feedbackTextElement))}hideText(){this.isFeedbackElementAvailable()&&H(!0,this.feedbackTextElement)}}var tt=i(278),it={};it.styleTagTransform=ze(),it.setAttributes=je(),it.insert=De().bind(null,"head"),it.domAPI=ke(),it.insertStyleElement=Oe();Pe()(tt.A,it);tt.A&&tt.A.locals&&tt.A.locals;const nt={root:"#background"},st=e=>`\n  <div id="${e}" class="timer-ticking-wrapper">\n    <img id="timer-empty" class="timer-empty" src="${w}" alt="Timer Empty" />\n    <img id="rotating-clock" class="rotating-clock" src="${S}" alt="Rotating Clock" />\n    <div id="timer-full-container" class="timer-full-container">\n      <div class="timer-mask"></div>\n    </div>\n  </div>\n`;class rt extends Ce{constructor(e="timer-html-component",t={selectors:nt}){super(t,e,st),this.render()}}class ot extends xe{width;height;timerWidth;timerHeight;widthToClear;timer;isTimerStarted;isTimerEnded;isTimerRunningOut;pauseButtonClicked;images;loadedImages;callback;imagesLoaded=!1;startMyTimer=!0;isMyTimerOver=!1;isStoneDropped=!1;audioPlayer;playLevelEndAudioOnce=!0;timerFullContainer=null;timerHtmlComponent;constructor(e,t,i){super({stoneDropCallbackHandler:e=>this.handleStoneDrop(e),loadPuzzleCallbackHandler:e=>this.handleLoadPuzzle(e)}),this.width=e,this.height=t,this.widthToClear=this.width/3.4,this.callback=i,this.timer=0,this.isTimerStarted=!1,this.isTimerEnded=!1,this.isTimerRunningOut=!1,this.audioPlayer=new we,this.playLevelEndAudioOnce=!0,this.images={timer_empty:w,rotating_clock:S},this.timerHtmlComponent=new rt("timer-ticking"),setTimeout((()=>{this.timerFullContainer=document.getElementById("timer-full-container"),this.timerFullContainer&&(this.timerFullContainer.style.width="100%")}),0),F(this.images,(e=>{this.loadedImages=Object.assign({},e),this.imagesLoaded=!0})),this.timerFullContainer=this.getTimerFullContainer()}startTimer(){this.readyTimer(),this.startMyTimer=!0,this.isMyTimerOver=!1}readyTimer(){this.timer=0,this.timerFullContainer&&(this.timerFullContainer.style.width="100%")}update(e){if(this.startMyTimer&&!this.isStoneDropped){this.timer+=.008*e;const t=Math.max(0,100-this.timer);this.timerFullContainer.style.width=`${t}%`,t<100&&t>0&&this.applyRotation(!0),t<10&&!this.isMyTimerOver&&(this.playLevelEndAudioOnce&&this.audioPlayer.playAudio("./assets/audios/timeout.mp3"),this.playLevelEndAudioOnce=!1),t<=0&&!this.isMyTimerOver&&(this.isMyTimerOver=!0,this.applyRotation(!1),this.callback(!0))}}applyRotation(e){const t=document.getElementById("rotating-clock");t&&(e?(t.style.animationPlayState="running",t.style.animation&&"none"!==t.style.animation||(t.style.animation="rotateClock 3s linear infinite")):t.style.animation&&"none"!==t.style.animation?t.style.animationPlayState="paused":t.style.animation="none")}getTimerFullContainer(){return document.getElementById("timer-full-container")}stopTimer(){this.isTimerRunningOut=!1}handleStoneDrop(e){this.isStoneDropped=!0,this.applyRotation(!1)}handleLoadPuzzle(e){this.playLevelEndAudioOnce=!0,this.isStoneDropped=!1,this.startTimer()}destroy(){this.stopTimer(),this.timerHtmlComponent?.destroy()}}class at{eventHandler;hasEventsHooked=!1;constructor(e){this.eventHandler=e,this.handleCursorMouseUp=this.handleCursorMouseUp.bind(this),this.handleCursorMouseMove=this.handleCursorMouseMove.bind(this),this.handleCursorMouseDown=this.handleCursorMouseDown.bind(this),this.handleCursorTouchStart=this.handleCursorTouchStart.bind(this),this.handleCursorTouchMove=this.handleCursorTouchMove.bind(this),this.handleCursorTouchEnd=this.handleCursorTouchEnd.bind(this),this.handleCursorMouseClick=this.handleCursorMouseClick.bind(this)}handleCursorMouseUp(e){}handleCursorMouseMove(e){}handleCursorMouseDown(e){}handleCursorTouchStart(e){}handleCursorTouchMove(e){}handleCursorTouchEnd(e){}handleCursorMouseClick(e){}addEventListeners(){this.eventHandler.addEventListener(ne,this.handleCursorMouseUp,!1),this.eventHandler.addEventListener(te,this.handleCursorMouseMove,!1),this.eventHandler.addEventListener(ie,this.handleCursorMouseDown,!1),this.eventHandler.addEventListener(se,this.handleCursorTouchStart,!1),this.eventHandler.addEventListener(re,this.handleCursorTouchMove,!1),this.eventHandler.addEventListener(oe,this.handleCursorTouchEnd,!1),this.eventHandler.addEventListener(ae,this.handleCursorMouseClick,!1),this.hasEventsHooked=!0}removeEventListeners(){this.hasEventsHooked&&(this.eventHandler.removeEventListener(ne,this.handleCursorMouseUp,!1),this.eventHandler.removeEventListener(te,this.handleCursorMouseMove,!1),this.eventHandler.removeEventListener(ie,this.handleCursorMouseDown,!1),this.eventHandler.removeEventListener(se,this.handleCursorTouchStart,!1),this.eventHandler.removeEventListener(re,this.handleCursorTouchMove,!1),this.eventHandler.removeEventListener(oe,this.handleCursorTouchEnd,!1),this.eventHandler.removeEventListener(ae,this.handleCursorMouseClick,!1),this.hasEventsHooked=!1)}}class lt{ctx;particles;mouse;isDiamond;constructor(e){this.ctx=e.getContext("2d"),this.particles=[],this.mouse={x:void 0,y:void 0},this.isDiamond=!1,this.init()}init(){this.draw()}draw(){this.drawTrail();let e=[];for(let t=0;t<this.particles.length;t++)this.particles[t].time<=this.particles[t].ttl&&e.push(this.particles[t]);this.particles=e}drawTrail(){for(let e=0;e<this.particles.length;e++)this.particles[e].update(),this.isDiamond=!this.isDiamond,this.particles[e].draw(this.isDiamond)}addTrailParticlesOnMove(e,t){this.mouse.x=e,this.mouse.y=t,this.particles.push(new ct(this.ctx,this.mouse))}resetParticles(){this.mouse.x=void 0,this.mouse.y=void 0}}class ct{ctx;start;end;size;style;time;ttl;x;y;rgb;hyp;starX;starY;starAngle;constructor(e,t){const i=this.determineValueByScreenWidth(30,15),n=this.determineValueByScreenWidth(30,15),s=this.determineValueByScreenWidth(3,.5),r=this.determineValueByScreenWidth(2,.5);this.ctx=e,this.rgb=["rgb(255,255,255)","rgb(249,217,170)","rgb(244,182,81)","rgb(244,159,34)"],this.start={x:t.x+this.getRandomInt(-i,i),y:t.y+this.getRandomInt(-n,n),size:this.determineValueByScreenWidth(3,2)},this.end={x:this.start.x+this.getRandomInt(-s,s),y:this.start.y+this.getRandomInt(-r,r)},this.x=this.start.x,this.y=this.start.y,this.size=this.start.size,this.style=this.rgb[this.getRandomInt(0,this.rgb.length-1)],this.time=0,this.ttl=75,this.hyp=0,this.starX=0,this.starY=0,this.starAngle=0}determineValueByScreenWidth(e,t){return window.screen.width>768?e:t}update(){if(this.time<=this.ttl){const e=1-(this.ttl-this.time)/this.ttl;this.size=this.start.size*(1-this.easeOutQuart(e)),this.x=this.x+.01*(this.end.x-this.x),this.y=this.y+.01*(this.end.y-this.y)}this.time++}draw(e){e?this.starParticle():this.circleParticle()}circleParticle(){this.ctx.fillStyle=this.style,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.size,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill()}starParticle(){this.ctx.fillStyle=this.style,this.ctx.beginPath(),this.ctx.moveTo(this.x,this.y-this.size),this.ctx.lineTo(this.x+this.size,this.y),this.ctx.lineTo(this.x,this.y+this.size),this.ctx.lineTo(this.x-this.size,this.y),this.ctx.closePath(),this.ctx.fill()}getRandomInt(e,t){return Math.round(Math.random()*(t-e))+e}easeOutQuart(e){return 1-Math.pow(1-e,4)}}class ut extends at{trailParticles;canvas;clickTrailToggle;hasGameStarted=!1;constructor(e){super(e),this.canvas=e,this.clickTrailToggle=!1,this.hasGameStarted=!1,this.addEventListeners(),this.trailParticles=new lt(e)}setGameHasStarted(e){this.hasGameStarted=e}draw(){this.hasGameStarted&&this.clickTrailToggle&&this.trailParticles?.draw()}handleCursorMouseUp(e){this.clickTrailToggle=!1}handleCursorMouseMove(e){if(this.hasGameStarted&&this.clickTrailToggle){const t=this.canvas.getBoundingClientRect(),i=e.clientX-t.left,n=e.clientY-t.top;this.trailParticles?.addTrailParticlesOnMove(i,n)}}handleCursorMouseDown(e){this.clickTrailToggle=!0}handleCursorTouchStart(e){this.handleCursorMouseDown(e),this.trailParticles?.resetParticles()}handleCursorTouchMove(e){if(this.hasGameStarted&&this.clickTrailToggle){const t=e.touches[0];this.handleCursorMouseMove(e),this.trailParticles?.addTrailParticlesOnMove(t.clientX,t.clientY)}}handleCursorTouchEnd(e){this.handleCursorMouseUp(e),this.trailParticles?.resetParticles()}handleCursorMouseClick(e){}dispose(){this.removeEventListeners(),this.hasGameStarted=!1}}var dt=i(371),ht={};ht.styleTagTransform=ze(),ht.setAttributes=je(),ht.insert=De().bind(null,"head"),ht.domAPI=ke(),ht.insertStyleElement=Oe();Pe()(dt.A,ht);dt.A&&dt.A.locals&&dt.A.locals;class pt{width;height;context;tutorialImg;imagesLoaded=!1;animateImagePosVal;stonePosDetailsType;stoneImg;x=0;y=0;totalTime=0;centerX=0;centerY=0;initialOuterRadius=10;initialInnerRadius=10;maxRadius=60;increment=.5;outerRadius;innerRadius;constructor(e){this.context=e,this.tutorialImg=new Image,this.tutorialImg.src=E,this.tutorialImg.onload=()=>{this.imagesLoaded=!0},this.initializedRippleValues()}initializedRippleValues(){this.centerX=0,this.centerY=0,this.initialOuterRadius=10,this.initialInnerRadius=10,this.maxRadius=60,this.increment=.5,this.outerRadius=this.initialOuterRadius,this.innerRadius=this.initialInnerRadius}udpdateDrawPosition(e,t){const i=t/1.9+this.tutorialImg.height/.8,n=t/1.9+this.tutorialImg.height/.8-this.tutorialImg.height,s=this.totalTime<1e3,r=s?n+this.totalTime/1e3*(i-n):i-(this.totalTime-1e3)/1e3*(i-n);return r<=n&&(this.totalTime=0),this.totalTime+=e,{currentOffsetY:r,shouldResetOrRevertPosition:s}}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}drawPointer(e,t){this.context.drawImage(this.tutorialImg,e,t,this.tutorialImg.width,this.tutorialImg.height)}drawRipple(e,t,i){i&&(this.outerRadius=0,this.innerRadius=0),this.centerX=e,this.centerY=t,this.context.beginPath(),this.context.arc(this.centerX,this.centerY,this.outerRadius,0,2*Math.PI),this.context.strokeStyle="white",this.context.lineWidth=2,this.context.stroke(),this.context.closePath(),this.context.beginPath(),this.context.arc(this.centerX,this.centerY,this.innerRadius,0,2*Math.PI),this.context.strokeStyle="white",this.context.lineWidth=2,this.context.stroke(),this.context.closePath(),this.outerRadius+=this.increment,this.innerRadius+=this.increment,(this.outerRadius>=this.maxRadius||this.innerRadius>=this.maxRadius)&&(this.outerRadius=this.initialOuterRadius,this.innerRadius=this.initialInnerRadius)}animateImage({startX:e,startY:t,endX:i,endY:n}){const s=(i-e)/5e3,r=(n-t)/5e3;return{x:e,y:t,dx:s,dy:r,absdx:this.isMobile()?3*Math.abs(s):Math.abs(s),absdy:this.isMobile()?3*Math.abs(r):Math.abs(r)}}getHitboxPosition(){const e=Ke.getHitBoxRanges(),t=(e,t)=>(e+t)/2;return{endX:t(e.hitboxRangeX.from,e.hitboxRangeX.to),endY:t(e.hitboxRangeY.from,e.hitboxRangeY.to)}}updateTargetStonePositions(e){const t=e[0]-22,i=e[1]-50,{endX:n,endY:s}=this.getHitboxPosition(),r=Math.sqrt((t-n)*(t-n)+(i-s)*(i-s));return{animateImagePosVal:this.animateImage({startX:t,startY:i,endX:n,endY:s}),startX:t,startY:i,endX:n,endY:s,monsterStoneDifference:r}}animateStoneDrag({deltaTime:e,img:t,imageSize:i,monsterStoneDifferenceInPercentage:n,startX:s,startY:r,endX:o,endY:a}){if(n<15)n>1?(this.context.drawImage(t,o-20,a-20,i,i),this.createHandScaleAnimation(e,o,a,!0)):(this.x=s,this.y=r);else if(n>80)this.createHandScaleAnimation(e,s+15,r+10,!1);else{const e=this.context.globalAlpha;this.context.globalAlpha=.4,this.context.drawImage(t,this.x,this.y+20,i,i),this.context.globalAlpha=e,this.context.drawImage(this.tutorialImg,this.x+15,this.y+10)}}animateWordPuzzleStoneDrag({deltaTime:e,img:t,imageSize:i,monsterStoneDifferenceInPercentage:n,startX:s,startY:r,endX:o,endY:a}){const l=this.context.globalAlpha;n>80?(this.context.globalAlpha=.8,this.context.drawImage(t,this.x,this.y,i,i),this.createHandScaleAnimation(e,s+15,r+10,!1)):n<15?n>1?(this.context.globalAlpha=.9,this.context.drawImage(t,this.x,this.y,i,i),this.createHandScaleAnimation(e,this.x+15,this.y+10,!0),this.context.beginPath(),this.context.arc(o,a,i/2,0,2*Math.PI),this.context.fillStyle="rgba(255, 255, 255, 0.2)",this.context.fill()):(this.x=s,this.y=r):(this.context.globalAlpha=.7,this.context.drawImage(t,this.x,this.y,i,i),this.context.globalAlpha=l,this.context.drawImage(this.tutorialImg,this.x+15,this.y+10)),this.context.globalAlpha=l}createHandScaleAnimation(e,t,i,n){this.totalTime+=Math.floor(e);const s=this.sinusoidalInterpolation(this.totalTime,1,1.5,500),r=this.tutorialImg.width*s,o=this.tutorialImg.height*s;this.context.drawImage(this.tutorialImg,t,i,r,o),!n&&this.drawRipple(t+.02*this.width,i+this.tutorialImg.height/2,!1)}sinusoidalInterpolation(e,t,i,n){const s=(i-t)/2,r=Math.PI/n;return t+s*Math.sin(r*e)}injectHandPointer(e){this.removeHandPointer();const t=document.createElement("img");t.src=E,t.id="hand-pointer",t.className="hand-pointer",t.alt="Tutorial hand pointer";const i=document.querySelector(e||"#prompt-background");i&&i.appendChild(t)}removeHandPointer(){const e=document.getElementById("hand-pointer");e&&e.parentNode&&e.parentNode.removeChild(e)}dispose(){this.removeHandPointer()}}class mt extends pt{elapsedTime=0;tutorialDuration=6e3;isFinished=!1;constructor({context:e}){super(e)}quickStartTutorial(e,t,i){if(this.elapsedTime+=e,this.elapsedTime>=this.tutorialDuration)this.isFinished=!0;else if(this.imagesLoaded){const{currentOffsetY:n,shouldResetOrRevertPosition:s}=this.udpdateDrawPosition(e,i),r=t/2;this.drawPointer(r,n);const o=s?this.tutorialImg.height/1.5:this.tutorialImg.height/1.2+this.tutorialImg.height;this.drawRipple(r,i/1.9+o,s)}}}class gt extends pt{animationDuration=1500;animationStartTime=0;frame=0;constructor({context:e,width:t,height:i,stoneImg:n,stonePosVal:s}){super(e),this.width=t,this.height=i,this.frame=0,this.animationStartTime=0,this.stonePosDetailsType=this.updateTargetStonePositions(s),this.stoneImg=n,this.animateImagePosVal=this.stonePosDetailsType.animateImagePosVal,this.x=this.animateImagePosVal.x,this.y=this.animateImagePosVal.y}drawTutorial(e){if(this.frame<100){0===this.animationStartTime&&(this.animationStartTime=performance.now());const e=performance.now()-this.animationStartTime;this.frame=Math.min(100,e/this.animationDuration*100)}if(this.stonePosDetailsType&&this.frame>=100){const{dx:t,absdx:i,dy:n,absdy:s}=this.animateImagePosVal,{startX:r,startY:o,endX:a,endY:l,monsterStoneDifference:c}=this.stonePosDetailsType;this.x=t>=0?this.x+i*e:this.x-i*e,this.y=n>=0?this.y+s*e:this.y-s*e;const u=this.x-a+i,d=this.y-l+s,h=100*Math.sqrt(u*u+d*d)/c;this.animateStoneDrag({deltaTime:e,img:this.stoneImg,imageSize:this.height/9.5,monsterStoneDifferenceInPercentage:h,startX:r,startY:o,endX:a,endY:l})}}}class ft extends pt{animationStartTime=0;animationStartDelay=0;initialDelay=800;initialDelayElapsed=!1;frame=0;animationDuration=700;isAnimatingNextStone=!1;stonePositions=[];currentStoneIndex=0;imageSize;isInitialized=!1;animationCompleted=!1;levelData;constructor({context:e,width:t,height:i,stoneImg:n,stonePositions:s,levelData:r=null}){if(super(e),this.width=t,this.height=i,this.stoneImg=n,this.imageSize=i/9.5,this.levelData=r,this.levelData&&s?.length>0){const e=this.levelData.puzzles[0],t=e.targetStones||[];let i=[];if(e.foilStones&&(i=[...e.foilStones],t.forEach((e=>{i.push(e)}))),i.length>0&&t.length>0){const e=this.findTargetStonePositions(t,i,s);this.stonePositions=e}else this.stonePositions=[...s]}else this.stonePositions=s?.length>0?[...s]:[];this.stonePositions.length>0?(this.isInitialized=!0,this.initializeStoneAnimation(0)):this.isInitialized=!0}drawTutorial(e){if(!this.isInitialized)return;if(!this.initialDelayElapsed){0===this.animationStartTime&&(this.animationStartTime=performance.now());if(performance.now()-this.animationStartTime<this.initialDelay)return;this.initialDelayElapsed=!0,this.animationStartTime=performance.now()}const t=performance.now()-this.animationStartTime;if(this.frame=Math.min(100,t/this.animationDuration*100),this.stonePosDetailsType){this.animationStartDelay||(this.animationStartDelay=performance.now());if(performance.now()-this.animationStartDelay<500)return;const{dx:t,absdx:i,dy:n,absdy:s}=this.animateImagePosVal,{startX:r,startY:o,endX:a,endY:l,monsterStoneDifference:c}=this.stonePosDetailsType,u=1.8;this.x=t>=0?this.x+i*e*u:this.x-i*e*u,this.y=n>=0?this.y+s*e*u:this.y-s*e*u;const d=this.x-a+i,h=this.y-l+s,p=100*Math.sqrt(d*d+h*h)/c;this.animateWordPuzzleStoneDrag({deltaTime:e,img:this.stoneImg,imageSize:this.imageSize,monsterStoneDifferenceInPercentage:p,startX:r,startY:o,endX:a,endY:l}),p<15&&!this.animationCompleted&&(this.animationCompleted=!0)}this.animationCompleted&&!this.isAnimatingNextStone&&(this.isAnimatingNextStone=!0,setTimeout((()=>{const e=(this.currentStoneIndex+1)%this.stonePositions.length;this.initializeStoneAnimation(e),this.isAnimatingNextStone=!1,this.animationCompleted=!1}),50))}initializeStoneAnimation(e){if(!this.isInitialized||!this.stonePositions?.length||e<0||e>=this.stonePositions.length)return;const t=this.stonePositions[e];this.frame=0,this.animationStartTime=0,this.animationStartDelay=0,this.currentStoneIndex=e,this.animationCompleted=!1,this.initialDelayElapsed=e>0;try{this.context&&this.width&&this.height,this.stonePosDetailsType=this.updateTargetStonePositions(t),this.stonePosDetailsType&&(this.animateImagePosVal=this.stonePosDetailsType.animateImagePosVal,this.x=this.animateImagePosVal.x,this.y=this.animateImagePosVal.y)}catch(e){}}findTargetStonePositions(e,t,i){const n=new Set;return e.map((e=>{const s=t.findIndex(((t,i)=>t===e&&!n.has(i)));return-1!==s?(n.add(s),i[s]):null})).filter((e=>null!==e))}dispose(){this.isInitialized=!1,this.animationCompleted=!1,this.isAnimatingNextStone=!1,this.frame=0,this.animationStartTime=0,this.animationStartDelay=0,this.currentStoneIndex=0,this.initialDelayElapsed=!1}}class vt extends pt{animationDuration=1500;animationStartTime=0;frame=0;stonePosVal;constructor(e){super(e.context),this.width=e.width,this.height=e.height,this.stoneImg=e.stoneImg,this.stonePosVal=e.stonePosVal,this.frame=0,this.animationStartTime=0,this.stonePosDetailsType=this.updateTargetStonePositions(this.stonePosVal),this.animateImagePosVal=this.stonePosDetailsType.animateImagePosVal,this.x=this.animateImagePosVal.x,this.y=this.animateImagePosVal.y,this.injectHandPointer()}drawTutorial(e){if(this.frame<100){0===this.animationStartTime&&(this.animationStartTime=performance.now());const e=performance.now()-this.animationStartTime;this.frame=Math.min(100,e/this.animationDuration*100)}if(this.stonePosDetailsType&&this.frame>=100){const{dx:t,absdx:i,dy:n,absdy:s}=this.animateImagePosVal,{startX:r,startY:o,endX:a,endY:l,monsterStoneDifference:c}=this.stonePosDetailsType;this.x=t>=0?this.x+i*e:this.x-i*e,this.y=n>=0?this.y+s*e:this.y-s*e;const u=this.x-a+i,d=this.y-l+s,h=100*Math.sqrt(u*u+d*d)/c;this.animateStoneDrag({deltaTime:e,img:this.stoneImg,imageSize:this.height/9.5,monsterStoneDifferenceInPercentage:h,startX:r,startY:o,endX:a,endY:l})}}}class bt{quickStartTutorialTimerId=null;quickStartTutorialReady=!1;shouldShowTutorialAnimation=!1;width;height;context;puzzleLevel;activeTutorial;quickTutorial;hasGameEnded=!1;isGameOnPause=!1;instantDropStone=!1;gameTypesList;gameTypeName;hasEstablishedSubscriptions=!1;unsubscribeStoneCreationEvent;unsubscribePauseEvent;unsubscribeLevelEndData;tutorialElapsedTime=0;tutorialHoldDuration=12e3;constructor({context:e,width:t,height:i,puzzleLevel:n,shouldHaveTutorial:s}){this.quickTutorial=null,this.activeTutorial=null,this.puzzleLevel=n,this.initializeSubscriptionsAndValues({shouldHaveTutorial:s,context:e,width:t,height:i})}initializeSubscriptionsAndValues({shouldHaveTutorial:e,context:t,width:i,height:n}){e&&0===this.puzzleLevel&&!this.hasEstablishedSubscriptions&&(this.hasEstablishedSubscriptions=!0,this.gameTypesList=Ke.getGameTypeList(),this.initializeTutorialValues({context:t,width:i,height:n}),this.unsubscribeStoneCreationEvent=Ke.subscribe(Ke.EVENTS.CORRECT_STONE_POSITION,(e=>{const t=$(e.levelData.levelMeta.protoType,e.levelData.levelMeta.levelType);this.gameTypeName=t;const i=e.levelData.levelNumber;this.gameTypesList[t]?.isCleared||(this.activeTutorial=this.createTutorialInstance({gameLevel:i,stonePosVal:e.stonePosVal,img:e.img,gameTypeName:t,levelData:e.levelData}))})),this.unsubscribePauseEvent=Ke.subscribe(Ke.EVENTS.GAME_PAUSE_STATUS_EVENT,(e=>{this.isGameOnPause=e})),this.unsubscribeLevelEndData=Ke.subscribe(Ke.EVENTS.LEVEL_END_DATA_EVENT,(e=>{Ke.setClearedTutorial(this.gameTypeName)})))}initializeTutorialValues({context:e,width:t,height:i}){this.width=t,this.height=i,this.context=e}updateTutorialTimer(e){return!(this.quickTutorial&&!this.isGameOnPause)||(this.tutorialElapsedTime+=e,this.tutorialElapsedTime>=this.tutorialHoldDuration)}resetTutorialTimer(){this.tutorialElapsedTime=0}createTutorialInstance({gameLevel:e,stonePosVal:t,img:i,gameTypeName:n,levelData:s=null}){if(this.quickTutorial=new mt({context:this.context}),this.gameTypesList[n]?.levelNumber===e){if("LetterOnly"===n||"LetterInWord"===n)return new gt({context:this.context,width:this.width,height:this.height,stoneImg:i,stonePosVal:t});if("SoundLetterOnly"===n)return new vt({context:this.context,width:this.width,height:this.height,stoneImg:i,stonePosVal:t});if("Word"===n)return new ft({context:this.context,width:this.width,height:this.height,stoneImg:i,stonePositions:t,levelData:s})}return null}hideTutorial(){this.activeTutorial&&(this.puzzleLevel++,this.activeTutorial=null,this.quickTutorial=null)}drawQuickStart(e,t){if(!t&&this.quickTutorial){const t=document.getElementById("hand-pointer");t&&(t.style.display="none"),this.instantDropStone||this.quickTutorial.quickStartTutorial(e,this.width,this.height)}}isQuickStartFinished(){return!!this.instantDropStone||(this.quickTutorial?.isFinished??!1)}draw(e,t){this.activeTutorial&&!this.isGameOnPause&&t&&!this.hasGameEnded&&this.activeTutorial?.drawTutorial(e)}shouldPlayTutorialPromptAudio(e){if(!e||!e.levelData||!e.currentPuzzleData)return!1;const t=Ke.getGameTypeList(),{isMatchSound:i,gameTypeName:n,gameType:s}=bt.getPromptTextContext(e.levelData,t),r=s&&!s.isCleared&&s.levelNumber===e.levelData.levelMeta.levelNumber;let o=1910,a=1926;return i&&r&&(o=3e3,a=3016),Math.floor(e.time)>=o&&Math.floor(e.time)<=a}dispose(){this.hasEstablishedSubscriptions&&(this.activeTutorial?.dispose(),this.isGameOnPause=!1,this.hasGameEnded=!1,this.quickTutorial=null,this.activeTutorial=null,this.unsubscribeStoneCreationEvent(),this.unsubscribePauseEvent(),this.unsubscribeLevelEndData(),this.hasEstablishedSubscriptions=!1)}showHandPointerInAudioPuzzle(e){const t=e?.levelMeta,i=this.gameTypesList,n=t&&$(t.protoType,t.levelType);if(!t||!i||"SoundLetterOnly"!==n)return!1;const s=i[n];return!!s&&(this.instantDropStone=!(s.isCleared||s.levelNumber!==t.levelNumber))}resetQuickStartTutorialDelay(){null!==this.quickStartTutorialTimerId&&(clearTimeout(this.quickStartTutorialTimerId),this.quickStartTutorialTimerId=null),this.quickStartTutorialReady=!1,this.shouldShowTutorialAnimation&&(this.quickStartTutorialTimerId=setTimeout((()=>{this.quickStartTutorialReady=!0}),6e3))}static getPromptTextContext(e,t){const i=W(e?.levelMeta?.protoType),n=$(e?.levelMeta?.protoType,e?.levelMeta?.levelType),s=t?.[n];return{isMatchSound:i,gameTypesList:t,gameTypeName:n,gameType:s}}}const yt=function(e){const t=[];let i=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);s<128?t[i++]=s:s<2048?(t[i++]=s>>6|192,t[i++]=63&s|128):55296==(64512&s)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++n)),t[i++]=s>>18|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128,t[i++]=63&s|128):(t[i++]=s>>12|224,t[i++]=s>>6&63|128,t[i++]=63&s|128)}return t},_t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){const s=e[t],r=t+1<e.length,o=r?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=s>>2,u=(3&s)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,r||(d=64)),n.push(i[c],i[u],i[d],i[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let i=0,n=0;for(;i<e.length;){const s=e[i++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[i++];t[n++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;t[n++]=String.fromCharCode(55296+(r>>10)),t[n++]=String.fromCharCode(56320+(1023&r))}else{const r=e[i++],o=e[i++];t[n++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){const s=i[e.charAt(t++)],r=t<e.length?i[e.charAt(t)]:0;++t;const o=t<e.length?i[e.charAt(t)]:64;++t;const a=t<e.length?i[e.charAt(t)]:64;if(++t,null==s||null==r||null==o||null==a)throw new wt;const l=s<<2|r>>4;if(n.push(l),64!==o){const e=r<<4&240|o>>2;if(n.push(e),64!==a){const e=o<<6&192|a;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class wt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const St=function(e){return function(e){const t=yt(e);return _t.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Et=function(e){try{return _t.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const Tt=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i.g)return i.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,xt=()=>{try{return Tt()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&Et(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Ct=()=>{var e;return null===(e=xt())||void 0===e?void 0:e.config};class It{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,i))}}}function Pt(){try{return"object"==typeof indexedDB}catch(e){return!1}}function At(){return new Promise(((e,t)=>{try{let i=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),i||self.indexedDB.deleteDatabase(n),e(!0)},s.onupgradeneeded=()=>{i=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class kt extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lt.prototype.create)}}class Lt{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},n=`${this.service}/${e}`,s=this.errors[e],r=s?function(e,t){return e.replace(Dt,((e,i)=>{const n=t[i];return null!=n?String(n):`<${i}?>`}))}(s,i):"Error",o=`${this.serviceName}: ${r} (${n}).`;return new kt(n,o,i)}}const Dt=/\{\$([^}]+)}/g;function Mt(e,t){if(e===t)return!0;const i=Object.keys(e),n=Object.keys(t);for(const s of i){if(!n.includes(s))return!1;const i=e[s],r=t[s];if(jt(i)&&jt(r)){if(!Mt(i,r))return!1}else if(i!==r)return!1}for(const e of n)if(!i.includes(e))return!1;return!0}function jt(e){return null!==e&&"object"==typeof e}const Bt=1e3,Ot=2,Rt=144e5,zt=.5;function Nt(e,t=Bt,i=Ot){const n=t*Math.pow(i,e),s=Math.round(zt*n*(Math.random()-.5)*2);return Math.min(Rt,n+s)}function Ft(e){return e&&e._delegate?e._delegate:e}class Ut{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Vt="[DEFAULT]";class Ht{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new It;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&e.resolve(i)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(e){if(n)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Vt})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});t.resolve(e)}catch(e){}}}}clearInstance(e=Vt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Vt){return this.instances.has(e)}getOptions(e=Vt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[e,t]of this.instancesDeferred.entries()){i===this.normalizeInstanceIdentifier(e)&&t.resolve(n)}return n}onInit(e,t){var i;const n=this.normalizeInstanceIdentifier(t),s=null!==(i=this.onInitCallbacks.get(n))&&void 0!==i?i:new Set;s.add(e),this.onInitCallbacks.set(n,s);const r=this.instances.get(n);return r&&e(r,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const n of i)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Vt?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(e){}var n;return i||null}normalizeInstanceIdentifier(e=Vt){return this.component?this.component.multipleInstances?e:Vt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class $t{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ht(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Wt=[];var Gt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Gt||(Gt={}));const Yt={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},Xt=Gt.INFO,Kt={[Gt.DEBUG]:"log",[Gt.VERBOSE]:"log",[Gt.INFO]:"info",[Gt.WARN]:"warn",[Gt.ERROR]:"error"},qt=(e,t,...i)=>{if(t<e.logLevel)return;const n=(new Date).toISOString(),s=Kt[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${n}]  ${e.name}:`,...i)};class Jt{constructor(e){this.name=e,this._logLevel=Xt,this._logHandler=qt,this._userLogHandler=null,Wt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Yt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gt.DEBUG,...e),this._logHandler(this,Gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gt.VERBOSE,...e),this._logHandler(this,Gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gt.INFO,...e),this._logHandler(this,Gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gt.WARN,...e),this._logHandler(this,Gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gt.ERROR,...e),this._logHandler(this,Gt.ERROR,...e)}}const Qt=(e,t)=>t.some((t=>e instanceof t));let Zt,ei;const ti=new WeakMap,ii=new WeakMap,ni=new WeakMap,si=new WeakMap,ri=new WeakMap;let oi={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return ii.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ni.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ci(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ai(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ei||(ei=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ui(this),t),ci(ti.get(this))}:function(...t){return ci(e.apply(ui(this),t))}:function(t,...i){const n=e.call(ui(this),t,...i);return ni.set(n,t.sort?t.sort():[t]),ci(n)}}function li(e){return"function"==typeof e?ai(e):(e instanceof IDBTransaction&&function(e){if(ii.has(e))return;const t=new Promise(((t,i)=>{const n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{t(),n()},r=()=>{i(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)}));ii.set(e,t)}(e),Qt(e,Zt||(Zt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,oi):e)}function ci(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,i)=>{const n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{t(ci(e.result)),n()},r=()=>{i(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&ti.set(t,e)})).catch((()=>{})),ri.set(t,e),t}(e);if(si.has(e))return si.get(e);const t=li(e);return t!==e&&(si.set(e,t),ri.set(t,e)),t}const ui=e=>ri.get(e);const di=["get","getKey","getAll","getAllKeys","count"],hi=["put","add","delete","clear"],pi=new Map;function mi(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(pi.get(t))return pi.get(t);const i=t.replace(/FromIndex$/,""),n=t!==i,s=hi.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!di.includes(i))return;const r=async function(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let o=r.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[i](...t),s&&r.done]))[0]};return pi.set(t,r),r}oi=(e=>({...e,get:(t,i,n)=>mi(t,i)||e.get(t,i,n),has:(t,i)=>!!mi(t,i)||e.has(t,i)}))(oi);class gi{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const fi="@firebase/app",vi="0.9.15",bi=new Jt("@firebase/app"),yi="@firebase/app-compat",_i="@firebase/analytics-compat",wi="@firebase/analytics",Si="@firebase/app-check-compat",Ei="@firebase/app-check",Ti="@firebase/auth",xi="@firebase/auth-compat",Ci="@firebase/database",Ii="@firebase/database-compat",Pi="@firebase/functions",Ai="@firebase/functions-compat",ki="@firebase/installations",Li="@firebase/installations-compat",Di="@firebase/messaging",Mi="@firebase/messaging-compat",ji="@firebase/performance",Bi="@firebase/performance-compat",Oi="@firebase/remote-config",Ri="@firebase/remote-config-compat",zi="@firebase/storage",Ni="@firebase/storage-compat",Fi="@firebase/firestore",Ui="@firebase/firestore-compat",Vi="firebase",Hi="[DEFAULT]",$i={[fi]:"fire-core",[yi]:"fire-core-compat",[wi]:"fire-analytics",[_i]:"fire-analytics-compat",[Ei]:"fire-app-check",[Si]:"fire-app-check-compat",[Ti]:"fire-auth",[xi]:"fire-auth-compat",[Ci]:"fire-rtdb",[Ii]:"fire-rtdb-compat",[Pi]:"fire-fn",[Ai]:"fire-fn-compat",[ki]:"fire-iid",[Li]:"fire-iid-compat",[Di]:"fire-fcm",[Mi]:"fire-fcm-compat",[ji]:"fire-perf",[Bi]:"fire-perf-compat",[Oi]:"fire-rc",[Ri]:"fire-rc-compat",[zi]:"fire-gcs",[Ni]:"fire-gcs-compat",[Fi]:"fire-fst",[Ui]:"fire-fst-compat","fire-js":"fire-js",[Vi]:"fire-js-all"},Wi=new Map,Gi=new Map;function Yi(e,t){try{e.container.addComponent(t)}catch(i){bi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function Xi(e){const t=e.name;if(Gi.has(t))return bi.debug(`There were multiple attempts to register component ${t}.`),!1;Gi.set(t,e);for(const t of Wi.values())Yi(t,e);return!0}function Ki(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}const qi=new Lt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ji{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ut("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qi.create("app-deleted",{appName:this._name})}}function Qi(e,t={}){let i=e;if("object"!=typeof t){t={name:t}}const n=Object.assign({name:Hi,automaticDataCollectionEnabled:!1},t),s=n.name;if("string"!=typeof s||!s)throw qi.create("bad-app-name",{appName:String(s)});if(i||(i=Ct()),!i)throw qi.create("no-options");const r=Wi.get(s);if(r){if(Mt(i,r.options)&&Mt(n,r.config))return r;throw qi.create("duplicate-app",{appName:s})}const o=new $t(s);for(const e of Gi.values())o.addComponent(e);const a=new Ji(i,n,o);return Wi.set(s,a),a}function Zi(e,t,i){var n;let s=null!==(n=$i[e])&&void 0!==n?n:e;i&&(s+=`-${i}`);const r=s.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const e=[`Unable to register library "${s}" with version "${t}":`];return r&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void bi.warn(e.join(" "))}Xi(new Ut(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const en="firebase-heartbeat-database",tn=1,nn="firebase-heartbeat-store";let sn=null;function rn(){return sn||(sn=function(e,t,{blocked:i,upgrade:n,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=ci(o);return n&&o.addEventListener("upgradeneeded",(e=>{n(ci(o.result),e.oldVersion,e.newVersion,ci(o.transaction),e)})),i&&o.addEventListener("blocked",(e=>i(e.oldVersion,e.newVersion,e))),a.then((e=>{r&&e.addEventListener("close",(()=>r())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(en,tn,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(nn)}}).catch((e=>{throw qi.create("idb-open",{originalErrorMessage:e.message})}))),sn}async function on(e,t){try{const i=(await rn()).transaction(nn,"readwrite"),n=i.objectStore(nn);await n.put(t,an(e)),await i.done}catch(e){if(e instanceof kt)bi.warn(e.message);else{const t=qi.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});bi.warn(t.message)}}}function an(e){return`${e.name}!${e.options.appId}`}class ln{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new un(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=cn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=cn(),{heartbeatsToSend:t,unsentEntries:i}=function(e,t=1024){const i=[];let n=e.slice();for(const s of e){const e=i.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),dn(i)>t){e.dates.pop();break}}else if(i.push({agent:s.agent,dates:[s.date]}),dn(i)>t){i.pop();break}n=n.slice(1)}return{heartbeatsToSend:i,unsentEntries:n}}(this._heartbeatsCache.heartbeats),n=St(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function cn(){return(new Date).toISOString().substring(0,10)}class un{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Pt()&&At().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await rn();return await t.transaction(nn).objectStore(nn).get(an(e))}catch(e){if(e instanceof kt)bi.warn(e.message);else{const t=qi.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});bi.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return on(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return on(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}}}function dn(e){return St(JSON.stringify({version:2,heartbeats:e})).length}var hn;hn="",Xi(new Ut("platform-logger",(e=>new gi(e)),"PRIVATE")),Xi(new Ut("heartbeat",(e=>new ln(e)),"PRIVATE")),Zi(fi,vi,hn),Zi(fi,vi,"esm2017"),Zi("fire-js","");Zi("firebase","10.1.0","app");const pn=(e,t)=>t.some((t=>e instanceof t));let mn,gn;const fn=new WeakMap,vn=new WeakMap,bn=new WeakMap,yn=new WeakMap,_n=new WeakMap;let wn={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return vn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||bn.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Tn(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Sn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(gn||(gn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(xn(this),t),Tn(fn.get(this))}:function(...t){return Tn(e.apply(xn(this),t))}:function(t,...i){const n=e.call(xn(this),t,...i);return bn.set(n,t.sort?t.sort():[t]),Tn(n)}}function En(e){return"function"==typeof e?Sn(e):(e instanceof IDBTransaction&&function(e){if(vn.has(e))return;const t=new Promise(((t,i)=>{const n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{t(),n()},r=()=>{i(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)}));vn.set(e,t)}(e),pn(e,mn||(mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,wn):e)}function Tn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,i)=>{const n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{t(Tn(e.result)),n()},r=()=>{i(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&fn.set(t,e)})).catch((()=>{})),_n.set(t,e),t}(e);if(yn.has(e))return yn.get(e);const t=En(e);return t!==e&&(yn.set(e,t),_n.set(t,e)),t}const xn=e=>_n.get(e);const Cn=["get","getKey","getAll","getAllKeys","count"],In=["put","add","delete","clear"],Pn=new Map;function An(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Pn.get(t))return Pn.get(t);const i=t.replace(/FromIndex$/,""),n=t!==i,s=In.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!Cn.includes(i))return;const r=async function(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let o=r.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[i](...t),s&&r.done]))[0]};return Pn.set(t,r),r}!function(e){wn=e(wn)}((e=>({...e,get:(t,i,n)=>An(t,i)||e.get(t,i,n),has:(t,i)=>!!An(t,i)||e.has(t,i)})));const kn="@firebase/installations",Ln="0.6.4",Dn=1e4,Mn=`w:${Ln}`,jn="FIS_v2",Bn="https://firebaseinstallations.googleapis.com/v1",On=36e5,Rn=new Lt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function zn(e){return e instanceof kt&&e.code.includes("request-failed")}function Nn({projectId:e}){return`${Bn}/projects/${e}/installations`}function Fn(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Un(e,t){const i=(await t.json()).error;return Rn.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Vn({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Hn(e,{refreshToken:t}){const i=Vn(e);return i.append("Authorization",function(e){return`${jn} ${e}`}(t)),i}async function $n(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Wn(e){return new Promise((t=>{setTimeout(t,e)}))}const Gn=/^[cdef][\w-]{21}$/,Yn="";function Xn(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(i=e,btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_"));var i;return t.substr(0,22)}(e);return Gn.test(t)?t:Yn}catch(e){return Yn}}function Kn(e){return`${e.appName}!${e.appId}`}const qn=new Map;function Jn(e,t){const i=Kn(e);Qn(i,t),function(e,t){const i=es();i&&i.postMessage({key:e,fid:t});ts()}(i,t)}function Qn(e,t){const i=qn.get(e);if(i)for(const e of i)e(t)}let Zn=null;function es(){return!Zn&&"BroadcastChannel"in self&&(Zn=new BroadcastChannel("[Firebase] FID Change"),Zn.onmessage=e=>{Qn(e.data.key,e.data.fid)}),Zn}function ts(){0===qn.size&&Zn&&(Zn.close(),Zn=null)}const is="firebase-installations-database",ns=1,ss="firebase-installations-store";let rs=null;function os(){return rs||(rs=function(e,t,{blocked:i,upgrade:n,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=Tn(o);return n&&o.addEventListener("upgradeneeded",(e=>{n(Tn(o.result),e.oldVersion,e.newVersion,Tn(o.transaction))})),i&&o.addEventListener("blocked",(()=>i())),a.then((e=>{r&&e.addEventListener("close",(()=>r())),s&&e.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),a}(is,ns,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(ss)}})),rs}async function as(e,t){const i=Kn(e),n=(await os()).transaction(ss,"readwrite"),s=n.objectStore(ss),r=await s.get(i);return await s.put(t,i),await n.done,r&&r.fid===t.fid||Jn(e,t.fid),t}async function ls(e){const t=Kn(e),i=(await os()).transaction(ss,"readwrite");await i.objectStore(ss).delete(t),await i.done}async function cs(e,t){const i=Kn(e),n=(await os()).transaction(ss,"readwrite"),s=n.objectStore(ss),r=await s.get(i),o=t(r);return void 0===o?await s.delete(i):await s.put(o,i),await n.done,!o||r&&r.fid===o.fid||Jn(e,o.fid),o}async function us(e){let t;const i=await cs(e.appConfig,(i=>{const n=function(e){const t=e||{fid:Xn(),registrationStatus:0};return ps(t)}(i),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Rn.create("app-offline"))}}const i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=async function(e,t){try{const i=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:i}){const n=Nn(e),s=Vn(e),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={fid:i,authVersion:jn,appId:e.appId,sdkVersion:Mn},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await $n((()=>fetch(n,a)));if(l.ok){const e=await l.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Fn(e.authToken)}}throw await Un("Create Installation",l)}(e,t);return as(e.appConfig,i)}catch(i){throw zn(i)&&409===i.customData.serverCode?await ls(e.appConfig):await as(e.appConfig,{fid:t.fid,registrationStatus:0}),i}}(e,i);return{installationEntry:i,registrationPromise:n}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ds(e)}:{installationEntry:t}}(e,n);return t=s.registrationPromise,s.installationEntry}));return i.fid===Yn?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}async function ds(e){let t=await hs(e.appConfig);for(;1===t.registrationStatus;)await Wn(100),t=await hs(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:i}=await us(e);return i||t}return t}function hs(e){return cs(e,(e=>{if(!e)throw Rn.create("installation-not-found");return ps(e)}))}function ps(e){return 1===(t=e).registrationStatus&&t.registrationTime+Dn<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ms({appConfig:e,heartbeatServiceProvider:t},i){const n=function(e,{fid:t}){return`${Nn(e)}/${t}/authTokens:generate`}(e,i),s=Hn(e,i),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:Mn,appId:e.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await $n((()=>fetch(n,a)));if(l.ok){return Fn(await l.json())}throw await Un("Generate Auth Token",l)}async function gs(e,t=!1){let i;const n=await cs(e.appConfig,(n=>{if(!vs(n))throw Rn.create("not-registered");const s=n.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+On}(e)}(s))return n;if(1===s.requestStatus)return i=async function(e,t){let i=await fs(e.appConfig);for(;1===i.authToken.requestStatus;)await Wn(100),i=await fs(e.appConfig);const n=i.authToken;return 0===n.requestStatus?gs(e,t):n}(e,t),n;{if(!navigator.onLine)throw Rn.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(n);return i=async function(e,t){try{const i=await ms(e,t),n=Object.assign(Object.assign({},t),{authToken:i});return await as(e.appConfig,n),i}catch(i){if(!zn(i)||401!==i.customData.serverCode&&404!==i.customData.serverCode){const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await as(e.appConfig,i)}else await ls(e.appConfig);throw i}}(e,t),t}}));return i?await i:n.authToken}function fs(e){return cs(e,(e=>{if(!vs(e))throw Rn.create("not-registered");const t=e.authToken;return 1===(i=t).requestStatus&&i.requestTime+Dn<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var i}))}function vs(e){return void 0!==e&&2===e.registrationStatus}async function bs(e,t=!1){const i=e;await async function(e){const{registrationPromise:t}=await us(e);t&&await t}(i);return(await gs(i,t)).token}function ys(e){return Rn.create("missing-app-config-values",{valueName:e})}const _s="installations",ws=e=>{const t=e.getProvider("app").getImmediate(),i=function(e){if(!e||!e.options)throw ys("App Configuration");if(!e.name)throw ys("App Name");const t=["projectId","apiKey","appId"];for(const i of t)if(!e.options[i])throw ys(i);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:i,heartbeatServiceProvider:Ki(t,"heartbeat"),_delete:()=>Promise.resolve()}},Ss=e=>{const t=Ki(e.getProvider("app").getImmediate(),_s).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:i,registrationPromise:n}=await us(t);return n?n.catch(console.error):gs(t).catch(console.error),i.fid}(t),getToken:e=>bs(t,e)}};Xi(new Ut(_s,ws,"PUBLIC")),Xi(new Ut("installations-internal",Ss,"PRIVATE")),Zi(kn,Ln),Zi(kn,Ln,"esm2017");const Es="analytics",Ts="firebase_id",xs="origin",Cs=6e4,Is="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ps="https://www.googletagmanager.com/gtag/js",As=new Jt("@firebase/analytics"),ks=new Lt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ls(e){if(!e.startsWith(Ps)){const t=ks.create("invalid-gtag-resource",{gtagURL:e});return As.warn(t.message),""}return e}function Ds(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function Ms(e,t){const i=function(e,t){let i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(e,t)),i}("firebase-js-sdk-policy",{createScriptURL:Ls}),n=document.createElement("script"),s=`${Ps}?l=${e}&id=${t}`;n.src=i?null==i?void 0:i.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function js(e,t,i,n){return async function(s,...r){try{if("event"===s){const[n,s]=r;await async function(e,t,i,n,s){try{let r=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const n=await Ds(i);for(const i of e){const e=n.find((e=>e.measurementId===i)),s=e&&t[e.appId];if(!s){r=[];break}r.push(s)}}0===r.length&&(r=Object.values(t)),await Promise.all(r),e("event",n,s||{})}catch(e){As.error(e)}}(e,t,i,n,s)}else if("config"===s){const[s,o]=r;await async function(e,t,i,n,s,r){const o=n[s];try{if(o)await t[o];else{const e=(await Ds(i)).find((e=>e.measurementId===s));e&&await t[e.appId]}}catch(e){As.error(e)}e("config",s,r)}(e,t,i,n,s,o)}else if("consent"===s){const[t]=r;e("consent","update",t)}else if("get"===s){const[t,i,n]=r;e("get",t,i,n)}else if("set"===s){const[t]=r;e("set",t)}else e(s,...r)}catch(e){As.error(e)}}}const Bs=30;const Os=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Rs(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function zs(e,t=Os,i){const{appId:n,apiKey:s,measurementId:r}=e.options;if(!n)throw ks.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:n};throw ks.create("no-api-key")}const o=t.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Fs;return setTimeout((async()=>{a.abort()}),void 0!==i?i:Cs),Ns({appId:n,apiKey:s,measurementId:r},o,a,t)}async function Ns(e,{throttleEndTimeMillis:t,backoffCount:i},n,s=Os){var r;const{appId:o,measurementId:a}=e;try{await function(e,t){return new Promise(((i,n)=>{const s=Math.max(t-Date.now(),0),r=setTimeout(i,s);e.addEventListener((()=>{clearTimeout(r),n(ks.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,t)}catch(e){if(a)return As.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:a};throw e}try{const t=await async function(e){var t;const{appId:i,apiKey:n}=e,s={method:"GET",headers:Rs(n)},r=Is.replace("{app-id}",i),o=await fetch(r,s);if(200!==o.status&&304!==o.status){let e="";try{const i=await o.json();(null===(t=i.error)||void 0===t?void 0:t.message)&&(e=i.error.message)}catch(e){}throw ks.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(o),t}catch(t){const l=t;if(!function(e){if(!(e instanceof kt&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l)){if(s.deleteThrottleMetadata(o),a)return As.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:o,measurementId:a};throw t}const c=503===Number(null===(r=null==l?void 0:l.customData)||void 0===r?void 0:r.httpStatus)?Nt(i,s.intervalMillis,Bs):Nt(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return s.setThrottleMetadata(o,u),As.debug(`Calling attemptFetch again in ${c} millis`),Ns(e,u,n,s)}}class Fs{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Us,Vs;function Hs(e){Vs=e}function $s(e){Us=e}async function Ws(e,t,i,n,s,r,o){var a;const l=zs(e);l.then((t=>{i[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&As.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>As.error(e))),t.push(l);const c=async function(){if(!Pt())return As.warn(ks.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await At()}catch(e){return As.warn(ks.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?n.getId():void 0)),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const i of Object.values(t))if(i.src&&i.src.includes(Ps)&&i.src.includes(e))return i;return null})(r)||Ms(r,u.measurementId),Vs&&(s("consent","default",Vs),Hs(void 0)),s("js",new Date);const h=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return h[xs]="firebase",h.update=!0,null!=d&&(h[Ts]=d),s("config",u.measurementId,h),Us&&(s("set",Us),$s(void 0)),u.measurementId}class Gs{constructor(e){this.app=e}_delete(){return delete Ys[this.app.options.appId],Promise.resolve()}}let Ys={},Xs=[];const Ks={};let qs,Js,Qs="dataLayer",Zs="gtag",er=!1;function tr(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),i=ks.create("invalid-analytics-context",{errorInfo:t});As.warn(i.message)}}function ir(e,t,i){tr();const n=e.options.appId;if(!n)throw ks.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ks.create("no-api-key");As.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ys[n])throw ks.create("already-exists",{id:n});if(!er){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Qs);const{wrappedGtag:e,gtagCore:t}=function(e,t,i,n,s){let r=function(...e){window[n].push(arguments)};return window[s]&&"function"==typeof window[s]&&(r=window[s]),window[s]=js(r,e,t,i),{gtagCore:r,wrappedGtag:window[s]}}(Ys,Xs,Ks,Qs,Zs);Js=e,qs=t,er=!0}Ys[n]=Ws(e,Xs,Ks,t,qs,Qs,i);return new Gs(e)}function nr(e=function(e=Hi){const t=Wi.get(e);if(!t&&e===Hi&&Ct())return Qi();if(!t)throw qi.create("no-app",{appName:e});return t}()){const t=Ki(e=Ft(e),Es);return t.isInitialized()?t.getImmediate():function(e,t={}){const i=Ki(e,Es);if(i.isInitialized()){const e=i.getImmediate();if(Mt(t,i.getOptions()))return e;throw ks.create("already-initialized")}const n=i.initialize({options:t});return n}(e)}function sr(e,t,i){e=Ft(e),async function(e,t,i,n){if(n&&n.global){const t={};for(const e of Object.keys(i))t[`user_properties.${e}`]=i[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:i})}(Js,Ys[e.app.options.appId],t,i).catch((e=>As.error(e)))}function rr(e,t,i,n){e=Ft(e),async function(e,t,i,n,s){if(s&&s.global)e("event",i,n);else{const s=await t;e("event",i,Object.assign(Object.assign({},n),{send_to:s}))}}(Js,Ys[e.app.options.appId],t,i,n).catch((e=>As.error(e)))}const or="@firebase/analytics",ar="0.10.0";Xi(new Ut(Es,((e,{options:t})=>ir(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),Xi(new Ut("analytics-internal",(function(e){try{const t=e.getProvider(Es).getImmediate();return{logEvent:(e,i,n)=>rr(t,e,i,n)}}catch(e){throw ks.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Zi(or,ar),Zi(or,ar,"esm2017");const lr={apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:a63f4eaddc949f539de10c",measurementId:"G-FVLSN7D7NM"};class cr{firebaseApp;analytics;constructor(){this.initializeFirebase(),null==X&&null==K||this.setUserProperty(X,K)}customEvents(e,t){try{rr(this.analytics,e,t)}catch(e){console.error("Error while logging custom event:",e)}}sessionEnd(){try{navigator.onLine&&void 0!==this.analytics&&rr(this.analytics,"session_end")}catch(e){console.error("Error while logging session_end event:",e)}}setUserProperty(e,t){try{sr(this.analytics,{source:e,campaign_id:t},{global:!0}),console.log("User properties set: ",{source:e,campaignId:t})}catch(e){console.error("Error while setting user properties:",e)}}initializeFirebase(){try{this.firebaseApp=Qi(lr),this.analytics=nr(this.firebaseApp)}catch(e){console.error("Error while initializing Firebase:",e)}}}class ur extends cr{static instance;constructor(){super()}static getInstance(){return ur.instance||(ur.instance=new ur),ur.instance}sendSessionStartEvent(e){this.customEvents("session_start",e)}sendSessionEndEvent(e){this.customEvents("session_end",e)}sendSelectedLevelEvent(e){this.customEvents("selected_level",e)}sendTappedStartEvent(e){this.customEvents("tapped_start",e)}sendPuzzleCompletedEvent(e){this.customEvents("puzzle_completed",e)}sendLevelCompletedEvent(e){this.customEvents("level_completed",e)}sendUserClickedOnPlayEvent(){this.customEvents("user_clicked",{click:"Click"})}sendDownloadCompletedEvent(e){this.customEvents("download_completed",e)}sendDownload25PercentCompletedEvent(e){this.customEvents("download_25",e)}sendDownload50PercentCompletedEvent(e){this.customEvents("download_50",e)}sendDownload75PercentCompletedEvent(e){this.customEvents("download_75",e)}}class dr extends Ee{constructor(e={}){super({id:e.id||"close-button",className:e.className||"close-button-image",imageSrc:"./assets/images/map_btn.svg",imageAlt:e.imageAlt||"Close Icon",targetId:e.targetId||"game-control",...e})}}class hr extends Ee{constructor(e={}){super({id:e.id||"cancel-button",className:e.className||"cancel-button-image",imageSrc:"./assets/images/close_btn.svg",imageAlt:e.imageAlt||"Cancel Icon",targetId:e.targetId||"game-control",...e})}}class pr extends Ee{constructor(e={}){super({id:e.id||"next-button",className:e.className||"next-button-image",imageSrc:T,imageAlt:e.imageAlt||"Next Icon",targetId:e.targetId||"game-control",...e})}}class mr extends Ee{constructor(e={}){super({id:e.id||"retry-button",className:e.className||"retry-button-image",imageSrc:"./assets/images/retry_btn.svg",imageAlt:e.imageAlt||"Retry Icon",targetId:e.targetId||"game-control",...e})}}class gr extends Ee{constructor(e={}){super({id:e.id||"yes-button",className:e.className||"yes-button-image",imageSrc:"./assets/images/confirm_btn.svg",imageAlt:e.imageAlt||"Yes Icon",targetId:e.targetId||"game-control",...e})}}class fr{context;levelData;posX;posY;originalPosX;originalPosY;size;radiusOffSet;bloonSize;btnSize;lockSize;textFontSize;constructor(e,t,i){this.context=t,this.levelData=i,this.posX=this.levelData.x,this.posY=this.levelData.y,this.originalPosX=this.posX,this.originalPosY=this.posY,this.size=e.height/5,this.radiusOffSet=e.height/20,this.bloonSize=this.isLevelSpecial(this.size),this.btnSize=this.bloonSize,this.lockSize=e.height/13,this.textFontSize=this.size/6}isSpecialLevel(e){return O.includes(e)}isLevelSpecial(e){return this.levelData?.isSpecial?.9*e:e}draw(e,t,i,n){this.context.drawImage(this.levelData?.balloonImg,this.posX,this.posY,this.btnSize,this.btnSize),this.context.fillStyle="white",this.context.font=this.textFontSize+`px ${J}, monospace`,this.context.textAlign="center",this.context.fillText(`${this.levelData.index+e}`,this.levelData.x+this.size/3.5,this.levelData.y+this.size/3),this.context.font=this.textFontSize-this.size/30+`px ${J}, monospace`,this.btnSize<this.bloonSize?this.btnSize=this.btnSize+.5:(this.btnSize=this.bloonSize,this.posX=this.levelData.x,this.posY=this.levelData.y),this.drawIcons(e,t,i,n)}applyPulseEffect(){const e=.7,t=Date.now()%1500/1500,i=t<=e,n=i?t/e:(t-e)/(i?e:.30000000000000004),s=i?15*n:15+45*n,r=i?.5*(1-n):0;if(r<=0)return;const{x:o,y:a,radius:l}=this.levelData?.isSpecial?{x:3,y:2.5,radius:2.2}:{x:3.4,y:3.8,radius:3.2},c=this.posX+this.btnSize/o,u=this.posY+this.btnSize/a,d=this.btnSize/l+s;this.context.save(),this.context.beginPath(),this.context.arc(c,u,d,0,2*Math.PI),this.context.fillStyle=`rgba(255, 255, 255, ${r})`,this.context.fill(),this.context.restore()}drawIcons(e,t,i,n){const s=this.levelData.index;if(Q.DebugMode||s+e-1>t+1&&this.drawLock(),i.length&&s+e<=n)for(let t=0;t<i.length;t++)if(s-1+e===parseInt(i[t].levelNumber)){this.checkStars(i[t].starCount);break}}drawLock(){this.context.drawImage(this.levelData?.lockImg,this.levelData.x,this.levelData.y,this.lockSize,this.lockSize)}checkStars(e){const t=this.levelData.x,i=this.levelData.y,n=this.size;e>=1&&this.drawStar(t,i-.01*n),e>1&&this.drawStar(t+n/2.5,i-.01*n),3===e&&this.drawStar(t+n/5,i-.1*n)}drawStar(e,t){this.context.drawImage(this.levelData?.starImg,e,t,this.size/5,this.size/5)}onClick(e,t,i,n,s){Math.sqrt((e-this.levelData.x-this.radiusOffSet)*(e-this.levelData.x-this.radiusOffSet)+(t-this.levelData.y-this.radiusOffSet)*(t-this.levelData.y-this.radiusOffSet))<45&&(Q.DebugMode||this.levelData.index+i<=n)&&(this.btnSize=this.bloonSize-4,this.posX=this.originalPosX+.5,this.posY=this.originalPosY+1,s(this.levelData.index))}}var vr=i(424),br={};br.styleTagTransform=ze(),br.setAttributes=je(),br.insert=De().bind(null,"head"),br.domAPI=ke(),br.insertStyleElement=Oe();Pe()(vr.A,br);vr.A&&vr.A.locals&&vr.A.locals;class yr extends Ee{constructor(e={}){super({id:e.id||"play-button",className:e.className||"play-button-image",imageSrc:e?.imageSrc||"./assets/images/Play_button.svg",imageAlt:e.imageAlt||"Play Icon",targetId:e.targetId||"game-scene",...e})}}var _r=i(636),wr={};wr.styleTagTransform=ze(),wr.setAttributes=je(),wr.insert=De().bind(null,"head"),wr.domAPI=ke(),wr.insertStyleElement=Oe();Pe()(_r.A,wr);_r.A&&_r.A.locals&&_r.A.locals;const Sr={root:".game-scene",closeButton:'[data-click="close"]'},Er="[data-click]",Tr="show";class xr{popupEl;closeButton;static EVENTS={ON_CLOSE:"onClose",ON_BTN_CLICK:"onClick"};id="base-popup";template="";isRendered=!1;options;pubSub=new e;constructor(e){this.options={selectors:Sr,...e},this._init()}onInit(){}open(){this.isRendered||this.render(),this.setVisibility(!0)}close(e){this.setVisibility(!1),this.pubSub.publish(xr.EVENTS.ON_CLOSE,e)}destroy(){this.popupEl?.remove(),this._removeEventListeners()}handleClick(e,t=300){setTimeout((()=>{this.close({data:e})}),t)}onButtonClick(e){return this.pubSub.subscribe(xr.EVENTS.ON_BTN_CLICK,e)}onClose(e){return this.pubSub.subscribe(xr.EVENTS.ON_CLOSE,e)}render(){if(this.isRendered)return;const e=(t=this.id,i=this.template,`\n  <div id="${t}" class="popup">\n    <div class="popup__overlay"></div>\n    <div id="${t}-content-wrapper" class="popup__content-wrapper" >\n      <img id="popup-bg" src="./assets/images/popup_bg_v01.svg" />\n      <div id="${t}-content-container" class="popup__content-container">${i}</div>\n    </div>\n  </div>\n`);var t,i;const{root:n}=this.options.selectors,s=document.querySelector(n);s.insertAdjacentHTML("beforeend",e),this.popupEl=s.querySelector(`#${this.id}`),this.options.hideClose||(this.closeButton=new hr({targetId:this.contentWrapperId}),this.closeButton.onClick((()=>{setTimeout((()=>{this.close({data:!1})}),300)}))),this.isRendered=!0}get contentContainerId(){return`${this.id}-content-container`}get contentWrapperId(){return`${this.id}-content-wrapper`}_init(){setTimeout((()=>{this.render(),this.onInit(),this._addEventListeners()}))}_click=e=>{const t=e.target.closest(Er).dataset.click,i="close"===t,n={data:t,event:e};setTimeout((()=>{i?this.close(n):this.pubSub.publish(xr.EVENTS.ON_BTN_CLICK,n)}),300)};_addEventListeners(){const e=this.popupEl?.querySelectorAll(Er);e?.length&&e.forEach((e=>{e.addEventListener("click",this._click)}))}_removeEventListeners(){const e=this.popupEl?.querySelectorAll(Er);e?.length&&e.forEach((e=>{e.removeEventListener("click",this._click)}))}setVisibility(e){e?this.popupEl.classList.add(Tr):this.popupEl.classList.remove(Tr)}}class Cr extends xr{confirmButton;cancelButton;enableTimeoutId;id="confirm-popup";template='\n    <div class="confirm-message text-align-center w-100 mb-3 font-size-3">Are you sure?</div>\n    <div id="confirm-button-container" class="button-container d-flex justify-content-center w-100"></div>\n  ';onInit(){const e="confirm-button-container";this.cancelButton=new hr({id:this.createButtonId("cancel-button"),targetId:e,className:"me-4"}),this.cancelButton.onClick((()=>this.handleClick(!1))),this.confirmButton=new gr({id:this.createButtonId("confirm-button"),targetId:e}),this.confirmButton.onClick((()=>this.handleClick(!0)))}createButtonId(e){return`${this.id}-${e}`}handleClick(e){this.disableButtons(),super.handleClick(e),this.scheduleEnableButtons(800)}disableButtons(){this.confirmButton?.setDisabled(!0),this.cancelButton?.setDisabled(!0)}enableButtons(){this.confirmButton?.setDisabled(!1),this.cancelButton?.setDisabled(!1)}scheduleEnableButtons(e){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.enableTimeoutId=window.setTimeout((()=>{this.enableButtons(),this.enableTimeoutId=void 0}),e)}destroy(){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),super.destroy()}}const Ir=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const Pr="object"==typeof global&&global&&global.Object===Object&&global;var Ar="object"==typeof self&&self&&self.Object===Object&&self;const kr=Pr||Ar||Function("return this")();const Lr=function(){return kr.Date.now()};var Dr=/\s/;const Mr=function(e){for(var t=e.length;t--&&Dr.test(e.charAt(t)););return t};var jr=/^\s+/;const Br=function(e){return e?e.slice(0,Mr(e)+1).replace(jr,""):e};const Or=kr.Symbol;var Rr=Object.prototype,zr=Rr.hasOwnProperty,Nr=Rr.toString,Fr=Or?Or.toStringTag:void 0;const Ur=function(e){var t=zr.call(e,Fr),i=e[Fr];try{e[Fr]=void 0;var n=!0}catch(e){}var s=Nr.call(e);return n&&(t?e[Fr]=i:delete e[Fr]),s};var Vr=Object.prototype.toString;const Hr=function(e){return Vr.call(e)};var $r=Or?Or.toStringTag:void 0;const Wr=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$r&&$r in Object(e)?Ur(e):Hr(e)};const Gr=function(e){return null!=e&&"object"==typeof e};const Yr=function(e){return"symbol"==typeof e||Gr(e)&&"[object Symbol]"==Wr(e)};var Xr=/^[-+]0x[0-9a-f]+$/i,Kr=/^0b[01]+$/i,qr=/^0o[0-7]+$/i,Jr=parseInt;const Qr=function(e){if("number"==typeof e)return e;if(Yr(e))return NaN;if(Ir(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ir(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Br(e);var i=Kr.test(e);return i||qr.test(e)?Jr(e.slice(2),i?2:8):Xr.test(e)?NaN:+e};var Zr=Math.max,eo=Math.min;const to=function(e,t,i){var n,s,r,o,a,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var i=n,r=s;return n=s=void 0,c=t,o=e.apply(r,i)}function m(e){var i=e-l;return void 0===l||i>=t||i<0||d&&e-c>=r}function g(){var e=Lr();if(m(e))return f(e);a=setTimeout(g,function(e){var i=t-(e-l);return d?eo(i,r-(e-c)):i}(e))}function f(e){return a=void 0,h&&n?p(e):(n=s=void 0,o)}function v(){var e=Lr(),i=m(e);if(n=arguments,s=this,l=e,i){if(void 0===a)return function(e){return c=e,a=setTimeout(g,t),u?p(e):o}(l);if(d)return clearTimeout(a),a=setTimeout(g,t),p(l)}return void 0===a&&(a=setTimeout(g,t)),o}return t=Qr(t)||0,Ir(i)&&(u=!!i.leading,r=(d="maxWait"in i)?Zr(Qr(i.maxWait)||0,t):r,h="trailing"in i?!!i.trailing:h),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=s=a=void 0},v.flush=function(){return void 0===a?o:f(Lr())},v},io="select-level",no="restart-level";class so extends xr{selectLevelButton;restartLevelButton;confirmPopup;openConfirm=()=>{};audioPlayer=new we;enableTimeoutId;id="pause-popup";isProcessingClick=!1;onInit(){const e=this.contentContainerId;this.selectLevelButton=new dr({id:"map-button",className:"me-4",targetId:e}),this.selectLevelButton&&this.selectLevelButton.onClick((()=>this.handleClick("select-level"))),this.restartLevelButton=new mr({targetId:e}),this.restartLevelButton&&this.restartLevelButton.onClick((()=>this.handleClick("restart-level"))),this.confirmPopup=new Cr({hideClose:!0}),this.openConfirm=to((()=>{this.confirmPopup.open(),this.audioPlayer.playAudio("./assets/audios/are-you-sure.mp3")}),300)}handleClick(e){if(!this.isProcessingClick)if(this.isProcessingClick=!0,this.disableButtons(),"english"===q){const t=this.confirmPopup.onClose((i=>{t(),this.handleConfirmClose(i,e),this.scheduleEnableButtons(800),this.isProcessingClick=!1}));this.openConfirm()}else super.handleClick(e),this.scheduleEnableButtons(800),setTimeout((()=>{this.isProcessingClick=!1}),800)}handleConfirmClose(e,t){e.data&&super.handleClick(t),super.handleClick(!1,0)}disableButtons(){this.selectLevelButton?.setDisabled(!0),this.restartLevelButton?.setDisabled(!0),this.closeButton?.setDisabled(!0)}enableButtons(){this.selectLevelButton?.setDisabled(!1),this.restartLevelButton?.setDisabled(!1),this.closeButton?.setDisabled(!1)}scheduleEnableButtons(e){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.enableTimeoutId=window.setTimeout((()=>{this.enableButtons(),this.enableTimeoutId=void 0}),e)}destroy(){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.confirmPopup?.destroy(),super.destroy()}}var ro,oo,ao=i(52);ao.RuntimeLoader.setWasmUrl("./assets/rive/rive.wasm"),function(e){e.Load="load",e.LoadError="loaderror",e.Play="play",e.Pause="pause",e.Stop="stop",e.Loop="loop",e.Advance="advance",e.StateChange="statechange",e.RiveEvent="riveevent"}(ro||(ro={}));class lo{props;riveInstance;phaseIndex=0;stateMachineName="State Machine 1";game;x;y;hitboxRangeX;hitboxRangeY;scale;minY;constructor(e){this.props=e,this.scale=t.getDevicePixelRatioValue(),this.setRiveMinYAdjustment(),this.initializeHitbox(),this.initializeRive()}static Animations={IDLE:"Idle",SAD:"Sad",STOMP:"Stomp",STOMPHAPPY:"StompHappy",SPIT:"Spit",CHEW:"Chew",MOUTHOPEN:"MouthOpen",MOUTHCLOSED:"MouthClosed",HAPPY:"Happy"};initializeHitbox(){const{canvas:e}=this.props,t=e.width/this.scale,i=e.height/this.scale,n=window.innerWidth/window.innerHeight,{bottomY:s,height:r}=[{max:.4,bottomY:.78,height:.28},{max:.5,bottomY:.82,height:.32},{max:.6,bottomY:.85,height:.35},{max:.7,bottomY:.84,height:.36},{max:.8,bottomY:.88,height:.38}].find((e=>n<e.max))||{bottomY:.9,height:.4},o=i*s,a=i*r,l=o-a,c=.05*a,u=.1*a;this.hitboxRangeX={from:.35*t,to:.65*t},this.hitboxRangeY={from:l+u+c,to:o-u+c},Ke.saveHitBoxRanges({hitboxRangeX:this.hitboxRangeX,hitboxRangeY:this.hitboxRangeY})}createHitboxOverlayForTesting(e){const t=this.hitboxRangeX.to-this.hitboxRangeX.from,i=this.hitboxRangeY.to-this.hitboxRangeY.from;e.fillStyle="rgba(0, 128, 255, 0.5)",e.fillRect(this.hitboxRangeX.from,this.hitboxRangeY.from,t,i),e.strokeStyle="#000",e.lineWidth=2,e.strokeRect(this.hitboxRangeX.from,this.hitboxRangeY.from,t,i)}initializeRive(){const{canvas:e,isEvolving:t,src:i,autoplay:n}=this.props;t&&this.riveInstance&&this.riveInstance.cleanupInstances();const s=e.width,r=e.height,o=.25*r,a=r,l={src:i||P[this.phaseIndex],canvas:e,autoplay:n,useOffscreenRenderer:!0,layout:new ao.Layout({fit:ao.Fit.Contain,alignment:ao.Alignment.Center,minX:0,minY:o,maxX:s,maxY:a})};t||(l.stateMachines=[this.stateMachineName],l.onLoad=()=>this.handleLoad()),this.riveInstance=new ao.Rive(l)}setRiveMinYAdjustment(){const{width:e,height:t}=this.props.canvas,i=Math.round(e/this.scale),n=Math.round(t/this.scale);let s;s=i>=500?n/14:i<=499&&i>=343&&n>=735?n/2:n/4,s-=.05*n,this.minY=s}executeRiveAction(e,t){this.riveInstance.on(ro[e],(()=>{t()}))}getInputs(){return this.props.isEvolving?[]:this.riveInstance.stateMachineInputs(this.stateMachineName)}evolutionOffSet(e){this.props.canvas.style.top=`${e}px`}handleLoad(){const e=this.getInputs(),t=["backToIdle","isStomped","isMouthOpen","isMouthClosed","isChewing","isHappy","isSpit","isSad"].filter((t=>!e.some((e=>e.name===t))));t.length&&console.error(`Missing state machine inputs: ${t.join(", ")}`),this.props.onLoad&&this.props.onLoad()}triggerInput(e){const t=this.getInputs().find((t=>t.name===e));t?t.fire():console.warn(`Input ${e} not found.`)}play(e){this.riveInstance?.play(e)}stop(){this.riveInstance?.stop()}checkHitboxDistance(e){const t=this.props.canvas.getBoundingClientRect(),i=e.clientX-t.left,n=e.clientY-t.top;return this.validateRange(i,n)}validateRange(e,t){const i=e>=this.hitboxRangeX.from&&e<=this.hitboxRangeX.to,n=t>=this.hitboxRangeY.from&&t<=this.hitboxRangeY.to;return i&&n}onClick(e,t){return this.validateRange(e,t)}stopRiveMonster(){this.riveInstance?.stop()}cleanupRiveInstance(){this.riveInstance?.cleanup(),this.riveInstance=null}dispose(){this.riveInstance&&this.cleanupRiveInstance()}}class co{targetLetter=null;setTargetLetter(e){this.targetLetter=e}validateLetterDrop(e){return!!this.targetLetter&&e===this.targetLetter}handleLetterDrop({droppedText:e,getRandomInt:t,handleCorrectLetterDrop:i,handleLetterDropEnd:n,isFeedBackTriggeredSetter:s,playFeedbackAudio:r}){const o=t(0,1),a=this.validateLetterDrop(e);return r(o,a,!1,e),a&&i(o),s(!0),n(a,"Letter"),a}reset(){this.targetLetter=null}}class uo{levelData;puzzleNumber;groupedLetters;droppedLetters;groupedObj;droppedHistory;hideListObj;constructor(e,t){this.levelData=e,this.puzzleNumber=t,this.groupedLetters="",this.droppedLetters="",this.groupedObj={},this.droppedHistory={},this.hideListObj={}}getTargetWord(){return this.levelData.puzzles[this.puzzleNumber]?.prompt?.promptText}getValues(){return{groupedLetters:this.groupedLetters,droppedLetters:this.droppedLetters,groupedObj:{...this.groupedObj},droppedHistory:{...this.droppedHistory},hideListObj:{...this.hideListObj}}}checkIsWordPuzzle(){return"Word"===this.levelData?.levelMeta?.levelType}updatePuzzleLevel(e){this.clearAllValues(),this.puzzleNumber=e}clearPickedUp(){this.groupedLetters="",this.groupedObj={},this.hideListObj={...this.droppedHistory}}clearAllValues(){this.groupedLetters="",this.droppedLetters="",this.groupedObj={},this.droppedHistory={},this.hideListObj={},this.puzzleNumber=0}validateShouldHideLetter(e){return!this.hideListObj[e]}handleCheckHoveredLetter(e,t){const i=this.groupedLetters,n=this.getTargetWord();if(!this.droppedLetters.length&&n[0]!==i[0])return!1;const s=!i.includes(e),r=!this.groupedObj[t];return n.includes(`${this.droppedLetters}${i}${e}`)&&(s||r)}validateFedLetters(){const e=this.getTargetWord();return this.droppedLetters===e.substring(0,this.droppedLetters.length)}validateWordPuzzle(){const e=this.getTargetWord();return this.droppedLetters===e}setGroupToDropped(){this.droppedLetters=`${this.droppedLetters}${this.groupedLetters}`,this.droppedHistory={...this.droppedHistory,...this.groupedObj}}setPickUpLetter(e,t){this.hideListObj={...this.hideListObj,...this.groupedObj},this.groupedLetters=`${this.groupedLetters}${e}`,this.groupedObj[t]=e}}!function(e){e.CORRECT_ANSWER="correct_answer",e.PARTIAL_CORRECT="partial_correct",e.INCORRECT="incorrect"}(oo||(oo={}));class ho{audioPlayer;feedbackAudios;correctStoneAudio;constructor(e){this.audioPlayer=new we,this.feedbackAudios=this.convertFeedBackAudiosToList(e),this.correctStoneAudio=new Audio("assets/audios/CorrectStoneFinal.mp3"),this.correctStoneAudio.loop=!1}playFeedback(e,t){switch(e){case oo.CORRECT_ANSWER:this.playCorrectAnswerFeedbackSound(t);break;case oo.PARTIAL_CORRECT:this.playPartialCorrectFeedbackSound();break;case oo.INCORRECT:this.playIncorrectFeedbackSound()}}playPartialCorrectFeedbackSound(){this.audioPlayer.playAudioQueue(!1,l,c(2))}playIncorrectFeedbackSound(){this.audioPlayer.playAudioQueue(!1,l),setTimeout((()=>{this.audioPlayer.playAudioQueue(!1,"./assets/audios/MonsterSpit.mp3",Math.round(Math.random())>0?"./assets/audios/Disapointed-05.mp3":null)}),1700)}async playCorrectAnswerFeedbackSound(e){try{const t=N.getRandomNumber(1,3).toString();await Promise.allSettled([this.correctStoneAudio.play(),this.audioPlayer.playAudioQueue(!1,l,c(t),"assets/audios/PointsAdd.wav",N.getConvertedDevProdURL(this.feedbackAudios[e]))])}catch(e){console.warn("Audio playback failed:",e)}}stopAllAudio(){this.audioPlayer.stopAllAudios(),this.correctStoneAudio&&this.correctStoneAudio.pause()}convertFeedBackAudiosToList(e){return[e.fantastic,e.great,e.amazing]}dispose(){this.audioPlayer.stopAllAudios(),this.correctStoneAudio&&(this.correctStoneAudio.pause(),this.correctStoneAudio.src="")}}class po{wordPuzzleLogic=null;letterPuzzleLogic=null;feedbackAudioHandler;constructor(e,t=0,i){i&&(this.feedbackAudioHandler=new ho(i)),this.initialize(e,t)}initialize(e,t){if(!e||!e.levelMeta)return;const{levelType:i}=e.levelMeta;this.wordPuzzleLogic="Word"===i||"SoundWord"===i?new uo(e,t):null,this.letterPuzzleLogic=null}createPuzzle(e){switch(e.levelType){case"LetterOnly":case"LetterInWord":return this.handleLetterPuzzle(e);case"Word":case"SoundWord":return this.handleWordPuzzle(e);default:return!1}}handleLetterPuzzle(e){return this.letterPuzzleLogic||(this.letterPuzzleLogic=new co,this.letterPuzzleLogic.setTargetLetter(e.targetLetterText)),this.letterPuzzleLogic.handleLetterDrop({droppedText:e.pickedLetter.text,getRandomInt:(t,i)=>this.getRandomInt(t,i,e.feedBackTexts),handleCorrectLetterDrop:e.handleCorrectLetterDrop,handleLetterDropEnd:e.handleLetterDropEnd,isFeedBackTriggeredSetter:e.isFeedBackTriggeredSetter,playFeedbackAudio:(t,i,n,s)=>{this.processLetterDropFeedbackAudio(e.targetLetterText,t,i,n,s)}})}handleWordPuzzle(e){if(!this.wordPuzzleLogic)return;this.stopFeedbackAudio();const t=this.getRandomInt(0,1,e.feedBackTexts);this.wordPuzzleLogic.setGroupToDropped();const i=this.wordPuzzleLogic.validateFedLetters();if(this.processLetterDropFeedbackAudio(e.targetLetterText,t,i,!0,this.getWordPuzzleDroppedLetters()),i){if(this.wordPuzzleLogic.validateWordPuzzle())return e.handleCorrectLetterDrop(t),e.handleLetterDropEnd(i,"Word"),void(e.lettersCountRef.value=1);e.triggerMonsterAnimation("isMouthClosed"),e.triggerMonsterAnimation("backToIdle"),e.timerTicking.startTimer();const{droppedHistory:n}=this.wordPuzzleLogic.getValues(),s=Object.keys(n).length;e.promptText.droppedLetterIndex("arabic"===e.lang?e.lettersCountRef.value:s),e.lettersCountRef.value++}else e.handleLetterDropEnd(i,"Word"),e.lettersCountRef.value=1}getRandomInt(e,t,i){const n=Object.values(i).filter((e=>null!=e)).length-1;return Math.floor(Math.random()*(n-e+1))+e}getRandomFeedBackText(e,t){return t[Object.keys(t)[e]]||""}processLetterDropFeedbackAudio(e,t,i,n,s){if(this.feedbackAudioHandler)if(i){(n?s===e:i)?this.feedbackAudioHandler.playFeedback(oo.CORRECT_ANSWER,t):this.feedbackAudioHandler.playFeedback(oo.PARTIAL_CORRECT,t)}else this.feedbackAudioHandler.playFeedback(oo.INCORRECT,t)}clearPickedUp(){this.wordPuzzleLogic&&this.wordPuzzleLogic.clearPickedUp()}checkIsWordPuzzle(){return!!this.wordPuzzleLogic&&this.wordPuzzleLogic.checkIsWordPuzzle()}getWordPuzzleValues(){return this.wordPuzzleLogic?this.wordPuzzleLogic.getValues():{}}getWordPuzzleGroupedObj(){return this.wordPuzzleLogic?.getValues().groupedObj??{}}getWordPuzzleDroppedLetters(){return this.wordPuzzleLogic?.getValues().droppedLetters}handleCheckHoveredLetter(e,t){return this.wordPuzzleLogic?.handleCheckHoveredLetter(e,t)}setPickUpLetter(e,t){this.wordPuzzleLogic&&this.wordPuzzleLogic.setPickUpLetter(e,t)}validateShouldHideLetter(e){return!!this.wordPuzzleLogic&&this.wordPuzzleLogic.validateShouldHideLetter(e)}handleCorrectLetterDrop(e,t,i,n){n(100);const s=this.getRandomFeedBackText(e,i.feedBackTexts);t.wrapText(s);setTimeout((()=>{t.hideText()}),4500)}stopFeedbackAudio(){this.feedbackAudioHandler&&this.feedbackAudioHandler.stopAllAudio()}dispose(){this.feedbackAudioHandler&&this.feedbackAudioHandler.dispose()}}class mo{width;height;monster;jsonVersionNumber;canvas;levelData;timerTicking;promptText;pauseButton;tutorial;id;context;levelIndicators;stonesCount=1;pickedStone;puzzleStartTime;pausePopupComponent;feedBackTexts;isPuzzleCompleted;rightToLeft;levelNumber;stoneHandler;counter=0;handler;pickedStoneObject;isPauseButtonClicked;background;feedBackTextCanavsElement;feedbackTextEffects;isGameStarted=!1;time=0;score=0;data;triggerInputs;audioPlayer;firebaseIntegration;startTime;puzzleTime;isDisposing;trailEffectHandler;riveMonsterElement;gameControl;unsubscribeEvent;timeTicker;isFeedBackTriggered;monsterPhaseNumber;backgroundGenerator;loadPuzzleDelay;puzzleHandler;animationDelays=[{backToIdle:350,isChewing:0,isHappy:1700,isSpit:1500,isSad:3e3},{backToIdle:350,isChewing:0,isHappy:1700,isSpit:1e3,isSad:2500},{backToIdle:350,isChewing:0,isHappy:1700,isSpit:1300,isSad:2600},{backToIdle:350,isChewing:0,isHappy:1700,isSpit:100,isSad:2500}];constructor(){const e=Ke.getGamePlaySceneDetails();this.pausePopupComponent=new so,this.initializeProperties(e),this.setupUIElements(),this.isDisposing=!1,this.initializeGameComponents(e);var t=this.levelData.levelMeta.levelNumber;Q.DebugMode?localStorage.setItem(r+q+"Debug",t):localStorage.setItem(r+q,t),this.addEventListeners(),this.startGameTime(),this.startPuzzleTime(),this.firebaseIntegration=new ur,this.feedbackTextEffects=new et,this.audioPlayer=new we,this.puzzleHandler=new po(this.levelData,this.counter,e.feedbackAudios),this.unsubscribeEvent=Ke.subscribe(Ke.EVENTS.GAME_PAUSE_STATUS_EVENT,(e=>{this.isPauseButtonClicked=e,e&&this.pausePopupComponent.open()})),this.loadPuzzleDelay=4500,this.pausePopupComponent.onClose((e=>{const{data:t}=e;switch(t){case no:Ke.publish(Ke.EVENTS.GAMEPLAY_DATA_EVENT,{currentLevelData:this.levelData,selectedLevelNumber:this.levelNumber}),Ke.publish(Ke.EVENTS.SWITCH_SCENE_EVENT,j);break;case io:Ke.publish(Ke.EVENTS.GAME_PAUSE_STATUS_EVENT,!1),Ke.publish(Ke.EVENTS.SWITCH_SCENE_EVENT,D);default:Ke.publish(Ke.EVENTS.GAME_PAUSE_STATUS_EVENT,!1),this.resumeGame()}})),this.setupMonsterPhaseBg()}initializeRiveMonster(){return new lo({canvas:this.riveMonsterElement,autoplay:!0,fit:"contain",alignment:"bottomCenter",gameCanvas:this.canvas,src:P[this.monsterPhaseNumber]})}initializeGameComponents(e){let t;this.trailEffectHandler=new ut(this.canvas),this.pauseButton=new Te,this.pauseButton.onClick((()=>{Ke.publish(Ke.EVENTS.GAME_PAUSE_STATUS_EVENT,!0),this.pauseGamePlay()})),this.timerTicking=new ot(this.width,this.height,this.loadPuzzle),this.stoneHandler=new qe(this.context,this.canvas,this.counter,this.levelData),this.tutorial=new bt({context:this.context,width:this.width,height:this.height,puzzleLevel:this.counter,shouldHaveTutorial:e?.tutorialOn}),this.tutorial.showHandPointerInAudioPuzzle(e.levelData)&&(t=()=>{this.tutorial.shouldShowTutorialAnimation=!0,this.tutorial.quickStartTutorialReady=!0}),this.promptText=new Xe(this.width,this.height,this.levelData.puzzles[this.counter],this.levelData,this.rightToLeft,"prompt-container",{selectors:Ye},t,this.tutorial.shouldPlayTutorialPromptAudio),this.levelIndicators=new $e,this.levelIndicators.setIndicators(this.counter),this.monster=this.initializeRiveMonster(),this.tutorial.shouldShowTutorialAnimation=e.tutorialOn&&!e.isTutorialCleared,this.tutorial.showHandPointerInAudioPuzzle(e.levelData)?this.tutorial.resetQuickStartTutorialDelay():this.tutorial.quickStartTutorialReady=!0}setupUIElements(){const{canvasElem:e,canvasWidth:i,canvasHeight:n,gameCanvasContext:s,gameControlElem:r}=t.getCanvasSizeValues(),o=t.getRiveCanvasValue();this.handler=e,this.riveMonsterElement=o,this.riveMonsterElement.style.zIndex="4",this.gameControl=r,this.gameControl.style.zIndex="5",this.canvas=e,this.width=N.getResponsiveCanvasWidth(),this.height=n,this.context=s}initializeProperties(e){this.isPauseButtonClicked=e?.isGamePaused,this.rightToLeft=e.rightToLeft,this.levelData=e.levelData,this.levelNumber=e.levelNumber,this.jsonVersionNumber=e.jsonVersionNumber,this.feedBackTexts=e.feedBackTexts,this.data=e.data,this.monsterPhaseNumber=e.monsterPhaseNumber}setupBg=()=>{const e=Qe.createBackgroundComponent(this.levelData.levelMeta.levelNumber);(new Qe).generateBackground(e)};setupMonsterPhaseBg(){this.backgroundGenerator=new Ze,this.backgroundGenerator.generateBackground(this.monsterPhaseNumber)}resumeGame=()=>{this.addEventListeners(),this.timerTicking?.applyRotation(this.timerTicking?.startMyTimer&&!this.timerTicking?.isStoneDropped)};triggerMonsterAnimation(e){const t=this.animationDelays[this.monsterPhaseNumber]?.[e]??0;t>0?setTimeout((()=>{this.monster.triggerInput(e)}),t):this.monster.triggerInput(e)}handleMouseUp=e=>{if(!this.pickedStone||this.pickedStone.frame<=99)this.puzzleHandler.clearPickedUp();else{if(this.monster.checkHitboxDistance(e)){this.tutorial.hideTutorial();const e={value:this.stonesCount},t={levelType:this.levelData.levelMeta.levelType,pickedLetter:{text:this.pickedStone.text,frame:this.pickedStone.frame},targetLetterText:this.stoneHandler.getCorrectTargetStone(),audioPlayer:this.audioPlayer,promptText:this.promptText,handleCorrectLetterDrop:void 0,handleLetterDropEnd:this.handleStoneDropEnd.bind(this),triggerMonsterAnimation:this.triggerMonsterAnimation.bind(this),timerTicking:this.timerTicking,isFeedBackTriggeredSetter:e=>{this.isFeedBackTriggered=e},lang:q,lettersCountRef:e,feedBackTexts:this.feedBackTexts,levelData:this.levelData,counter:this.counter,width:this.width};t.handleCorrectLetterDrop=e=>{this.puzzleHandler.handleCorrectLetterDrop(e,this.feedbackTextEffects,t,(e=>this.score+=e)),this.stoneHandler.hideStone(this.pickedStoneObject)},this.puzzleHandler.createPuzzle(t),"Word"!==t.levelType&&"SoundWord"!==t.levelType||this.stoneHandler.hideStone(this.pickedStoneObject),this.stonesCount=e.value,this.isFeedBackTriggered=!0,this.trailEffectHandler.setGameHasStarted(!1)}else this.pickedStoneObject&&(this.stoneHandler.resetStonePosition(this.width,this.pickedStone,this.pickedStoneObject),this.triggerMonsterAnimation("isMouthClosed"),this.triggerMonsterAnimation("backToIdle"));this.pickedStone=null,this.puzzleHandler.clearPickedUp()}};handleMouseDown=e=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;let t=this.canvas.getBoundingClientRect();const i=e.clientX-t.left,n=e.clientY-t.top;if(this.puzzleHandler.checkIsWordPuzzle())this.setPickedUp(i,n);else{const e=this.stoneHandler.handlePickStoneUp(i,n);e&&(this.pickedStoneObject=e,this.pickedStone=e,this.stoneHandler.playDragAudioIfNecessary(e))}};setPickedUp(e,t){if(this.pickedStone&&this.pickedStone.frame<=99)return;const i=this.stoneHandler.handlePickStoneUp(e,t);i&&(this.pickedStoneObject=i,this.pickedStone=i,this.stoneHandler.playDragAudioIfNecessary(i),"Word"===this.levelData?.levelMeta?.levelType&&this.puzzleHandler.setPickUpLetter(i?.text,i?.foilStoneIndex))}handleMouseMove=e=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;if(!this.pickedStone)return;let t=this.stoneHandler.handleMovingStoneLetter(this.pickedStone,e.clientX,e.clientY);this.pickedStone=t;let i=t.x,n=t.y;if(this.puzzleHandler.checkIsWordPuzzle()){const e=this.stoneHandler.handleHoveringToAnotherStone(i,n,((e,t)=>this.puzzleHandler.handleCheckHoveredLetter(e,t)));e&&(this.puzzleHandler.setPickUpLetter(e?.text,e?.foilStoneIndex),this.pickedStone=this.stoneHandler.resetStonePosition(this.width,this.pickedStone,this.pickedStoneObject),this.pickedStoneObject=e,this.pickedStone=e)}this.tutorial.shouldShowTutorialAnimation=!1,this.triggerMonsterAnimation("isMouthOpen")};handleMouseClick=e=>{let t=this.canvas.getBoundingClientRect();const i=e.clientX-t.left,n=e.clientY-t.top;this.monster.onClick(i,n)&&this.setGameToStart();const s=document.getElementById("prompt-play-button");s&&s.contains(e.target)&&this.promptText.playSound()};handleTouchStart=e=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;const t=e.touches[0];this.handleMouseDown({clientX:t.clientX,clientY:t.clientY})};handleTouchMove=e=>{const t=e.touches[0];this.handleMouseMove({clientX:t.clientX,clientY:t.clientY})};handleTouchEnd=e=>{const t=e.changedTouches[0];this.handleMouseUp({clientX:t.clientX,clientY:t.clientY})};setGameToStart(){this.isGameStarted=!0,this.time=0,this.trailEffectHandler.setGameHasStarted(!0)}draw(e){const t=this.tutorial.shouldShowTutorialAnimation&&this.tutorial.quickStartTutorialReady&&0===this.counter,i=this.tutorial.shouldShowTutorialAnimation&&!this.tutorial.quickStartTutorialReady&&0===this.counter;if(!this.isGameStarted&&!this.isPauseButtonClicked){if(t)return this.tutorial.drawQuickStart(e,this.isGameStarted),void(this.tutorial.isQuickStartFinished()&&this.setGameToStart());if(i)return;this.time+=e,this.time>=5e3&&this.setGameToStart()}this.trailEffectHandler?.draw(),this.isGameStarted&&(this.handleStoneLetterDrawing(),this.handleTimerUpdate(e)),this.tutorial.draw(e,this.isGameStarted)}handleStoneLetterDrawing(){this.puzzleHandler.checkIsWordPuzzle()?this.stoneHandler.drawWordPuzzleLetters((e=>this.puzzleHandler.validateShouldHideLetter(e)),this.puzzleHandler.getWordPuzzleGroupedObj()):this.stoneHandler.draw()}handleTimerUpdate(e){if(this.stoneHandler.stonesHasLoaded&&!this.isPauseButtonClicked)if(this.tutorial.shouldShowTutorialAnimation){this.tutorial.updateTutorialTimer(e)&&this.timerTicking.update(e)}else this.timerTicking.update(e)}addEventListeners(){this.handler.addEventListener(ne,this.handleMouseUp,!1),this.handler.addEventListener(te,this.handleMouseMove,!1),this.handler.addEventListener(ie,this.handleMouseDown,!1),this.handler.addEventListener(se,this.handleTouchStart,!1),this.handler.addEventListener(re,this.handleTouchMove,!1),this.handler.addEventListener(oe,this.handleTouchEnd,!1),this.handler.addEventListener(ae,this.handleMouseClick,!1),document.addEventListener(le,this.handleVisibilityChange,!1)}removeEventListeners(){this.handler.removeEventListener(ae,this.handleMouseClick,!1),this.handler.removeEventListener("mouseup",this.handleMouseUp,!1),this.handler.removeEventListener("mousemove",this.handleMouseMove,!1),this.handler.removeEventListener("mousedown",this.handleMouseDown,!1),this.handler.removeEventListener("touchstart",this.handleTouchStart,!1),this.handler.removeEventListener("touchmove",this.handleTouchMove,!1),this.handler.removeEventListener("touchend",this.handleTouchEnd,!1)}loadPuzzle=e=>{this.removeEventListeners(),this.stonesCount=1;const t=Boolean(e);if(t&&(this.tutorial.hideTutorial(),this.logPuzzleEndFirebaseEvent(!1)),this.counter+=1,this.isGameStarted=!1,this.tutorial.resetTutorialTimer(),this.tutorial.resetQuickStartTutorialDelay(),this.counter===this.levelData.puzzles.length){const e=()=>{this.levelIndicators.setIndicators(this.counter),this.logLevelEndFirebaseEvent(),ye.setGameLevelScore(this.levelData,this.score);const e={starCount:ye.calculateStarCount(this.score),currentLevel:this.levelNumber,isTimerEnded:t};Ke.publish(Ke.EVENTS.LEVEL_END_DATA_EVENT,{levelEndData:e,data:this.data}),Ke.publish(Ke.EVENTS.SWITCH_SCENE_EVENT,B),this.monster.dispose()};if(t)return void e();this.tutorial.hideTutorial();const i=setTimeout(e,this.loadPuzzleDelay);if(this.isFeedBackTriggered){const t=this.audioPlayer?.audioSourcs||[],n=t[t.length-1];n&&(n.onended=()=>{clearTimeout(i),e()})}}else{const e=new CustomEvent(Z,{detail:{counter:this.counter}});setTimeout((()=>{this.isDisposing||(this.initNewPuzzle(e),this.timerTicking.startTimer())}),t?0:this.loadPuzzleDelay)}};initNewPuzzle(e){this.monster&&this.monster.dispose(),this.stoneHandler.stonesHasLoaded=!1,this.monster=this.initializeRiveMonster(),this.removeEventListeners(),this.isGameStarted=!1,this.time=0,this.loadPuzzleDelay=4500,this.puzzleHandler.initialize(this.levelData,this.counter),this.pickedStone=null,document.dispatchEvent(e),this.addEventListeners(),this.audioPlayer.stopAllAudios(),this.startPuzzleTime(),this.tutorial.resetQuickStartTutorialDelay()}dispose=()=>{this.isDisposing=!0,this.audioPlayer&&(this.audioPlayer.stopAllAudios(),this.audioPlayer=null),this.monster&&(this.monster.dispose(),this.monster=null),this.stoneHandler&&(this.stoneHandler.dispose(),this.stoneHandler=null),this.timerTicking&&(this.timerTicking.destroy(),this.timerTicking=null),this.trailEffectHandler&&this.trailEffectHandler.dispose(),this.tutorial&&(this.tutorial.dispose(),this.tutorial=null),this.unsubscribeEvent&&(this.unsubscribeEvent(),this.unsubscribeEvent=null),document.removeEventListener(le,this.handleVisibilityChange,!1),this.removeEventListeners(),this.levelIndicators&&(this.levelIndicators.dispose(),this.levelIndicators=null),this.promptText&&(this.promptText.dispose(),this.promptText=null),this.pauseButton&&(this.pauseButton.dispose(),this.pauseButton=null),this.pausePopupComponent&&(this.pausePopupComponent.destroy(),this.pausePopupComponent=null),this.pickedStone=null,this.pickedStoneObject=null};handleStoneDropEnd(e,t=null){const i=this.monster.getInputs(),n=i.find((e=>"isHappy"===e.name)),s=i.find((e=>"isSpit"===e.name)),r=i.find((e=>"isSad"===e.name));return i.find((e=>"isChewing"===e.name))&&n&&s&&r?(e?(this.triggerMonsterAnimation("isChewing"),this.triggerMonsterAnimation("isHappy")):(this.triggerMonsterAnimation("isChewing"),this.triggerMonsterAnimation("isSpit"),this.triggerMonsterAnimation("isSad")),this.logPuzzleEndFirebaseEvent(e,t),this.dispatchStoneDropEvent(e),void setTimeout((()=>{this.adjustLoadPuzzleDelay(e),this.loadPuzzle()}),e?0:2e3)):(console.error("Missing triggers for animations."),!1)}adjustLoadPuzzleDelay(e){this.loadPuzzleDelay=e?4500:3e3}dispatchStoneDropEvent(e){const t=new CustomEvent(ee,{detail:{isCorrect:e}});document.dispatchEvent(t)}logPuzzleEndFirebaseEvent(e,t){let i=Date.now();const n=this.puzzleHandler.getWordPuzzleDroppedLetters(),s={cr_user_id:Y,ftm_language:q,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.jsonVersionNumber,success_or_failure:e?"success":"failure",level_number:this.levelData.levelMeta.levelNumber,puzzle_number:this.counter,item_selected:"Word"==t?null==n||null==n?"TIMEOUT":n:null==this.pickedStone||null==this.pickedStone?"TIMEOUT":this.pickedStone?.text,target:this.stoneHandler.getCorrectTargetStone(),foils:this.stoneHandler.getFoilStones(),response_time:(i-this.puzzleTime)/1e3};this.firebaseIntegration.sendPuzzleCompletedEvent(s)}logLevelEndFirebaseEvent(){let e=Date.now();const t={cr_user_id:Y,ftm_language:q,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.jsonVersionNumber,success_or_failure:ye.calculateStarCount(this.score)>=3?"success":"failure",number_of_successful_puzzles:this.score/100,level_number:this.levelData.levelMeta.levelNumber,duration:(e-this.startTime)/1e3};this.firebaseIntegration.sendLevelCompletedEvent(t)}startGameTime(){this.startTime=Date.now()}startPuzzleTime(){this.puzzleTime=Date.now()}pauseGamePlay=()=>{this.removeEventListeners(),this.audioPlayer.stopAllAudios(),this.timerTicking?.applyRotation(!1)};handleVisibilityChange=()=>{this.audioPlayer.stopAllAudios(),Ke.publish(Ke.EVENTS.GAME_PAUSE_STATUS_EVENT,!0),this.pauseGamePlay()};handleGamePause=()=>{Ke.publish(Ke.EVENTS.GAME_PAUSE_STATUS_EVENT,!0),this.pauseGamePlay()}}function go(e,t,i,n){return{draw:()=>{e.drawImage(n?.LEVEL_SELECTION_BACKGROUND,0,0,t,i)}}}async function fo(e,t,i,n){const s=(e=>O.includes(e))(i);return{...{x:e,y:t,index:i,isSpecial:s,...n,balloonImg:s?n?.specialBloonImg:n?.balloonImg}}}class vo{canvas;data;width;height;context;levels;gameLevelData;audioPlayer;images;loadedImages;imagesLoaded=!1;xDown;yDown;previousPlayedLevelNumber;levelSelectionPageIndex=0;levelNumber;levelsSectionCount;unlockLevelIndex;majVersion;minVersion;firebaseIntegration;background;rightBtnSize;rightBtnX;rightBtnY;leftBtnSize;leftBtnX;leftBtnY;levelButtons;riveMonsterElement;constructor(){const{canvasElem:e,canvasWidth:i,canvasHeight:n,context:s}=t.getCanvasSizeValues();this.canvas=e,this.width=i>1024?500:i,this.height=n,this.context=s,this.data=Ke.getFTMData();let o=this;this.levelsSectionCount=o.data.levels.length/10>Math.floor(o.data.levels.length/10)?Math.floor(o.data.levels.length/10)+1:Math.floor(o.data.levels.length/10),this.levels=[],this.firebaseIntegration=new ur,this.init(),this.createLevelButtons(),this.gameLevelData=ye.getAllGameLevelInfo(),this.audioPlayer=new we,this.unlockLevelIndex=-1,this.previousPlayedLevelNumber=0|parseInt(Q.DebugMode?localStorage.getItem(r+q+"Debug"):localStorage.getItem(r+q)),null!=this.previousPlayedLevelNumber&&(this.levelSelectionPageIndex=10*Math.floor(this.previousPlayedLevelNumber/10)),this.setupBg(),this.images={nextbtn:T,backbtn:"./assets/images/back_btn.svg"},F(this.images,(e=>{this.loadedImages=Object.assign({},e),this.imagesLoaded=!0,"visible"===document.visibilityState&&this.audioPlayer.playAudio(u)})),this.addListeners(),this.rightBtnSize=10,this.rightBtnX=.73,this.rightBtnY=1.3,this.leftBtnSize=10,this.leftBtnX=10,this.leftBtnY=1.3}async init(){const e=await ue();this.majVersion=e.majversion,this.minVersion=e.minversion}setupBg=async()=>{this.background=await async function(e,t,i,n,s){return{...{...s(e,t,i,{...await U(n)})}}}(this.context,this.width,this.height,{LEVEL_SELECTION_BACKGROUND:"./assets/images/map.webp"},go)};async createLevelButtons(){const e=await U({balloonImg:"./assets/images/mapIcon.webp",specialBloonImg:"./assets/images/map_icon_monster_level_v01.webp",lockImg:"./assets/images/mapLock.webp",starImg:"./assets/images/star.webp"}),t=[[[(i=this.canvas).width/10,i.height/10],[i.width/2.5,i.height/10],[i.width/3+i.width/2.8,i.height/10],[i.width/10,i.height/3],[i.width/2.5,i.height/3],[i.width/3+i.width/2.8,i.height/3],[i.width/10,i.height/1.8],[i.width/2.5,i.height/1.8],[i.width/3+i.width/2.8,i.height/1.8],[i.width/2.5,i.height/1.3]]];var i;const n=this.data.levels.length,s=Math.max(0,n-this.levelSelectionPageIndex),r=Math.min(10,s),o=t[0].slice(0,r).map(((t,i)=>fo(t[0],t[1],i+1,e)));this.levels=await Promise.all(o),this.levelButtons=this.levels.map((e=>new fr(this.canvas,this.context,{...e})))}async updatePage(e){this.levelSelectionPageIndex=e,await this.createLevelButtons(),this.downButton(this.levelSelectionPageIndex)}addListeners(){document.getElementById("canvas").addEventListener("mousedown",this.handleMouseDown,!1),document.addEventListener("visibilitychange",this.pausePlayAudios,!1),document.getElementById("canvas").addEventListener("touchstart",this.handleTouchStart,!1),document.getElementById("canvas").addEventListener("touchmove",this.handleTouchMove,!1)}pausePlayAudios=()=>{"visible"===document.visibilityState?this.audioPlayer.playAudio(u):this.audioPlayer.stopAllAudios()};getTouches(e){return e.touches||e.originalEvent.touches}handleTouchStart=e=>{const t=this.getTouches(e)[0];this.xDown=t.clientX,this.yDown=t.clientY};handleTouchMove=e=>{if(!this.xDown||!this.yDown)return;let t=e.touches[0].clientX,i=e.touches[0].clientY,n=this.xDown-t,s=this.yDown-i;Math.abs(n)>Math.abs(s)&&(n>0?this.levelSelectionPageIndex!=10*this.levelsSectionCount-10&&this.updatePage(this.levelSelectionPageIndex+10):0!=this.levelSelectionPageIndex&&this.updatePage(this.levelSelectionPageIndex-10)),this.xDown=null,this.yDown=null};handleMouseDown=e=>{e.preventDefault();let t=document.getElementById("canvas").getBoundingClientRect();const i=e.clientX-t.left,n=e.clientY-t.top,s=(e,t=1.3)=>i>=e&&i<e+this.canvas.height/10&&n>this.canvas.height/t&&n<this.canvas.height/t+this.canvas.height/10,r=s(.7*this.canvas.width),o=s(this.canvas.width/10);if(o||r){const e=this.levelSelectionPageIndex;r&&e!=10*this.levelsSectionCount-10?(this.audioPlayer.playButtonClickSound(),this.updatePage(e+10),this.rightBtnSize=10.5,this.rightBtnY=1.299):o&&0!=e&&(this.audioPlayer.playButtonClickSound(),this.updatePage(e-10),this.leftBtnSize=10.3,this.leftBtnY=1.299)}for(let e of this.levelButtons)e.onClick(i,n,this.levelSelectionPageIndex-1,this.unlockLevelIndex+1,(e=>{this.audioPlayer.playButtonClickSound(),this.levelNumber=e+this.levelSelectionPageIndex-1,this.startGame(this.levelNumber)}))};isLevelCompleted(e,t){const i=t.find((t=>t.levelNumber===e));return(i?.starCount||0)>=2}drawLevel(e,t){const i=e.levelData.index+this.levelSelectionPageIndex,n=i-1;this.unlockLevelIndex+1!==n||this.isLevelCompleted(n,t)||e.applyPulseEffect(),i<=this.data.levels.length&&(this.checkUnlockedLevel(t),e.draw(this.levelSelectionPageIndex,this.unlockLevelIndex,t,this.data.levels.length),Q.DebugMode&&this.context.fillText(this.data.levels[i-1].levelMeta.levelType,e.levelData.x+e.btnSize/3.5,e.levelData.y+e.btnSize/1.3))}drawLevelSelection(){for(let e of this.levelButtons)this.drawLevel(e,this.gameLevelData)}downButton(e){e!=10*this.levelsSectionCount-10?(this.context.drawImage(this.loadedImages.nextbtn,this.canvas.width*this.rightBtnX,this.canvas.height/this.rightBtnY,this.canvas.height/this.rightBtnSize,this.canvas.height/this.rightBtnSize),this.rightBtnSize>10&&(this.rightBtnSize=this.rightBtnSize-.025),this.rightBtnY=this.rightBtnSize>10?1.299:1.3):(this.rightBtnSize=10,this.rightBtnX=.7,this.rightBtnY=1.3),0!=e?(this.context.drawImage(this.loadedImages.backbtn,this.canvas.width/this.leftBtnX,this.canvas.height/this.leftBtnY,this.canvas.height/this.leftBtnSize,this.canvas.height/this.leftBtnSize),this.leftBtnSize>10&&(this.leftBtnSize=this.leftBtnSize-.025),this.leftBtnY=this.leftBtnSize>10?1.299:1.3):(this.leftBtnSize=10,this.leftBtnX=10,this.leftBtnY=1.3)}checkUnlockedLevel(e){if(null!=e.length)for(let t of e)this.unlockLevelIndex<parseInt(t.levelNumber)&&t.starCount>=2&&(this.unlockLevelIndex=parseInt(t.levelNumber))}startGame(e){this.dispose(),this.audioPlayer.stopAllAudios();const t={currentLevelData:{...this.data.levels[e],levelNumber:e},selectedLevelNumber:e};Ke.publish(Ke.EVENTS.GAMEPLAY_DATA_EVENT,t),this.logSelectedLevelEvent(),Ke.publish(Ke.EVENTS.SWITCH_SCENE_EVENT,M)}logSelectedLevelEvent(){const e={cr_user_id:Y,ftm_language:q,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",level_selected:this.levelNumber};this.firebaseIntegration.sendSelectedLevelEvent(e)}draw(){this.imagesLoaded&&(this.background?.draw(),this.drawLevelSelection(),this.downButton(this.levelSelectionPageIndex))}dispose(){this.audioPlayer.stopAllAudios(),document.getElementById("canvas").removeEventListener("mousedown",this.handleMouseDown,!1),document.removeEventListener("visibilitychange",this.pausePlayAudios,!1),document.getElementById("canvas").removeEventListener("touchstart",this.handleTouchStart,!1),document.getElementById("canvas").removeEventListener("touchmove",this.handleTouchMove,!1)}}var bo=i(717),yo={};yo.styleTagTransform=ze(),yo.setAttributes=je(),yo.insert=De().bind(null,"head"),yo.domAPI=ke(),yo.insertStyleElement=Oe();Pe()(bo.A,yo);bo.A&&bo.A.locals&&bo.A.locals;const _o={evolution:{zIndex:"13"},normal:{zIndex:"4"}};class wo extends lo{static shouldInitialize(){const{monsterPhaseNumber:e}=Ke.getLevelEndSceneData();return Ke.checkMonsterPhaseUpdation()>e}backgroundElement;evolutionProps;monsterPhaseNumber;evolveMonster;EVOLUTION_ANIMATION_COMPLETE_DELAY=7500;EVOLUTION_ANIMATION_FADE_EFFECT_DELAY=500;audioPlayer;isPlayingIntroFromVisibilityChange=!1;evolutionCompleteTimeoutId=null;fadeEffectTimeoutId=null;evolutionSoundEffectsTimeoutId=null;lastVisibilityState=!0;boundHandleVisibilityChange;constructor(e){const t=wo.getEvolutionSource(e.monsterPhaseNumber);super({...e,src:t}),this.evolutionProps=e,this.monsterPhaseNumber=Ke.checkMonsterPhaseUpdation(),this.audioPlayer=new we,this.initialize(),this.addEventListener(),this.preloadAudioFiles(),this.startAnimation()}initialize(){this.initializeBackground(),this.setCanvasPosition("evolution"),this.lastVisibilityState=V()}initializeBackground(){this.backgroundElement=new Ce({selectors:{root:"#background"}},"levelend-background",(e=>`<div id="${e}"></div>`),!0)}addEventListener(){this.boundHandleVisibilityChange=this.handleVisibilityChange.bind(this),document.addEventListener("visibilitychange",this.boundHandleVisibilityChange,!1)}pauseAudios(){!V()&&this.audioPlayer&&(this.audioPlayer.stopAllAudios(),this.isPlayingIntroFromVisibilityChange=!1)}handleVisibilityChange=()=>{const e=V();e!==this.lastVisibilityState&&(this.lastVisibilityState=e,e?this.playIntroAudio():this.pauseAudios())};preloadAudioFiles(){this.audioPlayer.preloadGameAudio(u),this.audioPlayer.preloadGameAudio(g)}playIntroAudio(){this.isPlayingIntroFromVisibilityChange=!0,V()?(this.audioPlayer.playAudio(g),setTimeout((()=>{V()&&this.audioPlayer.playAudio(u)}),1e3)):this.isPlayingIntroFromVisibilityChange=!1}clearAllTimeouts(){null!==this.evolutionCompleteTimeoutId&&(clearTimeout(this.evolutionCompleteTimeoutId),this.evolutionCompleteTimeoutId=null),null!==this.fadeEffectTimeoutId&&(clearTimeout(this.fadeEffectTimeoutId),this.fadeEffectTimeoutId=null),null!==this.evolutionSoundEffectsTimeoutId&&(clearTimeout(this.evolutionSoundEffectsTimeoutId),this.evolutionSoundEffectsTimeoutId=null)}static getEvolutionSource(e){return{1:A[0],2:A[1]}[e]||A[0]}setCanvasPosition(e){const t=_o[e];this.evolutionProps.canvas&&(this.evolutionProps.canvas.style.zIndex=t.zIndex)}handleEvolutionComplete(){this.playEvolutionCompletionAudios();const e=document.getElementById("levelend-background");e&&e.classList.add("fade-out"),this.setCanvasPosition("normal")}playEvolutionCompletionAudios(){this.audioPlayer.stopAllAudios(),V()&&(this.audioPlayer.playAudio(g),setTimeout((()=>{V()&&this.audioPlayer.playAudio(u)}),1e3))}startAnimation(){this.playEvolutionSoundEffects(),this.fadeEffectTimeoutId=setTimeout((()=>{const e=document.getElementById("levelend-background");e&&e.classList.add("gray")}),this.EVOLUTION_ANIMATION_FADE_EFFECT_DELAY),this.evolutionCompleteTimeoutId=setTimeout((()=>{V()&&(this.handleEvolutionComplete(),Ke.updateMonsterPhaseState(this.monsterPhaseNumber)),this.evolutionProps.onComplete&&this.evolutionProps.onComplete(),this.evolutionCompleteTimeoutId=null}),this.EVOLUTION_ANIMATION_COMPLETE_DELAY)}playEvolutionSoundEffects(){this.executeRiveAction("Play",(()=>{this.evolutionSoundEffectsTimeoutId=setTimeout((()=>{V()&&this.audioPlayer.playAudioQueue(!1,h[0])}),1e3)}))}dispose(){this.clearAllTimeouts(),this.backgroundElement&&this.backgroundElement.destroy(),this.audioPlayer&&this.audioPlayer.stopAllAudios(),document.removeEventListener("visibilitychange",this.boundHandleVisibilityChange,!1),super.dispose()}}class So{static renderButtonsHTML(){throw new Error("Method not implemented.")}starCount;currentLevel;monsterPhaseNumber;newPhaseNumber;data;audioPlayer;isLastLevel;levelEndElement=document.getElementById("levelEnd");buttonsContainer=document.getElementById("levelEndButtons");nextButtonInstance;retryButtonInstance;mapButtonInstance;riveMonster;canvasElement;starAnimationTimeouts=[];evolutionTimeout=null;evolveMonster;evolutionAnimation;EVOLUTION_ANIMATION_DELAY=5500;constructor(){const{starCount:e,currentLevel:i,data:n,monsterPhaseNumber:s}=Ke.getLevelEndSceneData(),{isLastLevel:r}=Ke.getGamePlaySceneDetails();this.evolveMonster=wo.shouldInitialize(),this.canvasElement=t.getRiveCanvasValue(),this.data=n,this.audioPlayer=new we,this.starCount=e,this.currentLevel=i,this.isLastLevel=r,this.initializeRiveMonster(s),this.toggleLevelEndBackground(!0),this.monsterPhaseNumber=Ke.checkMonsterPhaseUpdation(),this.showLevelEndScreen(),this.addEventListener(),this.renderStarsHTML(),this.switchToReactionAnimation()}initializeRiveMonster(e){this.riveMonster=new lo({canvas:this.canvasElement,autoplay:!0,fit:"contain",alignment:"bottomCenter",src:P[e]})}toggleLevelEndBackground=e=>{this.levelEndElement&&(this.levelEndElement.style.display=e?"block":"none",this.levelEndElement.style.zIndex="11")};showLevelEndScreen(){this.toggleLevelEndBackground(!0),this.renderStarsHTML(),this.evolveMonster?(this.buttonsContainer&&(this.buttonsContainer.style.display="none"),setTimeout((()=>{this.renderButtonsHTML(),this.buttonsContainer.style.display="flex"}),this.EVOLUTION_ANIMATION_DELAY)):this.renderButtonsHTML()}switchToReactionAnimation=()=>{this.starCount<=1?(V()&&this.audioPlayer.playAudio("./assets/audios/LevelLoseFanfare.mp3"),this.riveMonster&&(this.riveMonster.stop(),this.riveMonster.play(lo.Animations.SAD))):(V()&&!this.evolveMonster?(this.audioPlayer.playAudio("./assets/audios/LevelWinFanfare.mp3"),this.audioPlayer.playAudio(u)):Promise.all([this.audioPlayer.preloadGameAudio(p),this.audioPlayer.preloadGameAudio(m)]).then((()=>{this.audioPlayer.playAudioQueue(!1,p,m)})).catch((e=>{console.error("Error preloading evolution audio files:",e)})),this.riveMonster&&(this.riveMonster.stop(),this.riveMonster.play(lo.Animations.HAPPY)))};async callEvolutionAnimation(){this.evolveMonster&&(this.riveMonster.dispose(),this.evolutionAnimation=new wo({canvas:this.canvasElement,monsterPhaseNumber:this.monsterPhaseNumber,autoplay:!0,isEvolving:!0}))}renderStarsHTML(){const e=document.querySelector(".stars-container");if(!e)return;this.clearStarAnimationTimeouts(),e.innerHTML="";const t=["./assets/images/pinStar1.svg","./assets/images/pinStar2.svg","./assets/images/pinStar3.svg"];for(let i=0;i<this.starCount;i++){const n=document.createElement("img");n.src=t[i],n.alt=`Star ${i+1}`,n.classList.add("stars",`star${i+1}`),e.appendChild(n);const s=window.setTimeout((()=>{n.classList.add("show"),i===this.starCount-1&&(this.evolutionTimeout=window.setTimeout((()=>{this.starCount>=2&&this.callEvolutionAnimation()}),1e3))}),500*i);this.starAnimationTimeouts=[...this.starAnimationTimeouts,s]}}clearStarAnimationTimeouts(){this.starAnimationTimeouts.forEach((e=>window.clearTimeout(e))),this.starAnimationTimeouts=[],this.evolutionTimeout&&(window.clearTimeout(this.evolutionTimeout),this.evolutionTimeout=null)}createButton(e,t,i){const n=new e({targetId:"levelEndButtons",id:t});e===pr?this.nextButtonInstance=n:e===mr?this.retryButtonInstance=n:e===dr&&(this.mapButtonInstance=n);const s=document.getElementById("game-control");n.onClick((()=>{this.levelEndElement.style.zIndex="7",s.style.zIndex="-1",i()}))}buttonCallbackFn(e){this.evolutionAnimation&&(this.evolutionAnimation.dispose(),this.evolutionAnimation=null);const t=e=>{const t={currentLevelData:{...this.data.levels[e],levelNumber:e},selectedLevelNumber:e};this.handlePublishEvent(!0,t),Ke.publish(Ke.EVENTS.SWITCH_SCENE_EVENT,M)};switch(e){case"map":this.handlePublishEvent(!0),Ke.publish(Ke.EVENTS.SWITCH_SCENE_EVENT,D);break;case"retry":t(this.currentLevel);break;case"next":this.currentLevel<this.data.levels.length&&t(this.currentLevel+1);break;default:console.warn(`Unhandled action: ${e}`)}setTimeout((()=>{this.dispose()}),2e3)}renderButtonsHTML(){const e=document.getElementById("levelend-next-btn"),t=[{ButtonClass:dr,id:"levelend-map-btn",onClick:()=>{this.buttonCallbackFn("map")}}];!this.isLastLevel&&this.starCount>=2?t.push({ButtonClass:pr,id:"levelend-next-btn",onClick:()=>{this.buttonCallbackFn("next")}}):e&&e.remove(),t.push({ButtonClass:mr,id:"levelend-retry-btn",onClick:()=>{this.buttonCallbackFn("retry")}}),t.forEach((({ButtonClass:e,id:t,onClick:i})=>{this.createButton(e,t,i)}))}addEventListener(){document.addEventListener("visibilitychange",this.pauseAudios,!1)}handlePublishEvent(e,t=null){t&&Ke.publish(Ke.EVENTS.GAMEPLAY_DATA_EVENT,t),setTimeout((()=>{this.toggleLevelEndBackground(!e)}),800)}handleMouseClick=e=>{var t=document.getElementById("canvas").getBoundingClientRect();e.clientX,t.left,e.clientY,t.top};pauseAudios=()=>{V()?this.starCount>=2&&!this.evolveMonster&&this.audioPlayer.playAudio(u):this.audioPlayer.stopAllAudios()};dispose=()=>{this.clearStarAnimationTimeouts(),this.audioPlayer.stopAllAudios(),document.removeEventListener("visibilitychange",this.pauseAudios,!1),this.nextButtonInstance&&(this.nextButtonInstance.dispose(),this.nextButtonInstance=null),this.retryButtonInstance&&(this.retryButtonInstance.dispose(),this.retryButtonInstance=null),this.mapButtonInstance&&(this.mapButtonInstance.dispose(),this.mapButtonInstance=null),this.evolutionAnimation&&this.evolutionAnimation.dispose(),this.riveMonster&&this.riveMonster.dispose(),this.buttonsContainer.innerHTML=""}}class Eo{canvas;height;width;context;shouldShowLoading;images;loadedImages;imagesLoaded;cloudXPosition=-500;stopCloudMoving=!1;cloudMovingTimeOut=0;constructor(){const{loadingCanvas:e,loadingContext:i}=t.getCanvasSizeValues();this.canvas=e,this.height=e.height,this.width=e.width,this.context=i,this.shouldShowLoading=!1,this.images={cloud6:"./assets/images/cloud_01.png",cloud7:"./assets/images/cloud_02.png",cloud8:"./assets/images/cloud_03.png"},F(this.images,(e=>{this.loadedImages=Object.assign({},e),this.imagesLoaded=!0}))}toggleLoadingScreen(e){e&&this.initCloud(),this.shouldShowLoading=e,document.getElementById("loading").style.zIndex=e?"10":"-1"}draw(e){this.shouldShowLoading&&(this.context.clearRect(0,0,this.width,this.height),this.cloudXPosition+=.75*e,this.cloudMovingTimeOut+=e,this.cloudMovingTimeOut>2983&&this.toggleLoadingScreen(!1),this.cloudXPosition>=.5*this.width&&!this.stopCloudMoving&&(this.cloudMovingTimeOut+=e,this.cloudMovingTimeOut>2e3&&(this.stopCloudMoving=!0,this.cloudXPosition=0)),this.imagesLoaded&&(this.stopCloudMoving?(this.context.drawImage(this.loadedImages.cloud6,0+this.cloudXPosition,.6*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,.4*this.width+this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,0+this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*-this.width+this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*this.width+this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.05*this.width+this.cloudXPosition,.2*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.6*-this.width+this.cloudXPosition,.3*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,.5*this.width+this.cloudXPosition,.4*this.height,this.width,.4*this.height),this.context.drawImage(this.loadedImages.cloud7,.4*-this.width+this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*this.width+this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,.2*-this.width+this.cloudXPosition,.2*this.height,this.width,.5*this.height)):(this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=0?0:this.cloudXPosition,.6*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=0?0:this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*-this.width?.4*-this.width:this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.05*this.width?.05*this.width:this.cloudXPosition,.2*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.6*-this.width?.6*-this.width:this.cloudXPosition,.3*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=.5*this.width?.5*this.width:this.cloudXPosition,.4*this.height,this.width,.4*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=.4*-this.width?.4*-this.width:this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=.2*-this.width?.2*-this.width:this.cloudXPosition,.2*this.height,this.width,.5*this.height))))}initCloud=()=>{this.cloudXPosition=-500,this.stopCloudMoving=!1,this.cloudMovingTimeOut=0}}var To=i(35),xo={};xo.styleTagTransform=ze(),xo.setAttributes=je(),xo.insert=De().bind(null,"head"),xo.domAPI=ke(),xo.insertStyleElement=Oe();Pe()(To.A,xo);To.A&&To.A.locals&&To.A.locals;class Co{data;pwa_status;firebase_analytics;id;canavsElement;riveMonsterElement;buttonContext;playButton;images;loadedImages;imagesLoaded=!1;handler;static SceneName;audioPlayer;toggleBtn;pwa_install_status;titleTextElement;riveMonster;firebaseIntegration;loadingElement;onClickArea;hasBGLoaded=!1;hasRiveLoaded=!1;titleElement;backgroundGenerator;constructor(){this.data=Ke.getFTMData(),this.riveMonsterElement=t.getRiveCanvasValue(),this.toggleBtn=document.getElementById("toggle-btn"),this.loadingElement=document.getElementById("loading-screen"),this.riveMonster=new lo({canvas:this.riveMonsterElement,autoplay:!0,fit:"contain",alignment:"bottomCenter",width:this.riveMonsterElement.width,height:this.riveMonsterElement.height,src:"./assets/rive/phase4Monster.riv",onLoad:()=>{this.hasRiveLoaded=!0,this.hideInitialLoading(),setTimeout((()=>{}),2e3)}}),this.titleElement=new Ce({selectors:{root:"#title-and-play-button"}},"title",(e=>`<div id="${e}">${this.data.title}</div>`),!0),this.onClickArea=new Ce({selectors:{root:"#background"}},"start-scene-click-area",(e=>`<div id="${e}"></div>`),!0),this.audioPlayer=new we,this.pwa_status=localStorage.getItem(s),this.handler=document.getElementById("start-scene-click-area"),this.devToggle(),this.createPlayButton(),window.addEventListener("beforeinstallprompt",this.handlerInstallPrompt),this.setupBg(),this.titleTextElement=document.getElementById("title"),this.generateGameTitle(),this.riveMonsterElement.style.zIndex="4",this.firebaseIntegration=new ur,this.setOnClicknAreaStyle()}setupBg=async()=>{const e=Qe.createBackgroundComponent(1);this.backgroundGenerator=new Qe,this.backgroundGenerator.generateBackground(e),this.hasBGLoaded=!0,this.hideInitialLoading()};setOnClicknAreaStyle=()=>{this.handler.style.width="inherit",this.handler.style.height="inherit",this.handler.style.position="absolute",this.handler.style.zIndex="5"};hideInitialLoading=()=>{this.hasBGLoaded&&this.hasRiveLoaded&&setTimeout((()=>{this.loadingElement.style.zIndex="-1",this.loadingElement.style.display="none"}),750)};devToggle=()=>{this.toggleBtn.addEventListener("click",(()=>(e=>{e.classList.toggle("on");const t=e.classList.contains("on");Q.DebugMode=t,e.innerText="Dev"})(this.toggleBtn)))};generateGameTitle=()=>{this.titleTextElement&&(this.titleTextElement.textContent=this.data.title,this.data.title&&this.data.title.length>20?this.titleTextElement.classList.add("title-long"):this.titleTextElement.classList.remove("title-long"))};createPlayButton(){this.playButton=new yr({targetId:"title-and-play-button"}),this.playButton.onClick((()=>{this.toggleBtn.style.display="none",this.logTappedStartFirebaseEvent(),this.audioPlayer.playButtonClickSound(),Ke.publish(Ke.EVENTS.START_GAME,!0)})),document.addEventListener("selectstart",(function(e){e.preventDefault()})),this.handler.addEventListener("click",this.handleMouseClick,!1)}handleMouseClick=e=>{e.preventDefault(),ur.getInstance().sendUserClickedOnPlayEvent(),fbq("trackCustom","user_clicked",{event:"click"}),this.toggleBtn.style.display="none",this.audioPlayer.playButtonClickSound(),Ke.publish(Ke.EVENTS.SWITCH_SCENE_EVENT,D)};dispose(){this.audioPlayer.stopAllAudios(),this.handler.removeEventListener("click",this.handleMouseClick,!1),this.playButton.dispose(),this.playButton.destroy(),this.playButton=null,this.onClickArea.destroy(),this.titleElement.destroy(),window.removeEventListener("beforeinstallprompt",this.handlerInstallPrompt,!1),this.riveMonsterElement.style.zIndex="-1",this.riveMonster.dispose(),this.backgroundGenerator&&this.backgroundGenerator.clearBackgroundContent()}handlerInstallPrompt=e=>{e.preventDefault(),this.pwa_install_status=e,localStorage.setItem(s,"false")};logTappedStartFirebaseEvent(){const e={cr_user_id:Y,ftm_language:q,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.data.majVersion&&this.data.minVersion?this.data.majVersion.toString()+"."+this.data.minVersion.toString():""};this.firebaseIntegration.sendTappedStartEvent(e)}}var Io=i(438);const Po=new Io.FeatureFlagsService({metaData:{userId:Y}});class Ao{activeScene;data;width;height;context;gameControl;lastTime=0;toggleBtn;unsubscribeEvent;currentScene;constructor(e){Ke.setDefaultGameStateValues(e),this.activeScene={},this.setupUIElements(),window.addEventListener("beforeinstallprompt",this.handleInstallPrompt),this.initDefaultScenes(),this.startAnimationLoop(),this.currentScene=null,this.unsubscribeEvent=Ke.subscribe(Ke.EVENTS.SWITCH_SCENE_EVENT,(e=>{const t=this.currentScene!==e,i=e===j;(!this.currentScene||t||i)&&(this.currentScene=e,this.handleSwitchScene(e))}))}setupUIElements(){const{canvasWidth:e,canvasHeight:i,context:n,gameControlElem:s}=t.getCanvasSizeValues();this.width=e,this.height=i,this.context=n,this.gameControl=s,this.toggleBtn=document.getElementById("toggle-btn")}initDefaultScenes(){this.activeScene.loading=new Eo,this.gotoScene(L),Ke.subscribe(Ke.EVENTS.START_GAME,(e=>{if(Po.isFeatureEnabled("en-33")){const e=localStorage.getItem(r+q)||0,t={currentLevelData:{...Ke.data.levels[e],levelNumber:e},selectedLevelNumber:e};Ke.publish(Ke.EVENTS.GAMEPLAY_DATA_EVENT,t),Ke.publish(Ke.EVENTS.SWITCH_SCENE_EVENT,M)}else Ke.publish(Ke.EVENTS.SWITCH_SCENE_EVENT,D)}))}handleSwitchScene(e){e!==B&&this.activeScene.loading.toggleLoadingScreen(!0),this.timerWrapper((()=>{e!==M&&(this.gameControl.style.zIndex="-1"),this.gotoScene(e)}))}dispose(){this.cleanupScene(),this.unsubscribeEvent&&this.unsubscribeEvent(),window.removeEventListener("beforeinstallprompt",this.handleInstallPrompt,!1)}cleanupScene(){this.activeScene.scene&&this.activeScene.scene?.dispose()}gotoScene(e){this.cleanupScene(),this.activeScene.scene=this.getScene(e)}getScene(e){switch(e){case L:return new Co;case D:return new vo;case M:case j:return new mo;case B:return new So}}timerWrapper=(e,t=800)=>{setTimeout((()=>{e()}),t)};startAnimationLoop(){const e=t=>{this.animation(t),requestAnimationFrame(e)};requestAnimationFrame(e)}devToggle(){this.toggleBtn.addEventListener("click",(()=>{this.toggleBtn.classList.toggle("on"),this.toggleBtn.classList.contains("on")?(Q.DebugMode=!0,this.toggleBtn.innerText="Dev"):(Q.DebugMode=!1,this.toggleBtn.innerText="Dev")}))}animation=e=>{const t=e-this.lastTime;this.lastTime=e,this.context.clearRect(0,0,this.width,this.height),this.activeScene.loading.draw(t),this.activeScene.scene&&!(this.activeScene.scene instanceof So||this.activeScene.scene instanceof Co)&&this.activeScene.scene?.draw(t)};handleInstallPrompt=e=>{e.preventDefault(),localStorage.setItem(s,"false")}}try{self["workbox:window:4.3.1"]&&_()}catch(ko){}var ko=function(e,t){return new Promise((function(i){var n=new MessageChannel;n.port1.onmessage=function(e){return i(e.data)},e.postMessage(t,[n.port2])}))};function Lo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Do(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}try{self["workbox:core:4.3.1"]&&_()}catch(ko){}var Mo=function(){var e=this;this.promise=new Promise((function(t,i){e.resolve=t,e.reject=i}))},jo=function(e,t){return new URL(e,location).href===new URL(t,location).href},Bo=function(e,t){Object.assign(this,t,{type:e})};function Oo(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Ro(e,t,i){return i?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function zo(){}var No=function(e){var t,i;function n(t,i){var n;return void 0===i&&(i={}),(n=e.call(this)||this).t=t,n.i=i,n.o=0,n.u=new Mo,n.s=new Mo,n.h=new Mo,n.v=n.v.bind(Do(Do(n))),n.l=n.l.bind(Do(Do(n))),n.g=n.g.bind(Do(Do(n))),n.m=n.m.bind(Do(Do(n))),n}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var s,r,o=n.prototype;return o.register=Oo((function(e){var t,i,n=this,s=(void 0===e?{}:e).immediate,r=void 0!==s&&s;return t=function(){return n.p=Boolean(navigator.serviceWorker.controller),n.P=n.R(),Ro(n.k(),(function(e){n.B=e,n.P&&(n.O=n.P,n.s.resolve(n.P),n.h.resolve(n.P),n.j(n.P),n.P.addEventListener("statechange",n.l,{once:!0}));var t=n.B.waiting;return t&&jo(t.scriptURL,n.t)&&(n.O=t,Promise.resolve().then((function(){n.dispatchEvent(new Bo("waiting",{sw:t,wasWaitingBeforeRegister:!0}))}))),n.O&&n.u.resolve(n.O),n.B.addEventListener("updatefound",n.g),navigator.serviceWorker.addEventListener("controllerchange",n.m,{once:!0}),"BroadcastChannel"in self&&(n.C=new BroadcastChannel("workbox"),n.C.addEventListener("message",n.v)),navigator.serviceWorker.addEventListener("message",n.v),n.B}))},(i=function(){if(!r&&"complete"!==document.readyState)return function(e,t){return e&&e.then?e.then(zo):Promise.resolve()}(new Promise((function(e){return addEventListener("load",e)})))}())&&i.then?i.then(t):t()})),o.getSW=Oo((function(){return this.O||this.u.promise})),o.messageSW=Oo((function(e){return Ro(this.getSW(),(function(t){return ko(t,e)}))})),o.R=function(){var e=navigator.serviceWorker.controller;if(e&&jo(e.scriptURL,this.t))return e},o.k=Oo((function(){var e=this;return function(e,t){try{var i=e()}catch(e){return t(e)}return i&&i.then?i.then(void 0,t):i}((function(){return Ro(navigator.serviceWorker.register(e.t,e.i),(function(t){return e.L=performance.now(),t}))}),(function(e){throw e}))})),o.j=function(e){ko(e,{type:"WINDOW_READY",meta:"workbox-window"})},o.g=function(){var e=this.B.installing;this.o>0||!jo(e.scriptURL,this.t)||performance.now()>this.L+6e4?(this.W=e,this.B.removeEventListener("updatefound",this.g)):(this.O=e,this.u.resolve(e)),++this.o,e.addEventListener("statechange",this.l)},o.l=function(e){var t=this,i=e.target,n=i.state,s=i===this.W,r=s?"external":"",o={sw:i,originalEvent:e};!s&&this.p&&(o.isUpdate=!0),this.dispatchEvent(new Bo(r+n,o)),"installed"===n?this._=setTimeout((function(){"installed"===n&&t.B.waiting===i&&t.dispatchEvent(new Bo(r+"waiting",o))}),200):"activating"===n&&(clearTimeout(this._),s||this.s.resolve(i))},o.m=function(e){var t=this.O;t===navigator.serviceWorker.controller&&(this.dispatchEvent(new Bo("controlling",{sw:t,originalEvent:e})),this.h.resolve(t))},o.v=function(e){var t=e.data;this.dispatchEvent(new Bo("message",{data:t,originalEvent:e}))},s=n,(r=[{key:"active",get:function(){return this.s.promise}},{key:"controlling",get:function(){return this.h.promise}}])&&Lo(s.prototype,r),n}(function(){function e(){this.D={}}var t=e.prototype;return t.addEventListener=function(e,t){this.T(e).add(t)},t.removeEventListener=function(e,t){this.T(e).delete(t)},t.dispatchEvent=function(e){e.target=this,this.T(e.type).forEach((function(t){return t(e)}))},t.T=function(e){return this.D[e]=this.D[e]||new Set},e}()),Fo=i(664),Uo={};Uo.styleTagTransform=ze(),Uo.setAttributes=je(),Uo.insert=De().bind(null,"head"),Uo.domAPI=ke(),Uo.insertStyleElement=Oe();Pe()(Fo.A,Uo);Fo.A&&Fo.A.locals&&Fo.A.locals;const Vo=new Io.FeatureFlagsService({metaData:{userId:Y}});new class{canvas;riveCanvas;versionInfoElement;lang;is_cached;progressBar;progressBarContainer;channel;sceneHandler;loadingElement;majVersion;minVersion;dataModal;startSessionTime;titleTextElement;feedBackTextElement;currentProgress;background;firebaseIntegration;logged25=!1;logged50=!1;logged75=!1;constructor(e){this.lang=e,this.currentProgress=10,this.background=document.getElementById("background"),this.channel=new BroadcastChannel("my-channel"),this.progressBar=document.getElementById("progress-bar"),this.titleTextElement=document.getElementById("title"),this.feedBackTextElement=document.getElementById("feedback-text"),this.progressBarContainer=document.getElementById("progress-bar-container"),this.versionInfoElement=document.getElementById("version-info-id"),this.loadingElement=document.getElementById("loading-screen"),this.is_cached=this.initializeCachedData(),this.firebaseIntegration=new ur,this.startSessionTime=0,this.init(),this.channel.addEventListener("message",this.handleServiceWorkerMessage),window.addEventListener("beforeunload",this.handleBeforeUnload),document.addEventListener(le,this.handleVisibilityChange)}async init(){const e=await N.getLanguageSpecificFont(this.lang);await this.loadAndCacheFont(e,`./assets/fonts/${e}.ttf`),await this.loadTitleFeedbackCustomFont(),await this.preloadGameAudios(),await Vo.initialize(),this.handleLoadingScreen(),this.setupCanvas();const t=await ue();this.majVersion=t.majversion,this.minVersion=t.minversion,this.dataModal=this.createDataModal(t),this.globalInitialization(t),this.logSessionStartFirebaseEvent(),window.addEventListener("resize",(()=>{this.handleResize(this.dataModal)}));const i=localStorage.getItem(this.lang+"gamePlayedInfo"),n=i?JSON.parse(i).length-1:0,s=Q.DebugMode?r+this.lang+"Debug":r+this.lang;localStorage.setItem(s,n.toString()),this.is_cached.has(this.lang)&&this.handleCachedScenario(this.dataModal),this.registerWorkbox()}async loadTitleFeedbackCustomFont(){const e=_e[this.lang]||_e.default,t=`'${e}', sans-serif`;await this.loadAndCacheFont(e,`./assets/fonts/${e}.ttf`),[this.titleTextElement,this.feedBackTextElement].forEach((e=>{e&&(e.style.fontFamily=t)}))}logDownloadPercentageComplete(e,t){const i={cr_user_id:Y,ftm_language:q,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.getJsonVersionNumber(),ms_since_session_start:t};switch(e){case 25:this.firebaseIntegration.sendDownload25PercentCompletedEvent(i);break;case 50:this.firebaseIntegration.sendDownload50PercentCompletedEvent(i);break;case 75:this.firebaseIntegration.sendDownload75PercentCompletedEvent(i);break;case 100:this.firebaseIntegration.sendDownloadCompletedEvent(i);break;default:console.warn(`Unsupported progress percentage: ${e}`)}25===e&&this.logged25||50===e&&this.logged50||75===e&&this.logged75}logSessionStartFirebaseEvent(){let e=localStorage.getItem("lastSessionEndTime"),t=0;if(this.startSessionTime=(new Date).getTime(),e){let i=parseInt(e);isNaN(i)||(t=Math.abs((new Date).getTime()-i))}const i=parseFloat((t?t/864e5:0).toFixed(3)),n={cr_user_id:Y,ftm_language:q,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",days_since_last:i};this.firebaseIntegration.sendSessionStartEvent(n)}logSessionEndFirebaseEvent(){const e={cr_user_id:Y,ftm_language:q,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",duration:((new Date).getTime()-this.startSessionTime)/1e3};localStorage.setItem("lastSessionEndTime",(new Date).getTime().toString()),this.firebaseIntegration.sendSessionEndEvent(e)}initializeCachedData(){const e=localStorage.getItem(o);return e?new Map(JSON.parse(e)):new Map}async loadAndCacheFont(e,t){try{const i=await caches.open("fontCache");if(!await i.match(t)){const e=await fetch(t),n=await e.blob();await i.put(t,new Response(n))}const n=new FontFace(e,`url(${t}) format('truetype')`);await n.load(),document.fonts.add(n)}catch(e){console.error(`Failed to load and cache font: ${e}`)}}handleLoadingScreen=()=>{this.is_cached.get(q)?(this.progressBarContainer.style.display="none",this.progressBar.style.display="none"):(this.progressBarContainer.style.display="flex",this.progressBar.style.display="flex",this.progressBar.style.width="10%")};async registerWorkbox(){if("serviceWorker"in navigator)try{const e=new No("./sw.js",{});await e.register(),await navigator.serviceWorker.ready,this.is_cached.has(this.lang)?fetch(ce+"?cache-bust="+(new Date).getTime(),{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"no-store"},cache:"no-store"}).then((async e=>{if(!e.ok)return void console.error("Failed to fetch the content file from the server!");const t=await e.json(),i=t.majversion+"."+t.minversion,n=localStorage.getItem("version"+q.toLowerCase());if(i&&n!=i){console.log("Content version mismatch! Reloading...");var s=JSON.parse(localStorage.getItem("is_cached"));console.log("current lang  "+q);var r=s.filter((e=>!e.toString().includes(q)));localStorage.setItem(o,JSON.stringify(r)),localStorage.removeItem("version"+q.toLowerCase()),caches.delete(q),this.handleUpdateFoundMessage()}})).catch((e=>{console.error("Error fetching the content file: "+e)})):this.channel.postMessage({command:"Cache",data:this.lang}),navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerMessage)}catch(e){console.error(`Failed to register service worker: ${e}`)}}setupCanvas(){this.canvas=document.getElementById("canvas"),this.riveCanvas=document.getElementById("rivecanvas");let e=N.getResponsiveCanvasWidth();this.canvas.height=window.innerHeight,this.canvas.width=e,this.riveCanvas.height=window.innerHeight,this.riveCanvas.width=e,this.background.style.width=`${e}px`}createDataModal(e){return new de(e.title,e.OtherAudios,e.Levels,e.FeedbackTexts,e.RightToLeft,e.FeedbackAudios,e.majversion,e.minversion,e.version)}globalInitialization(e){globalThis.aboutCompany=e.aboutCompany,globalThis.descriptionText=e.descriptionText}handleResize(e){this.is_cached.has(this.lang)&&(this.updateVersionInfoElement(e),this.setupCanvas(),this.reinitializeSceneHandler(e))}updateVersionInfoElement(e){const t=this.is_cached.has(this.lang)&&(Q.TestLink||Q.DevelopmentLink||Q.DebugMode);t&&(e.majVersion&&e.minVersion?this.versionInfoElement.innerHTML+=`/j.v${e.majVersion}.${e.minVersion}`:e.version&&(this.versionInfoElement.innerHTML+=`/j.v${e.version}`));const i=document.getElementById("toggle-btn");i&&(i.style.display=t?"block":"none")}reinitializeSceneHandler(e){this.sceneHandler&&this.sceneHandler.dispose(),delete this.sceneHandler,this.sceneHandler=new Ao(e),this.passingDataToContainer()}handleCachedScenario(e){this.updateVersionInfoElement(e),this.sceneHandler=new Ao(e),this.passingDataToContainer()}passingDataToContainer=()=>{window.Android&&window.Android.cachedStatus(1==this.is_cached.get(this.lang))};setContainerAppOrientation(){window.Android&&window.Android.setContainerAppOrientation("portrait")}handleUpdateFoundMessage(){confirm("Update Found\nPress ok to update")&&window.location.reload()}handleLoadingMessage=e=>{if(this.progressBarContainer&&this.progressBar){this.showProgressBar();let t=Date.now()-this.startSessionTime;const i=Math.min(100,Math.max(0,e.data));i>this.currentProgress&&(this.currentProgress=i,this.progressBar.style.width=`${this.currentProgress}%`,this.currentProgress>=25&&!this.logged25&&(this.logDownloadPercentageComplete(25,t),this.logged25=!0),this.currentProgress>=50&&!this.logged50&&(this.logDownloadPercentageComplete(50,t),this.logged50=!0),this.currentProgress>=75&&!this.logged75&&(this.logDownloadPercentageComplete(75,t),this.logged75=!0),this.isDownloadCompleted(this.currentProgress)&&(this.cacheLanguage(),this.logDownloadPercentageComplete(100,t),this.hideLoadingScreen()))}};showProgressBar(){this.progressBarContainer.classList.add("visible"),this.progressBar.classList.add("visible")}isDownloadCompleted(e){return 100===e&&!this.is_cached.get(this.lang)}cacheLanguage(){try{this.is_cached.set(this.lang,!0),localStorage.setItem(o,JSON.stringify(Array.from(this.is_cached.entries())))}catch(e){console.error("Error caching language:",e)}}getJsonVersionNumber(){return this.majVersion&&this.minVersion?this.majVersion+"."+this.minVersion:""}hideLoadingScreen(){try{localStorage.setItem("version"+this.lang,this.getJsonVersionNumber()),this.handleResize(this.dataModal)}catch(e){console.error("Error hiding loading screen:",e)}}handleServiceWorkerMessage=e=>{"Loading"===e.data.msg?this.handleLoadingMessage(e.data):"Update Found"===e.data.msg&&this.handleUpdateFoundMessage()};handleVisibilityChange=()=>{V()?this.logSessionStartFirebaseEvent():this.logSessionEndFirebaseEvent()};handleBeforeUnload=async e=>{this.logSessionEndFirebaseEvent(),this.dispose()};preloadGameAudios=async()=>{let e=d;return new Promise(((t,i)=>{const n=e.map((e=>(new we).preloadGameAudio(e)));Promise.all(n).then((()=>t())).catch((e=>{console.error("Error preloading audio:",e),i(e)}))}))};dispose(){this.channel.removeEventListener("message",this.handleServiceWorkerMessage),window.removeEventListener("beforeunload",this.handleBeforeUnload),document.removeEventListener(le,this.handleVisibilityChange),window.removeEventListener("resize",this.handleResize),navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",this.handleServiceWorkerMessage)}}(q)})()})();